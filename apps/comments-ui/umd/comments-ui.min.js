(function(ot){typeof define=="function"&&define.amd?define(ot):ot()})(function(){"use strict";var qC=Object.defineProperty;var YC=(ot,ht,st)=>ht in ot?qC(ot,ht,{enumerable:!0,configurable:!0,writable:!0,value:st}):ot[ht]=st;var si=(ot,ht,st)=>(YC(ot,typeof ht!="symbol"?ht+"":ht,st),st);function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ht={exports:{}},st={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Cd=Object.getOwnPropertySymbols,$g=Object.prototype.hasOwnProperty,Vg=Object.prototype.propertyIsEnumerable;function Ug(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Hg(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ed=Hg()?Object.assign:function(t,e){for(var n,r=Ug(t),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var s in n)$g.call(n,s)&&(r[s]=n[s]);if(Cd){i=Cd(n);for(var l=0;l<i.length;l++)Vg.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},Sd={exports:{}},H={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Ed,or=60103,Ad=60106;H.Fragment=60107,H.StrictMode=60108,H.Profiler=60114;var Nd=60109,Md=60110,Td=60112;H.Suspense=60113;var Od=60115,Fd=60116;if(typeof Symbol=="function"&&Symbol.for){var lt=Symbol.for;or=lt("react.element"),Ad=lt("react.portal"),H.Fragment=lt("react.fragment"),H.StrictMode=lt("react.strict_mode"),H.Profiler=lt("react.profiler"),Nd=lt("react.provider"),Md=lt("react.context"),Td=lt("react.forward_ref"),H.Suspense=lt("react.suspense"),Od=lt("react.memo"),Fd=lt("react.lazy")}var Pd=typeof Symbol=="function"&&Symbol.iterator;function Wg(t){return t===null||typeof t!="object"?null:(t=Pd&&t[Pd]||t["@@iterator"],typeof t=="function"?t:null)}function li(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bd={};function sr(t,e,n){this.props=t,this.context=e,this.refs=Bd,this.updater=n||Rd}sr.prototype.isReactComponent={},sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(li(85));this.updater.enqueueSetState(this,t,e,"setState")},sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Id(){}Id.prototype=sr.prototype;function $l(t,e,n){this.props=t,this.context=e,this.refs=Bd,this.updater=n||Rd}var Vl=$l.prototype=new Id;Vl.constructor=$l,_l(Vl,sr.prototype),Vl.isPureReactComponent=!0;var Ul={current:null},jd=Object.prototype.hasOwnProperty,Ld={key:!0,ref:!0,__self:!0,__source:!0};function zd(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)jd.call(e,r)&&!Ld.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:or,type:t,key:o,ref:s,props:i,_owner:Ul.current}}function Kg(t,e){return{$$typeof:or,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hl(t){return typeof t=="object"&&t!==null&&t.$$typeof===or}function Jg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _d=/\/+/g;function Wl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jg(""+t.key):e.toString(36)}function Fo(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case or:case Ad:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Wl(s,0):r,Array.isArray(i)?(n="",t!=null&&(n=t.replace(_d,"$&/")+"/"),Fo(i,e,n,"",function(u){return u})):i!=null&&(Hl(i)&&(i=Kg(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(_d,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Wl(o,l);s+=Fo(o,e,n,a,i)}else if(a=Wg(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Wl(o,l++),s+=Fo(o,e,n,a,i);else if(o==="object")throw e=""+t,Error(li(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function Po(t,e,n){if(t==null)return t;var r=[],i=0;return Fo(t,r,"","",function(o){return e.call(n,o,i++)}),r}function qg(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var $d={current:null};function Mt(){var t=$d.current;if(t===null)throw Error(li(321));return t}var Yg={ReactCurrentDispatcher:$d,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Ul,IsSomeRendererActing:{current:!1},assign:_l};H.Children={map:Po,forEach:function(t,e,n){Po(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Po(t,function(){e++}),e},toArray:function(t){return Po(t,function(e){return e})||[]},only:function(t){if(!Hl(t))throw Error(li(143));return t}},H.Component=sr,H.PureComponent=$l,H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yg,H.cloneElement=function(t,e,n){if(t==null)throw Error(li(267,t));var r=_l({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ul.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)jd.call(e,a)&&!Ld.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:or,type:t.type,key:i,ref:o,props:r,_owner:s}},H.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:Md,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:Nd,_context:t},t.Consumer=t},H.createElement=zd,H.createFactory=function(t){var e=zd.bind(null,t);return e.type=t,e},H.createRef=function(){return{current:null}},H.forwardRef=function(t){return{$$typeof:Td,render:t}},H.isValidElement=Hl,H.lazy=function(t){return{$$typeof:Fd,_payload:{_status:-1,_result:t},_init:qg}},H.memo=function(t,e){return{$$typeof:Od,type:t,compare:e===void 0?null:e}},H.useCallback=function(t,e){return Mt().useCallback(t,e)},H.useContext=function(t,e){return Mt().useContext(t,e)},H.useDebugValue=function(){},H.useEffect=function(t,e){return Mt().useEffect(t,e)},H.useImperativeHandle=function(t,e,n){return Mt().useImperativeHandle(t,e,n)},H.useLayoutEffect=function(t,e){return Mt().useLayoutEffect(t,e)},H.useMemo=function(t,e){return Mt().useMemo(t,e)},H.useReducer=function(t,e,n){return Mt().useReducer(t,e,n)},H.useRef=function(t){return Mt().useRef(t)},H.useState=function(t){return Mt().useState(t)},H.version="17.0.2",Sd.exports=H;var b=Sd.exports;const q=ot(b);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=b,Vd=60103;if(st.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var Ud=Symbol.for;Vd=Ud("react.element"),st.Fragment=Ud("react.fragment")}var Qg=Gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xg=Object.prototype.hasOwnProperty,Zg={key:!0,ref:!0,__self:!0,__source:!0};function Hd(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Xg.call(e,r)&&!Zg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Vd,type:t,key:o,ref:s,props:i,_owner:Qg.current}}st.jsx=Hd,st.jsxs=Hd,ht.exports=st;var w=ht.exports;const Kl=q.createContext({});Kl.Provider;const Y=()=>b.useContext(Kl),Wd=({isFirst:t,isPaid:e})=>{const{accentColor:n,publication:r,member:i}=Y(),o={backgroundColor:n},s={color:n},l=t?"Start the conversation":"Join the discussion",a=()=>{window.location.href=e&&i?"#/portal/account/plans":"#/portal/signup"},u=()=>{window.location.href="#/portal/signin"};return w.jsxs("section",{className:`flex flex-col items-center pt-[40px] ${i?"pb-[32px]":"pb-[48px]"} ${!t&&"mt-4"} border-y border-[rgba(0,0,0,0.075)] dark:border-[rgba(255,255,255,0.1)] sm:px-8`,"data-testid":"cta-box",children:[w.jsx("h1",{className:`mb-[8px] text-center font-sans text-[24px] tracking-tight  text-black dark:text-[rgba(255,255,255,0.85)] ${t?"font-semibold":"font-bold"}`,children:l}),w.jsxs("p",{className:"mb-[28px] w-full px-0 text-center font-sans text-[16px] leading-normal text-neutral-600 dark:text-[rgba(255,255,255,0.85)] sm:max-w-screen-sm sm:px-8",children:["Become a ",e&&"paid"," member of ",w.jsx("span",{className:"font-semibold",children:r})," to start commenting."]}),w.jsx("button",{className:"font-san mb-[12px] inline-block rounded px-5 py-[14px] font-medium leading-none text-white transition-all hover:opacity-90","data-testid":"signup-button",style:o,type:"button",onClick:a,children:e&&i?"Upgrade now":"Sign up now"}),!i&&w.jsxs("p",{className:"text-center font-sans text-sm text-[rgba(0,0,0,0.4)] dark:text-[rgba(255,255,255,0.5)]",children:[w.jsx("span",{className:"mr-1 inline-block text-[15px]",children:"Already a member?"}),w.jsx("button",{className:"rounded-md text-sm font-semibold transition-all hover:opacity-90","data-testid":"signin-button",style:s,type:"button",onClick:u,children:"Sign in"})]})]})},Kd=t=>b.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},b.createElement("path",{d:"M7 9.5C7 10.1566 7.12933 10.8068 7.3806 11.4134C7.63188 12.02 8.00017 12.5712 8.46447 13.0355C8.92876 13.4998 9.47995 13.8681 10.0866 14.1194C10.6932 14.3707 11.3434 14.5 12 14.5C12.6566 14.5 13.3068 14.3707 13.9134 14.1194C14.52 13.8681 15.0712 13.4998 15.5355 13.0355C15.9998 12.5712 16.3681 12.02 16.6194 11.4134C16.8707 10.8068 17 10.1566 17 9.5C17 8.84339 16.8707 8.19321 16.6194 7.58658C16.3681 6.97995 15.9998 6.42876 15.5355 5.96447C15.0712 5.50017 14.52 5.13188 13.9134 4.8806C13.3068 4.62933 12.6566 4.5 12 4.5C11.3434 4.5 10.6932 4.62933 10.0866 4.8806C9.47995 5.13188 8.92876 5.50017 8.46447 5.96447C8.00017 6.42876 7.63188 6.97995 7.3806 7.58658C7.12933 8.19321 7 8.84339 7 9.5V9.5Z",stroke:"white",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),b.createElement("circle",{cx:12,cy:12,r:11.375,stroke:"white",strokeWidth:1.25}),b.createElement("path",{d:"M19.5 20C19.092 19.6069 18.4941 19.2498 17.7403 18.9489C16.9864 18.6481 16.0915 18.4094 15.1066 18.2466C14.1217 18.0838 13.0661 18 12 18C10.9339 18 9.87831 18.0838 8.8934 18.2466C7.90848 18.4094 7.01357 18.6481 6.25975 18.9489C5.50593 19.2498 4.90796 19.6069 4.5 20",stroke:"white",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ey=({type:t,status:e,autoHide:n,duration:r=2600,closeable:i,state:o,message:s,meta:l={}})=>{let a=0;return o&&o.popupNotification&&(a=(o.popupNotification.count||0)+1),{type:t,status:e,autoHide:n,closeable:i,duration:r,meta:l,message:s,count:a}};function Jl(t){return t!==0&&!t?"":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ty(t){const e=new Date(t),n=new Date;let r=Math.round((n.getTime()-e.getTime())/1e3);if(r<5)return"Just now";if(r<60)return`${r} seconds ago`;if(r=r/60,r<60)return Math.floor(r)===1?"One minute ago":`${Math.floor(r)} minutes ago`;const i=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate()?"Yesterday":(r=r/60,r<24?Math.floor(r)===1?"One hour ago":`${Math.floor(r)} hours ago`:(r=r/24,r<7?Math.floor(r)===1?"One day ago":`${Math.floor(r)} days ago`:(r=r/7,Math.floor(r)===1?"One week ago":`${Math.floor(r)} weeks ago`)))}function ny(t){const e=new Date(t);let n=e.toLocaleDateString("en-us",{day:"2-digit"}),r=e.toLocaleString("en-us",{month:"short"}),i=e.getFullYear(),o=(e.getHours()<10?"0":"")+e.getHours(),s=(e.getMinutes()<10?"0":"")+e.getMinutes();return`${n} ${r} ${i} ${o}:${s}`}function ql(t){if(!t)return"";const e=t.split(" ");return e.length===0?"":e.length===1?e[0].substring(0,1).toLocaleUpperCase():e[0].substring(0,1).toLocaleUpperCase()+e[e.length-1].substring(0,1).toLocaleUpperCase()}function Ro(){return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)<480}function ry(t){return t.status==="published"}const iy=t=>{let e=0,n=t.ownerDocument.defaultView;for(;n&&n!==window;){const i=n.parent;for(let o=0;o<i.frames.length;o++)if(i.frames[o]===n){for(let s of i.document.getElementsByTagName("iframe"))if(s.contentWindow===n){const l=s.getBoundingClientRect();e+=l.top+n.pageYOffset}n=i;break}}return t.getBoundingClientRect().top+window.pageYOffset+e},Jd=t=>{const e=t.offsetHeight,n=iy(t),r=n+e,i=64,o=window.innerHeight,s=window.scrollY,l=s+o;if(n-i<s||r+i>l){const a=(n+r)/2;window.scrollTo({top:a-o/2,left:0,behavior:"smooth"})}};function qd(){return"w-9 h-9 sm:w-[40px] sm:h-[40px]"}const oy=()=>{const t=qd();return w.jsx("figure",{className:`relative ${t}`,children:w.jsx("div",{className:`flex items-center justify-center rounded-full bg-[rgba(0,0,0,0.085)] dark:bg-[rgba(255,255,255,0.15)] ${t}`,children:w.jsx(Kd,{className:"stroke-white opacity-80"})})})},Yd=({comment:t})=>{var m;const{member:e,avatarSaturation:n}=Y(),r=qd(),i=(e==null?void 0:e.name)??((m=t==null?void 0:t.member)==null?void 0:m.name),o=y=>{let h=0;for(let g=0;g<y.length;g++)h=y.charCodeAt(g)+((h<<5)-h);return h=Math.abs(h),h},s=(y,h,g)=>Math.floor(y%(g-h)+h),l=()=>{let y=t?t.member:e;if(!y||!y.name)return[0,0,10];const h=n===void 0||isNaN(n)?50:n,g=[0,360],x=Math.round(h/(100/30))+30,v=[x-20,x],E=o(y.name),D=s(E,g[0],g[1]),N=s(E,v[0],v[1]);return[D,h,N]},a=y=>`hsl(${y[0]}, ${y[1]}%, ${y[2]}%)`,u=()=>{if(t&&!t.member)return ql("Deleted member");let y=t?t.member:e;return!y||!y.name?ql("Anonymous"):ql(y.name)};let c=t?t.member:e;const d={background:a(l())};let p=w.jsxs(w.Fragment,{children:[i?w.jsx("div",{className:`flex items-center justify-center rounded-full ${r}`,"data-testid":"avatar-background",style:d,children:w.jsx("p",{className:"font-sans text-lg font-semibold text-white",children:u()})}):w.jsx("div",{className:`flex items-center justify-center rounded-full bg-neutral-900 dark:bg-[rgba(255,255,255,0.7)] ${r}`,"data-testid":"avatar-background",children:w.jsx(Kd,{className:"stroke-white dark:stroke-[rgba(0,0,0,0.6)]"})}),c&&w.jsx("img",{alt:"Avatar",className:`absolute left-0 top-0 rounded-full ${r}`,src:c.avatar_image})]});return w.jsx("figure",{className:`relative ${r}`,children:p})},sy=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,width:24,viewBox:"0 0 24 24",...t},b.createElement("g",{strokeLinecap:"round",strokeWidth:2,fill:"none",strokeLinejoin:"round",className:"nc-icon-wrapper"},b.createElement("polygon",{points:"7 21 2 22 3 17 18 2 22 6 7 21"})));function ge(t){this.content=t}ge.prototype={constructor:ge,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new ge(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ge(n)},addToStart:function(t,e){return new ge([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ge(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new ge(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ge.from(t),t.size?new ge(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ge.from(t),t.size?new ge(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ge.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}},ge.from=function(t){if(t instanceof ge)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ge(e)};function Gd(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Gd(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Qd(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let u=Qd(s.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class S{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{l.isText?(o+=l.text.slice(Math.max(e,a)-a,n-a),s=!r):l.isLeaf?(i?o+=typeof i=="function"?i(l):i:l.type.spec.leafText&&(o+=l.type.spec.leafText(l)),s=!r):!s&&l.isBlock&&(o+=r,s=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new S(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new S(r,i)}cutByIndex(e,n){return e==n?S.empty:e==0&&n==this.content.length?this:new S(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new S(i,o)}addToStart(e){return new S([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new S(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Gd(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Qd(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Bo(0,e);if(e==this.size)return Bo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Bo(r+1,s):Bo(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return S.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new S(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return S.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new S(n||e,r)}static from(e){if(!e)return S.empty;if(e instanceof S)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new S([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}S.empty=new S([],0);const Yl={index:0,offset:0};function Bo(t,e){return Yl.index=t,Yl.offset=e,Yl}function Io(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Io(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Io(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let G=class bd{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Io(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return bd.none;if(e instanceof bd)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};G.none=[];class ai extends Error{}class F{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Zd(this.content,e+this.openStart,n);return r&&new F(r,this.openStart,this.openEnd)}removeBetween(e,n){return new F(Xd(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return F.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new F(S.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new F(e,r,i)}}F.empty=new F(S.empty,0,0);function Xd(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Xd(o.content,e-i-1,n-i-1)))}function Zd(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Zd(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function ly(t,e,n){if(n.openStart>t.depth)throw new ai("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ai("Inconsistent open depths");return ef(t,e,n,0)}function ef(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=ef(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return Sn(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=ay(n,t);return Sn(o,nf(t,s,l,e,r))}else return Sn(o,jo(t,e,r))}function tf(t,e){if(!e.type.compatibleContent(t.type))throw new ai("Cannot join "+e.type.name+" onto "+t.type.name)}function Gl(t,e,n){let r=t.node(n);return tf(r,e.node(n)),r}function En(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ui(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(En(t.nodeAfter,r),o++));for(let l=o;l<s;l++)En(i.child(l),r);e&&e.depth==n&&e.textOffset&&En(e.nodeBefore,r)}function Sn(t,e){if(!t.type.validContent(e))throw new ai("Invalid content for node "+t.type.name);return t.copy(e)}function nf(t,e,n,r,i){let o=t.depth>i&&Gl(t,e,i+1),s=r.depth>i&&Gl(n,r,i+1),l=[];return ui(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(tf(o,s),En(Sn(o,nf(t,e,n,r,i+1)),l)):(o&&En(Sn(o,jo(t,e,i+1)),l),ui(e,n,i,l),s&&En(Sn(s,jo(n,r,i+1)),l)),ui(r,null,i,l),new S(l)}function jo(t,e,n){let r=[];if(ui(null,t,n,r),t.depth>n){let i=Gl(t,e,n+1);En(Sn(i,jo(t,e,n+1)),r)}return ui(e,null,n,r),new S(r)}function ay(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(S.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class ci{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return G.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Lo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new ci(n,r,o)}static resolveCached(e,n){for(let i=0;i<Ql.length;i++){let o=Ql[i];if(o.pos==n&&o.doc==e)return o}let r=Ql[Xl]=ci.resolve(e,n);return Xl=(Xl+1)%uy,r}}let Ql=[],Xl=0,uy=12;class Lo{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const cy=Object.create(null);let An=class Dd{constructor(e,n,r,i=G.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||S.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Io(this.attrs,n||e.defaultAttrs||cy)&&G.sameSet(this.marks,r||G.none)}copy(e=null){return e==this.content?this:new Dd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Dd(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return F.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new F(u,i.depth-s,o.depth-s)}replace(e,n,r){return ly(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return ci.resolveCached(this,e)}resolveNoCache(e){return ci.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),rf(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=S.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let e=G.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!G.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=S.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};An.prototype.text=void 0;class zo extends An{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rf(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zo(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function rf(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Nn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new dy(e,n);if(r.next==null)return Nn.empty;let i=of(r);r.next&&r.err("Unexpected trailing text");let o=wy(yy(i));return xy(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return S.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,l.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Nn.empty=new Nn(!0);class dy{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function of(t){let e=[];do e.push(fy(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function fy(t){let e=[];do e.push(py(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function py(t){let e=gy(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=hy(t,e);else break;return e}function sf(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function hy(t,e){let n=sf(t),r=n;return t.eat(",")&&(t.next!="}"?r=sf(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function my(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function gy(t){if(t.eat("(")){let e=of(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=my(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function yy(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=n();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function lf(t,e){return e-t}function af(t,e){let n=[];return r(e),n.sort(lf);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function wy(t){let e=Object.create(null);return n(af(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);af(t,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new Nn(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(lf);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function xy(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function uf(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function cf(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function df(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new vy(t[n]);return e}let ff=class _g{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=df(r.attrs),this.defaultAttrs=uf(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Nn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:cf(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new An(this,this.computeAttrs(e),S.from(n),G.setFrom(r))}createChecked(e=null,n,r){if(n=S.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new An(this,this.computeAttrs(e),n,G.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=S.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(S.empty,!0);return o?new An(this,e,n.append(o),G.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:G.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new _g(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class vy{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class _o{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=df(i.attrs),this.excluded=null;let o=uf(this.attrs);this.instance=o?new G(this,o):null}create(e=null){return!e&&this.instance?this.instance:new G(this,cf(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new _o(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class ky{constructor(e){this.cached=Object.create(null),this.spec={nodes:ge.from(e.nodes),marks:ge.from(e.marks||{}),topNode:e.topNode},this.nodes=ff.compile(this.spec.nodes,this),this.marks=_o.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let i=this.nodes[r],o=i.spec.content||"",s=i.spec.marks;i.contentMatch=n[o]||(n[o]=Nn.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=s=="_"?null:s?pf(this,s.split(" ")):s==""||!i.inlineContent?[]:null}for(let r in this.marks){let i=this.marks[r],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:pf(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ff){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new zo(r,r.defaultAttrs,e,G.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return An.fromJSON(this,e)}markFromJSON(e){return G.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function pf(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class lr{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new yf(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new yf(this,n,!0);return r.addAll(e,n.from,n.to),F.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(Cy(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=wf(s)),s.mark=i})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=wf(s)),s.node=i})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new lr(e,lr.schemaRules(e)))}}const hf={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},by={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mf={ol:!0,ul:!0},$o=1,Vo=2,di=4;function gf(t,e,n){return e!=null?(e?$o:0)|(e==="full"?Vo:0):t&&t.whitespace=="pre"?$o|Vo:n&~di}class Uo{constructor(e,n,r,i,o,s,l){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=l,this.content=[],this.activeMarks=G.none,this.stashMarks=[],this.match=s||(l&di?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(S.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$o)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=S.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(S.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):Sy(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!hf.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class yf{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=gf(null,n.preserveWhitespace,0)|(r?di:0);i?o=new Uo(i.type,i.attrs,G.none,G.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Uo(null,null,G.none,G.none,!0,null,s):o=new Uo(e.schema.topNodeType,null,G.none,G.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let n=e.getAttribute("style"),r=n?this.readStyles(Ey(n)):null,i=this.top;if(r!=null)for(let o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(e),r!=null)for(let o=0;o<r.length;o++)this.removePendingMark(r[o],i)}}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Vo||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&$o)r.options&Vo?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;mf.hasOwnProperty(r)&&this.parser.normalizeLists&&Dy(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:by.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,l=this.top,a=this.needsBlock;if(hf.hasOwnProperty(r))s=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),s&&this.sync(l),this.needsBlock=a}else this.addElementByRule(e,o,o.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=G.none;e:for(let r=0;r<e.length;r+=2)for(let i=void 0;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)i=o;else break}return n}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a)}i&&this.sync(l)&&this.open--,s&&this.removePendingMark(s,l)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=gf(e,i,o.options);o.options&di&&o.content.length==0&&(s|=di),this.nodes.push(new Uo(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=Ay(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function Dy(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&mf.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Cy(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ey(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function wf(t){let e={};for(let n in t)e[n]=t[n];return e}function Sy(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function Ay(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class mt{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Zl(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=mt.renderSpec(Zl(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&mt.renderSpec(Zl(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,l=r?e.createElementNS(r,i):e.createElement(i),a=n[1],u=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){u=2;for(let c in a)if(a[c]!=null){let f=c.indexOf(" ");f>0?l.setAttributeNS(c.slice(0,f),c.slice(f+1),a[c]):l.setAttribute(c,a[c])}}for(let c=u;c<n.length;c++){let f=n[c];if(f===0){if(c<n.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:p}=mt.renderSpec(e,f,r);if(l.appendChild(d),p){if(s)throw new RangeError("Multiple content holes");s=p}}}return{dom:l,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new mt(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=xf(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return xf(e.marks)}}function xf(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Zl(t){return t.document||window.document}const vf=65535,kf=Math.pow(2,16);function Ny(t,e){return t+e*kf}function bf(t){return t&vf}function My(t){return(t-(t&vf))/kf}const Df=1,Cf=2,Ho=4,Ef=8;class ea{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Ef)>0}get deletedBefore(){return(this.delInfo&(Df|Ho))>0}get deletedAfter(){return(this.delInfo&(Cf|Ho))>0}get deletedAcross(){return(this.delInfo&Ho)>0}}class Je{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Je.empty)return Je.empty}recover(e){let n=0,r=bf(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+My(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:n:n,p=a+i+(d<0?0:c);if(r)return p;let m=e==(n<0?a:f)?null:Ny(l/3,e-a),y=e==a?Cf:e==f?Df:Ho;return(n<0?e!=a:e!=f)&&(y|=Ef),new ea(p,y,m)}i+=c-u}return r?e+i:new ea(e+i,0,null)}touches(e,n){let r=0,i=bf(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Je(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Je.empty:new Je(e<0?[0,-e,0]:[0,0,e])}}Je.empty=new Je([]);class fi{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new fi(this.maps,this.mirror,e,n)}copy(){return new fi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new fi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new ea(e,i,null)}}const ta=Object.create(null);class Be{getMap(){return Je.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ta[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ta)throw new RangeError("Duplicate use of step JSON ID "+e);return ta[e]=n,n.prototype.jsonID=e,n}}class le{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new le(e,null)}static fail(e){return new le(null,e)}static fromReplace(e,n,r,i){try{return le.ok(e.replace(n,r,i))}catch(o){if(o instanceof ai)return le.fail(o.message);throw o}}}function na(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(na(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return S.fromArray(r)}class _t extends Be{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new F(na(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return le.fromReplace(e,this.from,this.to,o)}invert(){return new gt(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _t(n.pos,r.pos,this.mark)}merge(e){return e instanceof _t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _t(n.from,n.to,e.markFromJSON(n.mark))}}Be.jsonID("addMark",_t);class gt extends Be{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new F(na(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return le.fromReplace(e,this.from,this.to,r)}invert(){return new _t(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gt(n.pos,r.pos,this.mark)}merge(e){return e instanceof gt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new gt(n.from,n.to,e.markFromJSON(n.mark))}}Be.jsonID("removeMark",gt);class $t extends Be{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return le.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return le.fromReplace(e,this.pos,this.pos+1,new F(S.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new $t(this.pos,n.marks[i]);return new $t(this.pos,this.mark)}}return new ar(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $t(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $t(n.pos,e.markFromJSON(n.mark))}}Be.jsonID("addNodeMark",$t);class ar extends Be{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return le.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return le.fromReplace(e,this.pos,this.pos+1,new F(S.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new $t(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ar(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ar(n.pos,e.markFromJSON(n.mark))}}Be.jsonID("removeNodeMark",ar);class De extends Be{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&ra(e,this.from,this.to)?le.fail("Structure replace would overwrite content"):le.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Je([this.from,this.to-this.from,this.slice.size])}invert(e){return new De(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new De(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof De)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?F.empty:new F(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new De(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?F.empty:new F(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new De(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new De(n.from,n.to,F.fromJSON(e,n.slice),!!n.structure)}}Be.jsonID("replace",De);class ue extends Be{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(ra(e,this.from,this.gapFrom)||ra(e,this.gapTo,this.to)))return le.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return le.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?le.fromReplace(e,this.from,this.to,r):le.fail("Content does not fit in gap")}getMap(){return new Je([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ue(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new ue(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ue(n.from,n.to,n.gapFrom,n.gapTo,F.fromJSON(e,n.slice),n.insert,!!n.structure)}}Be.jsonID("replaceAround",ue);function ra(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Ty(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),p=Math.min(u+a.nodeSize,n),m=r.addToSet(f);for(let y=0;y<f.length;y++)f[y].isInSet(m)||(s&&s.to==d&&s.mark.eq(f[y])?s.to=p:i.push(s=new gt(d,p,f[y])));l&&l.to==d?l.to=p:o.push(l=new _t(d,p,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function Oy(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof _o){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,n);for(let c=0;c<a.length;c++){let f=a[c],d;for(let p=0;p<i.length;p++){let m=i[p];m.step==o-1&&f.eq(i[p].style)&&(d=m)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>t.step(new gt(s.from,s.to,s.style)))}function Fy(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),o=[],s=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),u=s+a.nodeSize,c=r.matchType(a.type);if(!c)o.push(new De(s,u,F.empty));else{r=c;for(let f=0;f<a.marks.length;f++)n.allowsMarkType(a.marks[f].type)||t.step(new gt(s,u,a.marks[f]))}s=u}if(!r.validEnd){let l=r.fillBefore(S.empty,!0);t.replace(s,s,new F(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Py(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ur(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!Py(i,o,s))break}return null}function Ry(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=S.empty,f=0;for(let m=o,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,c=S.from(r.node(m).copy(c)),f++):a--;let d=S.empty,p=0;for(let m=o,y=!1;m>n;m--)y||i.after(m+1)<i.end(m)?(y=!0,d=S.from(i.node(m).copy(d)),p++):u++;t.step(new ue(a,u,s,l,new F(c.append(d),f,p),c.size-f,!0))}function ia(t,e,n=null,r=t){let i=By(t,e),o=i&&Iy(r,e);return o?i.map(Sf).concat({type:e,attrs:n}).concat(o.map(Sf)):null}function Sf(t){return{type:t,attrs:null}}function By(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function Iy(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:s}function jy(t,e,n){let r=S.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=S.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new ue(i,o,i,o,new F(r,0,0),n.length,!0))}function Ly(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&zy(t.doc,t.mapping.slice(o).map(l),r)){t.clearIncompatible(t.mapping.slice(o).map(l,1),r);let a=t.mapping.slice(o),u=a.map(l,1),c=a.map(l+s.nodeSize,1);return t.step(new ue(u,c,u+1,c-1,new F(S.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function zy(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function _y(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ue(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new F(S.from(s),0,0),1,!0))}function cr(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),m=r&&r[c]||f;if(m!=f&&(p=p.replaceChild(0,m.type.create(m.attrs))),!f.canReplace(d+1,f.childCount)||!m.type.validContent(p))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function $y(t,e,n=1,r){let i=t.doc.resolve(e),o=S.empty,s=S.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){o=S.from(i.node(l).copy(o));let c=r&&r[u];s=S.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}t.step(new De(e,e,new F(o.append(s),n,n),!0))}function pi(t,e){let n=t.resolve(e),r=n.index();return Vy(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Vy(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Uy(t,e,n){let r=new De(e-n,e+n,F.empty,!0);t.step(r)}function Hy(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Wy(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let f=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(a,a,f[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function oa(t,e,n=e,r=F.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Af(i,o,r)?new De(e,n,r):new Ky(i,o,r).fit()}function Af(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Ky{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=S.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=S.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new F(o,s,l);return e>-1?new ue(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new De(r.pos,i.pos,a):null}findFittable(){for(let e=1;e<=2;e++)for(let n=this.unplaced.openStart;n>=0;n--){let r,i=null;n?(i=sa(this.unplaced.content,n-1).firstChild,r=i.content):r=this.unplaced.content;let o=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:l,match:a}=this.frontier[s],u,c=null;if(e==1&&(o?a.matchType(o.type)||(c=a.fillBefore(S.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(e==2&&o&&(u=a.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:u};if(i&&a.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=sa(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new F(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=sa(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new F(hi(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new F(hi(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let y=0;y<o.length;y++)this.openFrontierNode(o[y]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)c.push(i.child(y));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let y=l.child(u),h=f.matchType(y.type);if(!h)break;u++,(u>1||a==0||y.content.size)&&(f=h,c.push(Nf(y.mark(d.allowedMarks(y.marks)),u==1?a:0,u==l.childCount?p:-1)))}let m=u==l.childCount;m||(p=-1),this.placed=mi(this.placed,n,S.from(c)),this.frontier[n].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,h=l;y<p;y++){let g=h.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),h=g.content}this.unplaced=m?e==0?F.empty:new F(hi(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new F(hi(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!la(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=la(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=la(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=mi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=mi(this.placed,this.depth,S.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(S.empty,!0);n.childCount&&(this.placed=mi(this.placed,this.frontier.length,n))}}function hi(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(hi(t.firstChild.content,e-1,n)))}function mi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(mi(t.lastChild.content,e-1,n)))}function sa(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Nf(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Nf(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(S.empty,!0)))),t.copy(r)}function la(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!Jy(n,o.content,s)?l:null}function Jy(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function qy(t){return t.spec.defining||t.spec.definingForContent}function Yy(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Af(i,o,r))return t.step(new De(e,n,r));let s=Tf(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let m=i.node(d).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(d)>-1?l=d:i.before(d)==p&&s.splice(1,0,-d)}let a=s.indexOf(l),u=[],c=r.openStart;for(let d=r.content,p=0;;p++){let m=d.firstChild;if(u.push(m),p==r.openStart)break;d=m.content}for(let d=c-1;d>=0;d--){let p=u[d].type,m=qy(p);if(m&&i.node(a).type!=p)c=d;else if(m||!p.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+c+1)%(r.openStart+1),m=u[p];if(m)for(let y=0;y<s.length;y++){let h=s[(y+a)%s.length],g=!0;h<0&&(g=!1,h=-h);let x=i.node(h-1),k=i.index(h-1);if(x.canReplaceWith(k,k,m.type,m.marks))return t.replace(i.before(h),g?o.after(h):n,new F(Mf(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let d=s.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),n=o.after(p))}}function Mf(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Mf(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(S.empty,!0))}return t}function Gy(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Hy(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new F(S.from(r),0,0))}function Qy(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=Tf(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function Tf(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class dr extends Be{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return le.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return le.fromReplace(e,this.pos,this.pos+1,new F(S.from(i),0,n.isLeaf?0:1))}getMap(){return Je.empty}invert(e){return new dr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new dr(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new dr(n.pos,n.attr,n.value)}}Be.jsonID("attr",dr);let fr=class extends Error{};fr=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},fr.prototype=Object.create(Error.prototype),fr.prototype.constructor=fr,fr.prototype.name="TransformError";class Of{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new fr(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=F.empty){let i=oa(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new F(S.from(r),0,0))}delete(e,n){return this.replace(e,n,F.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Yy(this,e,n,r),this}replaceRangeWith(e,n,r){return Gy(this,e,n,r),this}deleteRange(e,n){return Qy(this,e,n),this}lift(e,n){return Ry(this,e,n),this}join(e,n=1){return Uy(this,e,n),this}wrap(e,n){return jy(this,e,n),this}setBlockType(e,n=e,r,i=null){return Ly(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i=[]){return _y(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new dr(e,n,r)),this}addNodeMark(e,n){return this.step(new $t(e,n)),this}removeNodeMark(e,n){if(!(n instanceof G)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new ar(e,n)),this}split(e,n=1,r){return $y(this,e,n,r),this}addMark(e,n,r){return Ty(this,e,n,r),this}removeMark(e,n,r){return Oy(this,e,n,r),this}clearIncompatible(e,n,r){return Fy(this,e,n,r),this}}const aa=Object.create(null);class z{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Xy(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=F.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?F.empty:n),l==0&&Rf(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Rf(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new U(e):pr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?pr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):pr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new at(e.node(0))}static atStart(e){return pr(e,e,0,0,1)||new at(e)}static atEnd(e){return pr(e,e,e.content.size,e.childCount,-1)||new at(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=aa[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in aa)throw new RangeError("Duplicate use of selection JSON ID "+e);return aa[e]=n,n.prototype.jsonID=e,n}getBookmark(){return U.between(this.$anchor,this.$head).getBookmark()}}z.prototype.visible=!0;class Xy{constructor(e,n){this.$from=e,this.$to=n}}let Ff=!1;function Pf(t){!Ff&&!t.parent.inlineContent&&(Ff=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class U extends z{constructor(e,n=e){Pf(e),Pf(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return z.near(r);let i=e.resolve(n.map(this.anchor));return new U(i.parent.inlineContent?i:r,r)}replace(e,n=F.empty){if(super.replace(e,n),n==F.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof U&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Wo(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new U(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=z.findFrom(n,r,!0)||z.findFrom(n,-r,!0);if(o)n=o.$head;else return z.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(z.findFrom(e,-r,!0)||z.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new U(e,n)}}z.jsonID("text",U);class Wo{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Wo(e.map(this.anchor),e.map(this.head))}resolve(e){return U.between(e.resolve(this.anchor),e.resolve(this.head))}}class L extends z{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?z.near(o):new L(o)}content(){return new F(S.from(this.node),0,0)}eq(e){return e instanceof L&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ua(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new L(e.resolve(n.anchor))}static create(e,n){return new L(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}L.prototype.visible=!1,z.jsonID("node",L);class ua{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Wo(r,r):new ua(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&L.isSelectable(r)?new L(n):z.near(n)}}class at extends z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=F.empty){if(n==F.empty){e.delete(0,e.doc.content.size);let r=z.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new at(e)}map(e){return new at(e)}eq(e){return e instanceof at}getBookmark(){return Zy}}z.jsonID("all",at);const Zy={map(){return this},resolve(t){return new at(t)}};function pr(t,e,n,r,i,o=!1){if(e.inlineContent)return U.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&L.isSelectable(l))return L.create(t,n-(i<0?l.nodeSize:0))}else{let a=pr(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Rf(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof De||i instanceof ue))return;let o=t.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),t.setSelection(z.near(t.doc.resolve(s),n))}const Bf=1,Ko=2,If=4;class e1 extends Of{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Bf)&~Ko,this.storedMarks=null,this}get selectionSet(){return(this.updated&Bf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ko,this}ensureMarks(e){return G.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ko)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ko,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||G.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(z.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=If,this}get scrolledIntoView(){return(this.updated&If)>0}}function jf(t,e){return!e||!t?t:t.bind(e)}class gi{constructor(e,n,r){this.name=e,this.init=jf(n.init,r),this.apply=jf(n.apply,r)}}const t1=[new gi("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new gi("selection",{init(t,e){return t.selection||z.atStart(e.doc)},apply(t){return t.selection}}),new gi("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new gi("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ca{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=t1.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new gi(r.key,r.spec.state,r))})}}class hr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new hr(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new e1(this)}static create(e){let n=new ca(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new hr(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new ca(this.schema,e.plugins),r=n.fields,i=new hr(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ca(e.schema,e.plugins),o=new hr(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=An.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=z.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=u.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Lf(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Lf(i,e,{})),n[r]=i}return n}class qe{constructor(e){this.spec=e,this.props={},e.props&&Lf(e.props,this,this.props),this.key=e.key?e.key.key:zf("plugin")}getState(e){return e[this.key]}}const da=Object.create(null);function zf(t){return t in da?t+"$"+ ++da[t]:(da[t]=0,t+"$")}class Vt{constructor(e="key"){this.key=zf(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ut=typeof navigator<"u"?navigator:null,_f=typeof document<"u"?document:null,Ht=Ut&&Ut.userAgent||"",fa=/Edge\/(\d+)/.exec(Ht),$f=/MSIE \d/.exec(Ht),pa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ht),Ve=!!($f||pa||fa),Wt=$f?document.documentMode:pa?+pa[1]:fa?+fa[1]:0,yt=!Ve&&/gecko\/(\d+)/i.test(Ht);yt&&+(/Firefox\/(\d+)/.exec(Ht)||[0,0])[1];const ha=!Ve&&/Chrome\/(\d+)/.exec(Ht),Oe=!!ha,n1=ha?+ha[1]:0,Ie=!Ve&&!!Ut&&/Apple Computer/.test(Ut.vendor),mr=Ie&&(/Mobile\/\w+/.test(Ht)||!!Ut&&Ut.maxTouchPoints>2),Ye=mr||(Ut?/Mac/.test(Ut.platform):!1),wt=/Android \d/.test(Ht),Jo=!!_f&&"webkitFontSmoothing"in _f.documentElement.style,r1=Jo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Ue=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ma=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Vf=null;const Tt=function(t,e,n){let r=Vf||(Vf=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},yi=function(t,e,n,r){return n&&(Uf(t,e,n,r,-1)||Uf(t,e,n,r,1))},i1=/^(img|br|input|textarea|hr)$/i;function Uf(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:xt(t))){let o=t.parentNode;if(!o||o.nodeType!=1||s1(t)||i1.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ue(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?xt(t):0}else return!1}}function xt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function o1(t,e,n){for(let r=e==0,i=e==xt(t);r||i;){if(t==n)return!0;let o=Ue(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==xt(t)}}function s1(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ga=function(t){let e=t.isCollapsed;return e&&Oe&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function gr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function l1(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Kt(t,e){return typeof t=="number"?t:t[e]}function a1(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Hf(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=ma(s)){if(s.nodeType!=1)continue;let l=s,a=l==o.body,u=a?l1(o):a1(l),c=0,f=0;if(e.top<u.top+Kt(r,"top")?f=-(u.top-e.top+Kt(i,"top")):e.bottom>u.bottom-Kt(r,"bottom")&&(f=e.bottom-u.bottom+Kt(i,"bottom")),e.left<u.left+Kt(r,"left")?c=-(u.left-e.left+Kt(i,"left")):e.right>u.right-Kt(r,"right")&&(c=e.right-u.right+Kt(i,"right")),c||f)if(a)o.defaultView.scrollBy(c,f);else{let d=l.scrollLeft,p=l.scrollTop;f&&(l.scrollTop+=f),c&&(l.scrollLeft+=c);let m=l.scrollLeft-d,y=l.scrollTop-p;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}if(a)break}}function u1(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Wf(t.dom)}}function Wf(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ma(r));return e}function c1({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Kf(n,r==0?0:r-e)}function Kf(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let yr=null;function d1(t){if(t.setActive)return t.setActive();if(yr)return t.focus(yr);let e=Wf(t);t.focus(yr==null?{get preventScroll(){return yr={preventScroll:!0},!0}}:void 0),yr||(yr=!1,Kf(e,0))}function Jf(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top;for(let a=t.firstChild,u=0;a;a=a.nextSibling,u++){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=Tt(a).getClientRects();else continue;for(let f=0;f<c.length;f++){let d=c[f];if(d.top<=s&&d.bottom>=l){s=Math.max(d.bottom,s),l=Math.min(d.top,l);let p=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(p<r){n=a,r=p,i=p&&n.nodeType==3?{left:d.right<e.left?d.right:d.left,top:e.top}:e,a.nodeType==1&&p&&(o=u+(e.left>=(d.left+d.right)/2?1:0));continue}}!n&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(o=u+1)}}return n&&n.nodeType==3?f1(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Jf(n,i)}function f1(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Jt(r,1);if(o.top!=o.bottom&&ya(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function ya(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function p1(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function h1(t,e,n){let{node:r,offset:i}=Jf(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function m1(t,e,n,r){let i=-1;for(let o=e;o!=t.dom;){let s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){let l=s.dom.getBoundingClientRect();if(l.left>r.left||l.top>r.top)i=s.posBefore;else if(l.right<r.left||l.bottom<r.top)i=s.posAfter;else break}o=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,1)}function qf(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(ya(e,u))return qf(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function g1(t,e){let n=t.dom.ownerDocument,r,i=0;if(n.caretPositionFromPoint)try{let a=n.caretPositionFromPoint(e.left,e.top);a&&({offsetNode:r,offset:i}=a)}catch{}if(!r&&n.caretRangeFromPoint){let a=n.caretRangeFromPoint(e.left,e.top);a&&({startContainer:r,startOffset:i}=a)}let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top+1),s;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let a=t.dom.getBoundingClientRect();if(!ya(e,a)||(o=qf(t.dom,e,a),!o))return null}if(Ie)for(let a=o;r&&a;a=ma(a))a.draggable&&(r=void 0);if(o=p1(o,e),r){if(yt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let a=r.childNodes[i],u;a.nodeName=="IMG"&&(u=a.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=m1(t,r,i,e))}s==null&&(s=h1(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function Jt(t,e){let n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}const y1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Yf(t,e,n){let{node:r,offset:i}=t.docView.domFromPos(e,n<0?-1:1),o=Jo||yt;if(r.nodeType==3)if(o&&(y1.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let s=Jt(Tt(r,i,i),n);if(yt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let l=Jt(Tt(r,i-1,i-1),-1);if(l.top==s.top){let a=Jt(Tt(r,i,i+1),-1);if(a.top!=s.top)return wi(a,a.left<l.left)}}return s}else{let s=i,l=i,a=n<0?1:-1;return n<0&&!i?(l++,a=-1):n>=0&&i==r.nodeValue.length?(s--,a=1):n<0?s--:l++,wi(Jt(Tt(r,s,l),a),a<0)}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(n<0||i==xt(r))){let s=r.childNodes[i-1];if(s.nodeType==1)return wa(s.getBoundingClientRect(),!1)}if(i<xt(r)){let s=r.childNodes[i];if(s.nodeType==1)return wa(s.getBoundingClientRect(),!0)}return wa(r.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==xt(r))){let s=r.childNodes[i-1],l=s.nodeType==3?Tt(s,xt(s)-(o?0:1)):s.nodeType==1&&(s.nodeName!="BR"||!s.nextSibling)?s:null;if(l)return wi(Jt(l,1),!1)}if(i<xt(r)){let s=r.childNodes[i];for(;s.pmViewDesc&&s.pmViewDesc.ignoreForCoords;)s=s.nextSibling;let l=s?s.nodeType==3?Tt(s,0,o?0:1):s.nodeType==1?s:null:null;if(l)return wi(Jt(l,-1),!0)}return wi(Jt(r.nodeType==3?Tt(r):r,-n),n>=0)}function wi(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function wa(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Gf(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function w1(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Gf(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.dom;break}o=l.dom.parentNode}let s=Yf(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Tt(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const x1=/[\u0590-\u08ac]/;function v1(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return!x1.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:Gf(t,e,()=>{let a=l.getRangeAt(0),u=l.focusNode,c=l.focusOffset,f=l.caretBidiLevel;l.modify("move",n,"character");let p=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(l.focusNode.nodeType==1?l.focusNode:l.focusNode.parentNode)||u==l.focusNode&&c==l.focusOffset;return l.removeAllRanges(),l.addRange(a),f!=null&&(l.caretBidiLevel=f),p})}let Qf=null,Xf=null,Zf=!1;function k1(t,e,n){return Qf==e&&Xf==n?Zf:(Qf=e,Xf=n,Zf=n=="up"||n=="down"?w1(t,e,n):v1(t,e,n))}const ut=0,ep=1,wr=2,vt=3;class xi{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ut,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ue(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof rp){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof tp&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Ue(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Ue(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=s;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Ue(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Ue(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],y=p+m.size;if(o>p&&s<y)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=y}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.getSelection(),c=!1;if((yt||Ie)&&e==n){let{node:d,offset:p}=l;if(d.nodeType==3){if(c=!!(p&&d.nodeValue[p-1]==`
`),c&&p==d.nodeValue.length)for(let m=d,y;m;m=m.parentNode){if(y=m.nextSibling){y.nodeName=="BR"&&(l=a={node:y.parentNode,offset:Ue(y)+1});break}let h=m.pmViewDesc;if(h&&h.node&&h.node.isBlock)break}}else{let m=d.childNodes[p-1];c=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(yt&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&Ie)&&yi(l.node,l.offset,u.anchorNode,u.anchorOffset)&&yi(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==n)&&!c){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch(d){if(!(d instanceof DOMException))throw d}}if(!f){if(e>n){let p=l;l=a,a=p}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?wr:ep,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=vt:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?wr:vt}r=s}this.dirty=wr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?wr:ep;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class tp extends xi{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ut&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class b1 extends xi{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Mn extends xi{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=mt.renderSpec(document,n.type.spec.toDOM(n,r))),new Mn(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&vt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=vt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ut){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ut}}slice(e,n,r){let i=Mn.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=ka(o,n,s,r)),e>0&&(o=ka(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}}class Tn extends xi{constructor(e,n,r,i,o,s,l,a,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l,s&&this.updateChildren(a,u)}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,u=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=mt.renderSpec(document,n.type.spec.toDOM(n)));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let d=c;return c=sp(c,r,n),u?a=new D1(e,n,r,i,c,f||null,d,u,o,s+1):n.isText?new qo(e,n,r,i,c,d,o):new Tn(e,n,r,i,c,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>S.empty)}return e}matchesNode(e,n,r){return this.dirty==ut&&e.eq(this.node)&&va(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new E1(this,s&&s.node);N1(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&a.syncToMarks(c==this.node.childCount?G.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,f,d)=>{a.syncToMarks(u.marks,r,e);let p;a.findNodeMatch(u,c,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,f,p,e)||a.updateNextNode(u,c,f,e,d)||a.addNode(u,c,f,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==wr)&&(s&&this.protectLocalComposition(e,s),ip(this.contentDOM,this.children,e),mr&&M1(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof U)||r<n||i>n+this.node.content.size)return null;let o=e.domSelection(),s=T1(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,a=O1(this.node.content,l,r-n,i-n);return a<0?null:{node:s,pos:a,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new b1(this,o,n,i);e.input.compositionNodes.push(s),this.children=ka(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==vt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ut}updateOuterDeco(e){if(va(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=op(this.dom,this.nodeDOM,xa(this.outerDeco,this.node,n),xa(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function np(t,e,n,r,i){return sp(r,e,t),new Tn(void 0,t,e,n,r,r,r,i,0)}class qo extends Tn{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==vt||this.dirty!=ut&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ut||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ut,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new qo(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=vt)}get domAtom(){return!1}}class rp extends xi{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ut&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class D1 extends Tn{constructor(e,n,r,i,o,s,l,a,u,c){super(e,n,r,i,o,s,l,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==vt)return!1;if(this.spec.update){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ip(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=lp(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof Mn){let a=r?r.previousSibling:t.lastChild;ip(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=lp(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const vi=function(t){t&&(this.nodeName=t)};vi.prototype=Object.create(null);const On=[new vi];function xa(t,e,n){if(t.length==0)return On;let r=n?On[0]:new vi,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new vi(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new vi(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function op(t,e,n,r){if(n==On&&r==On)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=On[0]),i=a}C1(i,l||On[0],s)}return i}function C1(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function sp(t,e,n){return op(t,t,On,xa(e,n,t.nodeType!=1))}function va(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function lp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class E1{constructor(e,n){this.lock=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=S1(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ut,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){l=a;break}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Mn.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==vt&&s.dom==s.contentDOM&&(s.dirty=wr),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index=i+1,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof Tn){let a=this.preMatch.matched.get(l);if(a!=null&&a!=o)return!1;let u=l.dom;if(!(this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=vt&&va(n,l.outerDeco)))&&l.update(e,n,r,i))return this.destroyBetween(this.index,s),l.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,n,r,i,o){this.top.children.splice(this.index++,0,Tn.create(this.top,e,n,r,i,o)),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new tp(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Mn;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof qo)||/\n$/.test(e.node.text))&&((Ie||Oe)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new rp(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}}function S1(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof Mn)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function A1(t,e){return t.type.side-e.type.side}function N1(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){if(s<i.length&&i[s].to==o){let m=i[s++],y;for(;s<i.length&&i[s].to==o;)(y||(y=[m])).push(i[s++]);if(y){y.sort(A1);for(let h=0;h<y.length;h++)n(y[h],u,!!a)}else n(m,u,!!a)}let c,f;if(a)f=-1,c=a,a=null;else if(u<t.childCount)f=u,c=t.child(u++);else break;for(let m=0;m<l.length;m++)l[m].to<=o&&l.splice(m--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let d=o+c.nodeSize;if(c.isText){let m=d;s<i.length&&i[s].from<m&&(m=i[s].from);for(let y=0;y<l.length;y++)l[y].to<m&&(m=l[y].to);m<d&&(a=c.cut(m-o),c=c.cut(0,m-o),d=m,f=-1)}let p=c.isInline&&!c.isLeaf?l.filter(m=>!m.inline):l.slice();r(c,p,e.forChild(o,c),f),o=d}}function M1(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function T1(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=xt(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function O1(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=n){let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function ka(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],u=l,c=l+=a.size;u>=n||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(a.slice(n-u,a.size,r)))}return o}function ap(t,e=null){let n=t.domSelection(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(ga(n)){for(a=l;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&L.isSelectable(c)&&i.parent&&!(c.isInline&&o1(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new L(s==f?l:r.resolve(f))}}else{let c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;a=r.resolve(c)}if(!u){let c=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;u=Da(t,a,l,c)}return u}function up(t){return t.editable?t.hasFocus():gp(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qt(t,e=!1){let n=t.state.selection;if(pp(t,n),!!up(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Oe){let r=t.domSelection(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&yi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)P1(t);else{let{anchor:r,head:i}=n,o,s;cp&&!(n instanceof U)&&(n.$from.parent.inlineContent||(o=dp(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=dp(t,n.to))),t.docView.setSelection(r,i,t.root,e),cp&&(o&&fp(o),s&&fp(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&F1(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const cp=Ie||Oe&&n1<63;function dp(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Ie&&i&&i.contentEditable=="false")return ba(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return ba(i);if(o)return ba(o)}}function ba(t){return t.contentEditable="true",Ie&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function fp(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function F1(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelection(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!up(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function P1(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,Ue(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Ve&&Wt<=11&&(r.disabled=!0,r.disabled=!1)}function pp(t,e){if(e instanceof L){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(hp(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else hp(t)}function hp(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Da(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||U.between(e,n,r)}function mp(t){return t.editable&&t.root.activeElement!=t.dom?!1:gp(t)}function gp(t){let e=t.domSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function R1(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelection();return yi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Ca(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&z.findFrom(o,e)}function Fn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function yp(t,e,n){let r=t.state.selection;if(r instanceof U){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let i=Ca(t.state,e);return i&&i instanceof L?Fn(t,i):!1}else if(!(Ye&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?L.isSelectable(o)?Fn(t,new L(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Jo?Fn(t,new U(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else{if(r instanceof L&&r.node.isInline)return Fn(t,new U(e>0?r.$to:r.$from));{let i=Ca(t.state,e);return i?Fn(t,i):!1}}}function Yo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ki(t){let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function Ea(t){let e=t.domSelection(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(yt&&n.nodeType==1&&r<Yo(n)&&ki(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(ki(l))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(wp(n))break;{let l=n.previousSibling;for(;l&&ki(l);)i=n.parentNode,o=Ue(l),l=l.previousSibling;if(l)n=l,r=Yo(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Aa(t,e,n,r):i&&Aa(t,e,i,o)}function Sa(t){let e=t.domSelection(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Yo(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(ki(l))o=n,s=++r;else break}else{if(wp(n))break;{let l=n.nextSibling;for(;l&&ki(l);)o=l.parentNode,s=Ue(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Yo(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Aa(t,e,o,s)}function wp(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Aa(t,e,n,r){if(ga(e)){let o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&qt(t)},50)}function xp(t,e,n){let r=t.state.selection;if(r instanceof U&&!r.empty||n.indexOf("s")>-1||Ye&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Ca(t.state,e);if(s&&s instanceof L)return Fn(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof at?z.near(s,e):z.findFrom(s,e);return l?Fn(t,l):!1}return!1}function vp(t,e){if(!(t.state.selection instanceof U))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function kp(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function B1(t){if(!Ie||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelection();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;kp(t,r,"true"),setTimeout(()=>kp(t,r,"false"),20)}return!1}function I1(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function j1(t,e){let n=e.keyCode,r=I1(e);return n==8||Ye&&n==72&&r=="c"?vp(t,-1)||Ea(t):n==46||Ye&&n==68&&r=="c"?vp(t,1)||Sa(t):n==13||n==27?!0:n==37||Ye&&n==66&&r=="c"?yp(t,-1,r)||Ea(t):n==39||Ye&&n==70&&r=="c"?yp(t,1,r)||Sa(t):n==38||Ye&&n==80&&r=="c"?xp(t,-1,r)||Ea(t):n==40||Ye&&n==78&&r=="c"?B1(t)||xp(t,1,r)||Sa(t):r==(Ye?"m":"c")&&(n==66||n==73||n==89||n==90)}function bp(t,e){let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||mt.fromSchema(t.state.schema),l=Tp(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=Np[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let m=l.createElement(c[p]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),f++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",p=>p(e))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d}}function Dp(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,o||r)}),o)return e?new F(S.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):F.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,r));if(f)l=f;else{let d=i.marks(),{schema:p}=t.state,m=mt.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let h=s.appendChild(document.createElement("p"));y&&h.appendChild(m.serializeNode(p.text(y,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n)}),s=_1(n),Jo&&$1(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0&&s.firstChild;f--)s=s.firstChild;if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||lr.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!L1.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)l=V1(Ap(l,+c[1],+c[2]),c[4]);else if(l=F.maxOpen(z1(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let p=l.content.firstChild;f<l.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=l.content.lastChild;d<l.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);l=Ap(l,f,d)}return t.someProp("transformPasted",f=>{l=f(l)}),l}const L1=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function z1(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&Ep(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=Sp(s[s.length-1],o.length));let c=Cp(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return S.from(s)}return t}function Cp(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,S.from(t));return t}function Ep(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=Ep(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(S.from(Cp(n,t,i+1))))}}function Sp(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Sp(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(S.empty,!0);return t.copy(n.append(r))}function Na(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return i<r-1&&(l=Na(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,t.childCount>1||o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(S.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Ap(t,e,n){return e<t.openStart&&(t=new F(Na(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new F(Na(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Np={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Mp=null;function Tp(){return Mp||(Mp=document.implementation.createHTMLDocument("title"))}function _1(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Tp().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Np[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function $1(t){let e=t.querySelectorAll(Oe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function V1(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=S.from(a.create(r[l+1],i)),o++,s++}return new F(i,o,s)}const je={};let Fe={};class U1{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function H1(t){for(let e in je){let n=je[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{K1(t,r)&&!Ta(t,r)&&(t.editable||!(r.type in Fe))&&n(t,r)})}Ie&&t.dom.addEventListener("input",()=>null),Ma(t)}function Pn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function W1(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ma(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Ta(t,r))})}function Ta(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function K1(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function J1(t,e){!Ta(t,e)&&je[e.type]&&(t.editable||!(e.type in Fe))&&je[e.type](t,e)}Fe.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Fp(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(wt&&Oe&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),mr&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,gr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||j1(t,n)?n.preventDefault():Pn(t,"key")},Fe.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)},Fe.keypress=(t,e)=>{let n=e;if(Fp(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ye&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof U)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Go(t){return{left:t.clientX,top:t.clientY}}function q1(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Oa(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function xr(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function Y1(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&L.isSelectable(r)?(xr(t,new L(n),"pointer"),!0):!1}function G1(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof L&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(L.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(xr(t,L.create(t.state.doc,i),"pointer"),!0):!1}function Q1(t,e,n,r,i){return Oa(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?G1(t,n):Y1(t,n))}function X1(t,e,n,r){return Oa(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Z1(t,e,n,r){return Oa(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||ew(t,n,r)}function ew(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(xr(t,U.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)xr(t,U.create(r,l+1,l+1+s.content.size),"pointer");else if(L.isSelectable(s))xr(t,L.create(r,l),"pointer");else continue;return!0}}function Fa(t){return Qo(t)}const Op=Ye?"metaKey":"ctrlKey";je.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Fa(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&q1(n,t.input.lastClick)&&!n[Op]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Go(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new tw(t,s,n,!!r)):(o=="doubleClick"?X1:Z1)(t,s.pos,s.inside,n)?n.preventDefault():Pn(t,"pointer"))};class tw{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Op],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof L&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&yt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Go(e))),this.allowDefault||!n?Pn(this.view,"pointer"):Q1(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ie&&this.mightDrag&&!this.mightDrag.node.isAtom||Oe&&!(this.view.state.selection instanceof U)&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(xr(this.view,z.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Pn(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Pn(this.view,"pointer"),e.buttons==0&&this.done()}}je.touchdown=t=>{Fa(t),Pn(t,"pointer")},je.contextmenu=t=>Fa(t);function Fp(t,e){return t.composing?!0:Ie&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const nw=wt?5e3:-1;Fe.compositionstart=Fe.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Qo(t,!0),t.markCursor=null;else if(Qo(t),yt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelection();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){r.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}Pp(t,nw)},Fe.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,Pp(t,20))};function Pp(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Qo(t),e))}function Rp(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=rw());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function rw(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Qo(t,e=!1){if(!(wt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Rp(t),e||t.docView&&t.docView.dirty){let n=ap(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function iw(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const vr=Ve&&Wt<15||mr&&r1<604;je.copy=Fe.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=vr?null:n.clipboardData,s=r.content(),{dom:l,text:a}=bp(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):iw(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ow(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function sw(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Pa(t,r.value,null,e):Pa(t,r.textContent,r.innerHTML,e)},50)}function Pa(t,e,n,r){let i=Dp(t,e,n,t.input.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,r,i||F.empty)))return!0;if(!i)return!1;let o=ow(i),s=o?t.state.tr.replaceSelectionWith(o,t.input.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Fe.paste=(t,e)=>{let n=e;if(t.composing&&!wt)return;let r=vr?null:n.clipboardData;r&&Pa(t,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():sw(t,n)};class lw{constructor(e,n){this.slice=e,this.move=n}}const Bp=Ye?"altKey":"ctrlKey";je.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Go(n));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof L?i.to-1:i.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(L.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&t.dispatch(t.state.tr.setSelection(L.create(t.state.doc,u.posBefore)))}}let s=t.state.selection.content(),{dom:l,text:a}=bp(t,s);n.dataTransfer.clearData(),n.dataTransfer.setData(vr?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",vr||n.dataTransfer.setData("text/plain",a),t.dragging=new lw(s,!n[Bp])},je.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)},Fe.dragover=Fe.dragenter=(t,e)=>e.preventDefault(),Fe.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Go(n));if(!i)return;let o=t.state.doc.resolve(i.pos);if(!o)return;let s=r&&r.slice;s?t.someProp("transformPasted",m=>{s=m(s)}):s=Dp(t,n.dataTransfer.getData(vr?"Text":"text/plain"),vr?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[Bp]);if(t.someProp("handleDrop",m=>m(t,n,s||F.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?Wy(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=t.state.tr;l&&u.deleteSelection();let c=u.mapping.map(a),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let p=u.doc.resolve(c);if(f&&L.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new L(p));else{let m=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((y,h,g,x)=>m=x),u.setSelection(Da(t,p,u.doc.resolve(m)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))},je.focus=t=>{t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelection())&&qt(t)},20))},je.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},je.beforeinput=(t,e)=>{if(Oe&&wt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,gr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Fe)je[t]=Fe[t];function bi(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ra{constructor(e,n){this.toDOM=e,this.spec=n||Rn,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Ge(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ra&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bi(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Yt{constructor(e,n){this.attrs=e,this.spec=n||Rn}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Ge(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Yt&&bi(this.attrs,e.attrs)&&bi(this.spec,e.spec)}static is(e){return e.type instanceof Yt}destroy(){}}class Ba{constructor(e,n){this.attrs=e,this.spec=n||Rn}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Ge(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Ba&&bi(this.attrs,e.attrs)&&bi(this.spec,e.spec)}destroy(){}}class Ge{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Ge(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Ge(e,e,new Ra(n,r))}static inline(e,n,r,i){return new Ge(e,n,new Yt(r,i))}static node(e,n,r,i){return new Ge(e,n,new Ba(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yt}}const kr=[],Rn={};class ye{constructor(e,n){this.local=e.length?e:kr,this.children=n.length?n:kr}static create(e,n){return n.length?Xo(n,e,0,Rn):Ce}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==Ce||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Rn)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?aw(this.children,s||[],e,n,r,i,o):s?new ye(s.sort(Bn),kr):Ce}add(e,n){return n.length?this==Ce?ye.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=jp(n,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,Xo(c,l,u+1,Rn)),o+=3}});let s=Ip(o?Lp(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new ye(s.length?this.local.concat(s).sort(Bn):this.local,i||this.children)}remove(e){return e.length==0||this==Ce?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>l&&f.to<a&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=Ce?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ye(i,r):Ce}forChild(e,n){if(this==Ce)return this;if(n.isLeaf)return ye.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Yt){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new ye(i.sort(Bn),kr);return r?new Gt([l,r]):l}return r||Ce}eq(e){if(this==e)return!0;if(!(e instanceof ye)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ia(this.localsInner(e))}localsInner(e){if(this==Ce)return kr;if(e.inlineContent||!this.local.some(Yt.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Yt||n.push(this.local[r]);return n}}ye.empty=new ye([],[]),ye.removeOverlap=Ia;const Ce=ye.empty;class Gt{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Rn));return Gt.from(r)}forChild(e,n){if(n.isLeaf)return ye.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Ce&&(o instanceof Gt?r=r.concat(o.members):r.push(o))}return Gt.from(r)}eq(e){if(!(e instanceof Gt)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Ia(r?n:n.sort(Bn)):kr}static from(e){switch(e.length){case 0:return Ce;case 1:return e[0];default:return new Gt(e)}}}function aw(t,e,n,r,i,o,s){let l=t.slice(),a=(c,f,d,p)=>{for(let m=0;m<l.length;m+=3){let y=l[m+1],h;if(y<0||c>y+o)continue;let g=l[m]+o;f>=g?l[m+1]=c<=g?-2:-1:d>=i&&(h=p-d-(f-c))&&(l[m]+=h,l[m+1]+=h)}};for(let c=0;c<n.maps.length;c++)n.maps[c].forEach(a);let u=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){u=!0,l[c+1]=-1;continue}let f=n.map(t[c]+o),d=f-i;if(d<0||d>=r.content.size){u=!0;continue}let p=n.map(t[c+1]+o,-1),m=p-i,{index:y,offset:h}=r.content.findIndex(d),g=r.maybeChild(y);if(g&&h==d&&h+g.nodeSize==m){let x=l[c+2].mapInner(n,g,f+1,t[c]+o+1,s);x!=Ce?(l[c]=d,l[c+1]=m,l[c+2]=x):(l[c+1]=-2,u=!0)}else u=!0}if(u){let c=uw(l,t,e,n,i,o,s),f=Xo(c,r,0,s);e=f.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,p=0;d<f.children.length;d+=3){let m=f.children[d];for(;p<l.length&&l[p]<m;)p+=3;l.splice(p,0,f.children[d],f.children[d+1],f.children[d+2])}}return new ye(e.sort(Bn),l)}function Ip(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Ge(i.from+e,i.to+e,i.type))}return n}function uw(t,e,n,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let f=a.local[c].map(r,i,u);f?n.push(f):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function jp(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Lp(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Xo(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let u=jp(t,l,a+n);if(u){o=!0;let c=Xo(u,l,n+a+1,r);c!=Ce&&i.push(a,a+l.nodeSize,c)}});let s=Ip(o?Lp(t):t,-n).sort(Bn);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new ye(s,i):Ce}function Bn(t,e){return t.from-e.from||t.to-e.to}function Ia(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),zp(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),zp(e,i,r.copy(o.from,r.to)));break}}}return e}function zp(t,e,n){for(;e<t.length&&Bn(n,t[e])>0;)e++;t.splice(e,0,n)}function ja(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ce&&e.push(r)}),t.cursorWrapper&&e.push(ye.create(t.state.doc,[t.cursorWrapper.deco])),Gt.from(e)}const cw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dw=Ve&&Wt<=11;class fw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pw{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ve&&Wt<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),dw&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&this.observer.observe(this.view.dom,cw),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(mp(this.view)){if(this.suppressingSelectionUpdates)return qt(this.view);if(Ve&&Wt<=11&&!this.view.state.selection.empty){let e=this.view.domSelection();if(e.focusNode&&yi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){if(e.rangeCount==0)return!0;let n=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let n=this.view.domSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&mp(this.view)&&!this.ignoreSelectionChange(n),i=-1,o=-1,s=!1,l=[];if(this.view.editable)for(let a=0;a<e.length;a++){let u=this.registerMutation(e[a],l);u&&(i=i<0?u.from:Math.min(u.from,i),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(s=!0))}if(yt&&l.length>1){let a=l.filter(u=>u.nodeName=="BR");if(a.length==2){let u=a[0],c=a[1];u.parentNode&&u.parentNode.parentNode==c.parentNode?c.remove():u.remove()}}(i>-1||r)&&(i>-1&&(this.view.docView.markDirty(i,o),hw(this.view)),this.handleDOMChange(i,o,s,l),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(n)||qt(this.view),this.currentSelection.set(n))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)n.push(e.addedNodes[c]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Ve&&Wt<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?Ue(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Ue(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let _p=!1;function hw(t){_p||(_p=!0,getComputedStyle(t.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}function mw(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelection(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],ga(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Oe&&t.input.lastKeyCode===8)for(let h=o;h>i;h--){let g=r.childNodes[h-1],x=g.pmViewDesc;if(g.nodeName=="BR"&&!x){o=h;break}if(!x||x.size)break}let f=t.state.doc,d=t.someProp("domParser")||lr.fromSchema(t.state.schema),p=f.resolve(s),m=null,y=d.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:gw,context:p});if(u&&u[0].pos!=null){let h=u[0].pos,g=u[1]&&u[1].pos;g==null&&(g=h),m={anchor:h+s,head:g+s}}return{doc:y,sel:m,from:s,to:l}}function gw(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ie&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ie&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}function yw(t,e,n,r,i){if(e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,M=ap(t,C);if(M&&!t.state.selection.eq(M)){let J=t.state.tr.setSelection(M);C=="pointer"?J.setMeta("pointer",!0):C=="key"&&J.scrollIntoView(),t.dispatch(J)}return}let o=t.state.doc.resolve(e),s=o.sharedDepth(n);e=o.before(s+1),n=t.state.doc.resolve(n).after(s+1);let l=t.state.selection,a=mw(t,e,n);if(Oe&&t.cursorWrapper&&a.sel&&a.sel.anchor==t.cursorWrapper.deco.from){let C=t.cursorWrapper.deco.type.toDOM.nextSibling,M=C&&C.nodeValue?C.nodeValue.length:1;a.sel={anchor:a.sel.anchor+M,head:a.sel.anchor+M}}let u=t.state.doc,c=u.slice(a.from,a.to),f,d;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,d="end"):(f=t.state.selection.from,d="start"),t.input.lastKeyCode=null;let p=vw(c.content,a.doc.content,a.from,f,d);if((mr&&t.input.lastIOSEnter>Date.now()-225||wt)&&i.some(C=>C.nodeName=="DIV"||C.nodeName=="P")&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",C=>C(t,gr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof U&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(a.sel&&a.sel.anchor!=a.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(a.sel){let C=$p(t,t.state.doc,a.sel);C&&!C.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(C))}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof U&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=a.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=a.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Ve&&Wt<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>a.from&&a.doc.textBetween(p.start-a.from-1,p.start-a.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=a.doc.resolveNoCache(p.start-a.from),y=a.doc.resolveNoCache(p.endB-a.from),h=u.resolve(p.start),g=m.sameParent(y)&&m.parent.inlineContent&&h.end()>=p.endA,x;if((mr&&t.input.lastIOSEnter>Date.now()-225&&(!g||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!g&&m.pos<a.doc.content.size&&(x=z.findFrom(a.doc.resolve(m.pos+1),1,!0))&&x.head==y.pos)&&t.someProp("handleKeyDown",C=>C(t,gr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&xw(u,p.start,p.endA,m,y)&&t.someProp("handleKeyDown",C=>C(t,gr(8,"Backspace")))){wt&&Oe&&t.domObserver.suppressSelectionUpdates();return}Oe&&wt&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),wt&&!g&&m.start()!=y.start()&&y.parentOffset==0&&m.depth==y.depth&&a.sel&&a.sel.anchor==a.sel.head&&a.sel.head==p.endA&&(p.endB-=2,y=a.doc.resolveNoCache(p.endB-a.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,gr(13,"Enter"))})},20));let k=p.start,v=p.endA,E,D,N;if(g){if(m.pos==y.pos)Ve&&Wt<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qt(t),20)),E=t.state.tr.delete(k,v),D=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(N=ww(m.parent.content.cut(m.parentOffset,y.parentOffset),h.parent.content.cut(h.parentOffset,p.endA-h.start()))))E=t.state.tr,N.type=="add"?E.addMark(k,v,N.mark):E.removeMark(k,v,N.mark);else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",M=>M(t,k,v,C)))return;E=t.state.tr.insertText(C,k,v)}}if(E||(E=t.state.tr.replace(k,v,a.doc.slice(p.start-a.from,p.endB-a.from))),a.sel){let C=$p(t,E.doc,a.sel);C&&!(Oe&&wt&&t.composing&&C.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(C.head==k||C.head==E.mapping.map(v)-1)||Ve&&C.empty&&C.head==k)&&E.setSelection(C)}D&&E.ensureMarks(D),t.dispatch(E.scrollIntoView())}function $p(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Da(t,e.resolve(n.anchor),e.resolve(n.head))}function ww(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(S.from(u).eq(t))return{mark:l,type:s}}function xw(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||La(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(La(o,!0,!0));return!s.parent.isTextblock||s.pos>n||La(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function La(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function vw(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}class kw{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new U1,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Kp),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Hp(this),Up(this),this.nodeViews=Wp(this),this.docView=np(this.state.doc,Vp(this),ja(this),this.dom,this),this.domObserver=new pw(this,(r,i,o,s)=>yw(this,r,i,o,s)),this.domObserver.start(),H1(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ma(this),this._props=e,e.plugins&&(e.plugins.forEach(Kp),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,n){let r=this.state,i=!1,o=!1;if(e.storedMarks&&this.composing&&(Rp(this),o=!0),this.state=e,n){let f=Wp(this);Dw(f,this.nodeViews)&&(this.nodeViews=f,i=!0),Ma(this)}this.editable=Hp(this),Up(this);let s=ja(this),l=Vp(this),a=n?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,l,s);(u||!e.selection.eq(r.selection))&&(o=!0);let c=a=="preserve"&&o&&this.dom.style.overflowAnchor==null&&u1(this);if(o){this.domObserver.stop();let f=u&&(Ve||Oe)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&bw(r.selection,e.selection);if(u){let d=Oe?this.trackWrites=this.domSelection().focusNode:null;(i||!this.docView.update(e.doc,l,s,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=np(e.doc,l,s,this.dom,this)),d&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&R1(this))?qt(this,f):(pp(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),a=="reset")this.dom.scrollTop=0;else if(a=="to selection"){let f=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",d=>d(this)))if(e.selection instanceof L){let d=this.docView.domAfterPos(e.selection.from);d.nodeType==1&&Hf(this,d.getBoundingClientRect(),f)}else Hf(this,this.coordsAtPos(e.selection.head,1),f)}else c&&c1(c)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&d1(this.dom),qt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return g1(this,e)}coordsAtPos(e,n=1){return Yf(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return k1(this,n||this.state,e)}destroy(){this.docView&&(W1(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ja(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return J1(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function Vp(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"&&(e.class+=" "+n[r]),r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),[Ge.node(0,t.state.doc.content.size,e)]}function Up(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ge.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Hp(t){return!t.someProp("editable",e=>e(t.state)===!1)}function bw(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Wp(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Dw(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Kp(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Qt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Cw=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ew=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),we=0;we<10;we++)Qt[48+we]=Qt[96+we]=String(we);for(var we=1;we<=24;we++)Qt[we+111]="F"+we;for(var we=65;we<=90;we++)Qt[we]=String.fromCharCode(we+32),Zo[we]=String.fromCharCode(we);for(var za in Qt)Zo.hasOwnProperty(za)||(Zo[za]=Qt[za]);function Sw(t){var e=Cw&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ew&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Zo:Qt)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Aw=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Nw(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Aw?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Mw(t){let e=Object.create(null);for(let n in t)e[Nw(n)]=t[n];return e}function _a(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}function Tw(t){return new qe({props:{handleKeyDown:Ow(t)}})}function Ow(t){let e=Mw(t);return function(n,r){let i=Sw(r),o=i.length==1&&i!=" ",s,l=e[_a(i,r,!o)];if(l&&l(n.state,n.dispatch,n))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Qt[r.keyCode])&&s!=i){let a=e[_a(s,r,!0)];if(a&&a(n.state,n.dispatch,n))return!0}else if(o&&r.shiftKey){let a=e[_a(i,r,!0)];if(a&&a(n.state,n.dispatch,n))return!0}return!1}}const Fw=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0),Pw=(t,e,n)=>{let{$cursor:r}=t.selection;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;let i=Jp(r);if(!i){let s=r.blockRange(),l=s&&ur(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&Gp(t,i,e))return!0;if(r.parent.content.size==0&&(br(o,"end")||L.isSelectable(o))){let s=oa(t.doc,r.before(),r.after(),F.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(br(o,"end")?z.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):L.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function br(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Rw=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Jp(r)}let s=o&&o.nodeBefore;return!s||!L.isSelectable(s)?!1:(e&&e(t.tr.setSelection(L.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Jp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}const Bw=(t,e,n)=>{let{$cursor:r}=t.selection;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;let i=qp(r);if(!i)return!1;let o=i.nodeAfter;if(Gp(t,i,e))return!0;if(r.parent.content.size==0&&(br(o,"start")||L.isSelectable(o))){let s=oa(t.doc,r.before(),r.after(),F.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(br(o,"start")?z.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):L.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Iw=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=qp(r)}let s=o&&o.nodeAfter;return!s||!L.isSelectable(s)?!1:(e&&e(t.tr.setSelection(L.create(t.doc,o.pos)).scrollIntoView()),!0)};function qp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const jw=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ur(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Lw=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Yp(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const zw=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Yp(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(z.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},_w=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof at||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Yp(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(U.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},$w=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(cr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ur(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Vw=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(L.create(t.doc,i))),!0)};function Uw(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||pi(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Gp(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Uw(t,e,n))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=S.empty;for(let y=o.length-1;y>=0;y--)d=S.from(o[y].create(null,d));d=S.from(r.copy(d));let p=t.tr.step(new ue(e.pos-1,f,e.pos,f,new F(d,1,0),o.length,!0)),m=f+2*o.length;pi(p.doc,m)&&p.join(m),n(p.scrollIntoView())}return!0}let a=z.findFrom(e,1),u=a&&a.$from.blockRange(a.$to),c=u&&ur(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(l&&br(i,"start",!0)&&br(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let p=i,m=1;for(;!p.isTextblock;p=p.firstChild)m++;if(f.canReplace(f.childCount,f.childCount,p.content)){if(n){let y=S.empty;for(let g=d.length-1;g>=0;g--)y=S.from(d[g].copy(y));let h=t.tr.step(new ue(e.pos-d.length,e.pos+i.nodeSize,e.pos+m,e.pos+i.nodeSize-m,new F(y,d.length,0),0,!0));n(h.scrollIntoView())}return!0}}return!1}function Qp(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(U.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const Hw=Qp(-1),Ww=Qp(1);function Kw(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&ia(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Xp(t,e=null){return function(n,r){let{from:i,to:o}=n.selection,s=!1;return n.doc.nodesBetween(i,o,(l,a)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let u=n.doc.resolve(a),c=u.index();s=u.parent.canReplaceWith(c,c+1,t)}}),s?(r&&r(n.tr.setBlockType(i,o,t,e).scrollIntoView()),!0):!1}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Jw(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=!1,a=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);a=new Lo(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new Lo(i,n.doc.resolve(o.end(s.depth)),s.depth)),l=!0}let u=ia(a,t,e,s);return u?(r&&r(qw(n.tr,s,u,l,t).scrollIntoView()),!0):!1}}function qw(t,e,n,r,i){let o=S.empty;for(let c=n.length-1;c>=0;c--)o=S.from(n[c].type.create(n[c].attrs,o));t.step(new ue(e.start-(r?2:0),e.end,e.start,e.end,new F(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let l=n.length-s,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&cr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function Yw(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Gw(e,n,t,o):Qw(e,n,o):!0:!1}}function Gw(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);return o<s&&(i.step(new ue(o-1,s,o,s,new F(S.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Lo(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth)),e(i.lift(r,ur(r)).scrollIntoView()),!0}function Qw(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)p-=i.child(m).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?S.empty:S.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new ue(f-(l?1:0),d+(a?1:0),f+1,d-1,new F((l?S.empty:S.from(i.copy(S.empty))).append(a?S.empty:S.from(i.copy(S.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Xw(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=S.from(u?t.create():null),f=new F(S.from(t.create(null,S.from(l.type.create(null,c)))),u?3:1,0),d=o.start,p=o.end;n(e.tr.step(new ue(d-(u?3:1),p,d,p,f,1,!0)).scrollIntoView())}return!0}}function es(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class ts{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const f=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,p])=>[d,(...y)=>{const h=this.buildProps(u,n),g=p(...y)(h);return l.push(g),f}])),run:c};return f}createCan(e){const{rawCommands:n,state:r}=this,i=void 0,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:i})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i;o.storedMarks&&e.setStoredMarks(o.storedMarks);const l={tr:e,editor:i,view:s,state:es({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class Zw{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function R(t,e,n){return t.config[e]===void 0&&t.parent?R(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?R(t.parent,e,n):null}):t.config[e]}function ns(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Zp(t){const e=[],{nodeExtensions:n,markExtensions:r}=ns(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=R(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,p])=>{e.push({type:f,name:d,attribute:{...o,...p}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=R(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,f])=>{const d={...o,...f};f.isRequired&&f.default===void 0&&delete d.default,e.push({type:s.name,name:c,attribute:d})})}),e}function ce(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Di(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}i==="class"?r[i]=[r[i],o].join(" "):i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function $a(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Di(n,r),{})}function eh(t){return typeof t=="function"}function V(t,e=void 0,...n){return eh(t)?e?t.bind(e)(...n):t(...n):t}function ex(t={}){return Object.keys(t).length===0&&t.constructor===Object}function tx(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function th(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):tx(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function nh(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&ex(n)?!1:n!=null))}function nx(t){var e;const n=Zp(t),{nodeExtensions:r,markExtensions:i}=ns(t),o=(e=r.find(a=>R(a,"topNode")))===null||e===void 0?void 0:e.name,s=Object.fromEntries(r.map(a=>{const u=n.filter(h=>h.type===a.name),c={name:a.name,options:a.options,storage:a.storage},f=t.reduce((h,g)=>{const x=R(g,"extendNodeSchema",c);return{...h,...x?x(a):{}}},{}),d=nh({...f,content:V(R(a,"content",c)),marks:V(R(a,"marks",c)),group:V(R(a,"group",c)),inline:V(R(a,"inline",c)),atom:V(R(a,"atom",c)),selectable:V(R(a,"selectable",c)),draggable:V(R(a,"draggable",c)),code:V(R(a,"code",c)),defining:V(R(a,"defining",c)),isolating:V(R(a,"isolating",c)),attrs:Object.fromEntries(u.map(h=>{var g;return[h.name,{default:(g=h==null?void 0:h.attribute)===null||g===void 0?void 0:g.default}]}))}),p=V(R(a,"parseHTML",c));p&&(d.parseDOM=p.map(h=>th(h,u)));const m=R(a,"renderHTML",c);m&&(d.toDOM=h=>m({node:h,HTMLAttributes:$a(h,u)}));const y=R(a,"renderText",c);return y&&(d.toText=y),[a.name,d]})),l=Object.fromEntries(i.map(a=>{const u=n.filter(y=>y.type===a.name),c={name:a.name,options:a.options,storage:a.storage},f=t.reduce((y,h)=>{const g=R(h,"extendMarkSchema",c);return{...y,...g?g(a):{}}},{}),d=nh({...f,inclusive:V(R(a,"inclusive",c)),excludes:V(R(a,"excludes",c)),group:V(R(a,"group",c)),spanning:V(R(a,"spanning",c)),code:V(R(a,"code",c)),attrs:Object.fromEntries(u.map(y=>{var h;return[y.name,{default:(h=y==null?void 0:y.attribute)===null||h===void 0?void 0:h.default}]}))}),p=V(R(a,"parseHTML",c));p&&(d.parseDOM=p.map(y=>th(y,u)));const m=R(a,"renderHTML",c);return m&&(d.toDOM=y=>m({mark:y,HTMLAttributes:$a(y,u)})),[a.name,d]}));return new ky({topNode:o,nodes:s,marks:l})}function Va(t,e){return e.nodes[t]||e.marks[t]||null}function rh(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const rx=(t,e=500)=>{let n="";return t.parent.nodesBetween(Math.max(0,t.parentOffset-e),t.parentOffset,(r,i,o,s)=>{var l,a,u;n+=((a=(l=r.type.spec).toText)===null||a===void 0?void 0:a.call(l,{node:r,pos:i,parent:o,index:s}))||((u=t.nodeBefore)===null||u===void 0?void 0:u.text)||"%leaf%"}),n};function Ua(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class ix{constructor(e){this.find=e.find,this.handler=e.handler}}const ox=(t,e)=>{if(Ua(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[];return r.push(n.text),r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ha(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=rx(u)+o;return s.forEach(d=>{if(c)return;const p=ox(f,d.find);if(!p)return;const m=a.state.tr,y=es({state:a.state,transaction:m}),h={from:r-(p[0].length-o.length),to:i},{commands:g,chain:x,can:k}=new ts({editor:n,state:y});d.handler({state:y,range:h,match:p,commands:g,chain:x,can:k})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:i,text:o}),a.dispatch(m),c=!0)}),c}function sx(t){const{editor:e,rules:n}=t,r=new qe({state:{init(){return null},apply(i,o){const s=i.getMeta(r);return s||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,s,l){return Ha({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Ha({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Ha({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function lx(t){return typeof t=="number"}class ax{constructor(e){this.find=e.find,this.handler=e.handler}}const ux=(t,e)=>{if(Ua(e))return[...t.matchAll(e)];const n=e(t);return n?n.map(r=>{const i=[];return i.push(r.text),i.index=r.index,i.input=t,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function cx(t){const{editor:e,state:n,from:r,to:i,rule:o}=t,{commands:s,chain:l,can:a}=new ts({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,i,(f,d)=>{if(!f.isTextblock||f.type.spec.code)return;const p=Math.max(r,d),m=Math.min(i,d+f.content.size),y=f.textBetween(p-d,m-d,void 0,"￼");ux(y,o.find).forEach(g=>{if(g.index===void 0)return;const x=p+g.index+1,k=x+g[0].length,v={from:n.tr.mapping.map(x),to:n.tr.mapping.map(k)},E=o.handler({state:n,range:v,match:g,commands:s,chain:l,can:a});u.push(E)})}),u.every(f=>f!==null)}function dx(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1;return n.map(l=>new qe({view(a){const u=c=>{var f;r=!((f=a.dom.parentElement)===null||f===void 0)&&f.contains(c.target)?a.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:a=>(o=r===a.dom.parentElement,!1),paste:(a,u)=>{var c;const f=(c=u.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(a,u,c)=>{const f=a[0],d=f.getMeta("uiEvent")==="paste"&&!i,p=f.getMeta("uiEvent")==="drop"&&!o;if(!d&&!p)return;const m=u.doc.content.findDiffStart(c.doc.content),y=u.doc.content.findDiffEnd(c.doc.content);if(!lx(m)||!y||m===y.b)return;const h=c.tr,g=es({state:c,transaction:h});if(!(!cx({editor:e,state:g,from:Math.max(m-1,0),to:y.b,rule:l})||!h.steps.length))return h}}))}function fx(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Dr{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Dr.resolve(e),this.schema=nx(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const o={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Va(r.name,this.schema)};r.type==="mark"&&(!((i=V(R(r,"keepOnSplit",o)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const s=R(r,"onBeforeCreate",o);s&&this.editor.on("beforeCreate",s);const l=R(r,"onCreate",o);l&&this.editor.on("create",l);const a=R(r,"onUpdate",o);a&&this.editor.on("update",a);const u=R(r,"onSelectionUpdate",o);u&&this.editor.on("selectionUpdate",u);const c=R(r,"onTransaction",o);c&&this.editor.on("transaction",c);const f=R(r,"onFocus",o);f&&this.editor.on("focus",f);const d=R(r,"onBlur",o);d&&this.editor.on("blur",d);const p=R(r,"onDestroy",o);p&&this.editor.on("destroy",p)})}static resolve(e){const n=Dr.sort(Dr.flatten(e)),r=fx(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=R(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=R(r,"priority")||100,s=R(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Va(n.name,this.schema)},i=R(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Dr.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Va(s.name,this.schema)},a=[],u=R(s,"addKeyboardShortcuts",l);if(u){const p=Object.fromEntries(Object.entries(u()).map(([y,h])=>[y,()=>h({editor:e})])),m=Tw(p);a.push(m)}const c=R(s,"addInputRules",l);rh(s,e.options.enableInputRules)&&c&&r.push(...c());const f=R(s,"addPasteRules",l);rh(s,e.options.enablePasteRules)&&f&&i.push(...f());const d=R(s,"addProseMirrorPlugins",l);if(d){const p=d();a.push(...p)}return a}).flat();return[sx({editor:e,rules:r}),...dx({editor:e,rules:i}),...o]}get attributes(){return Zp(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=ns(this.extensions);return Object.fromEntries(n.filter(r=>!!R(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:ce(r.name,this.schema)},s=R(r,"addNodeView",o);if(!s)return[];const l=(a,u,c,f)=>{const d=$a(a,i);return s()({editor:e,node:a,getPos:c,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,l]}))}}function px(t){return Object.prototype.toString.call(t).slice(8,-1)}function Wa(t){return px(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function rs(t,e){const n={...t};return Wa(t)&&Wa(e)&&Object.keys(e).forEach(r=>{Wa(e[r])?r in t?n[r]=rs(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class kt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=V(R(this,"addOptions",{name:this.name}))),this.storage=V(R(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new kt(e)}configure(e={}){const n=this.extend();return n.options=rs(this.options,e),n.storage=V(R(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new kt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=V(R(n,"addOptions",{name:n.name})),n.storage=V(R(n,"addStorage",{name:n.name,options:n.options})),n}}function ih(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="",a=!0;return t.nodesBetween(r,i,(u,c,f,d)=>{var p;const m=s==null?void 0:s[u.type.name];m?(u.isBlock&&!a&&(l+=o,a=!0),f&&(l+=m({node:u,pos:c,parent:f,index:d,range:e}))):u.isText?(l+=(p=u==null?void 0:u.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,i-c),a=!1):u.isBlock&&!a&&(l+=o,a=!0)}),l}function oh(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const hx=kt.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new qe({key:new Vt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=oh(n);return ih(r,{from:s,to:l},{textSerializers:a})}}})]}}),mx=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),gx=(t=!1)=>({commands:e})=>e.setContent("",t),yx=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(a)),d=u.resolve(c.map(a+l.nodeSize)),p=f.blockRange(d);if(!p)return;const m=ur(p);if(l.type.isTextblock){const{defaultType:y}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,y)}(m||m===0)&&e.lift(p,m)})}),!0},wx=t=>e=>t(e),xx=()=>({state:t,dispatch:e})=>_w(t,e),vx=t=>({tr:e,state:n,dispatch:r})=>{const i=ce(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},kx=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},bx=()=>({state:t,dispatch:e})=>Fw(t,e),Dx=()=>({commands:t})=>t.keyboardShortcut("Enter"),Cx=()=>({state:t,dispatch:e})=>zw(t,e);function is(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Ua(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Ka(t,e,n={}){return t.find(r=>r.type===e&&is(r.attrs,n))}function Ex(t,e,n={}){return!!Ka(t,e,n)}function Ja(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=Ka([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,l=o+1,a=s+r.node.nodeSize;for(Ka([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&Ex([...t.parent.child(l).marks],e,n);)a+=t.parent.child(l).nodeSize,l+=1;return{from:s,to:a}}function Xt(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Sx=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Xt(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:u,to:c}=l;if(i){const f=Ja(a,o,e);if(f&&f.from<=u&&f.to>=c){const d=U.create(s,f.from,f.to);n.setSelection(d)}}return!0},Ax=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Nx(t){var e;return((e=t.constructor)===null||e===void 0?void 0:e.toString().substring(0,5))==="class"}function Mx(t){return t&&typeof t=="object"&&!Array.isArray(t)&&!Nx(t)}function Tx(t){return Mx(t)&&t instanceof U}function In(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function sh(t,e=null){if(!e)return null;const n=z.atStart(t),r=z.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?U.create(t,In(0,i,o),In(t.content.size,i,o)):U.create(t,In(e,i,o),In(e,i,o))}function qa(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Ox=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{qa()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!Tx(n.state.selection))return s(),!0;const l=sh(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},Fx=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Px=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function lh(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function ss(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)?S.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),ss("",e,n)}if(typeof t=="string"){const r=lr.fromSchema(e);return n.slice?r.parseSlice(lh(t),n.parseOptions).content:r.parse(lh(t),n.parseOptions)}return ss("",e,n)}function Rx(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof De||i instanceof ue))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),t.setSelection(z.near(t.doc.resolve(s),n))}const Bx=t=>t.toString().startsWith("<"),Ix=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const s=ss(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(s.toString()==="<>")return!0;let{from:l,to:a}=typeof t=="number"?{from:t,to:t}:t,u=!0,c=!0;if((Bx(s)?s:[s]).forEach(d=>{d.check(),u=u?d.isText&&d.marks.length===0:!1,c=c?d.isBlock:!1}),l===a&&c){const{parent:d}=r.doc.resolve(l);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(l-=1,a+=1)}u?r.insertText(e,l,a):r.replaceWith(l,a,s),n.updateSelection&&Rx(r,r.steps.length-1,-1)}return!0},jx=()=>({state:t,dispatch:e})=>Pw(t,e),Lx=()=>({state:t,dispatch:e})=>Bw(t,e);function ah(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function zx(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))qa()||ah()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const _x=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=zx(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Ci(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?ce(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const p=Math.max(r,d),m=Math.min(i,d+f.nodeSize);l.push({node:f,from:p,to:m})});const a=i-r,u=l.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>is(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=a}const $x=(t,e={})=>({state:n,dispatch:r})=>{const i=ce(t,n.schema);return Ci(n,i,e)?jw(n,r):!1},Vx=()=>({state:t,dispatch:e})=>$w(t,e),Ux=t=>({state:e,dispatch:n})=>{const r=ce(t,e.schema);return Yw(r)(e,n)},Hx=()=>({state:t,dispatch:e})=>Lw(t,e);function ls(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function uh(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const Wx=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=ls(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=ce(t,r.schema)),l==="mark"&&(s=Xt(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,uh(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&n.addMark(c,c+u.nodeSize,s.create(uh(f.attrs,e)))})})}),!0):!1},Kx=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Jx=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),qx=()=>({state:t,dispatch:e})=>Rw(t,e),Yx=()=>({state:t,dispatch:e})=>Iw(t,e),Gx=()=>({state:t,dispatch:e})=>Vw(t,e),Qx=()=>({state:t,dispatch:e})=>Ww(t,e),Xx=()=>({state:t,dispatch:e})=>Hw(t,e);function ch(t,e,n={}){return ss(t,e,{slice:!1,parseOptions:n})}const Zx=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,l=ch(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,l).setMeta("preventUpdate",!e),!0};function dh(t,e){const n=Xt(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}const ev=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Xt(t,r.schema);if(i)if(s){const u=dh(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,p)=>{const m=Math.max(p,c),y=Math.min(p+d.nodeSize,f);d.marks.find(g=>g.type===a)?d.marks.forEach(g=>{a===g.type&&n.addMark(m,y,a.create({...g.attrs,...e}))}):n.addMark(m,y,a.create(e))})});return!0},tv=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),nv=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=ce(t,n.schema);return o.isTextblock?i().command(({commands:s})=>Xp(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>Xp(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},rv=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=z.atStart(r).from,o=z.atEnd(r).to,s=In(t,i,o),l=L.create(r,s);e.setSelection(l)}return!0},iv=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=U.atStart(r).from,l=U.atEnd(r).to,a=In(i,s,l),u=In(o,s,l),c=U.create(r,a,u);e.setSelection(c)}return!0},ov=t=>({state:e,dispatch:n})=>{const r=ce(t,e.schema);return Xw(r)(e,n)};function as(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function sv(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function fh(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const lv=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=i.extensionManager.attributes,c=as(u,l.node().type.name,l.node().attrs);if(o instanceof L&&o.node.isBlock)return!l.parentOffset||!cr(s,l.pos)?!1:(r&&(t&&fh(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(r){const f=a.parentOffset===a.parent.content.size;o instanceof U&&e.deleteSelection();const d=l.depth===0?void 0:sv(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=f&&d?[{type:d,attrs:c}]:void 0,m=cr(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!m&&cr(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(m=!0,p=d?[{type:d,attrs:c}]:void 0),m&&(e.split(e.mapping.map(l.pos),1,p),d&&!f&&!l.parentOffset&&l.parent.type!==d)){const y=e.mapping.map(l.before()),h=e.doc.resolve(y);l.node(-1).canReplaceWith(h.index(),h.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}t&&fh(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},av=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=ce(t,n.schema),{$from:l,$to:a}=n.selection,u=n.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(a))return!1;const c=l.node(-1);if(c.type!==s)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==s||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let h=S.empty;const g=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-g;N>=l.depth-3;N-=1)h=S.from(l.node(N).copy(h));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k=as(f,l.node().type.name,l.node().attrs),v=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(k))||void 0;h=h.append(S.from(s.createAndFill(null,v)||void 0));const E=l.before(l.depth-(g-1));e.replace(E,l.after(-x),new F(h,4-g,0));let D=-1;e.doc.nodesBetween(E,e.doc.content.size,(N,C)=>{if(D>-1)return!1;N.isTextblock&&N.content.size===0&&(D=C+1)}),D>-1&&e.setSelection(U.near(e.doc.resolve(D))),e.scrollIntoView()}return!0}const d=a.pos===l.end()?c.contentMatchAt(0).defaultType:null,p=as(f,c.type.name,c.attrs),m=as(f,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);const y=d?[{type:s,attrs:p},{type:d,attrs:m}]:[{type:s,attrs:p}];return cr(e.doc,l.pos,2)?(r&&e.split(l.pos,2,y).scrollIntoView(),!0):!1};function uv(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ya(t){return e=>uv(e.$from,t)}function ph(t,e){const{nodeExtensions:n}=ns(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=V(R(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}const hh=(t,e)=>{const n=Ya(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&pi(t.doc,n.pos)&&t.join(n.pos),!0},mh=(t,e)=>{const n=Ya(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&pi(t.doc,r)&&t.join(r),!0},cv=(t,e)=>({editor:n,tr:r,state:i,dispatch:o,chain:s,commands:l,can:a})=>{const{extensions:u}=n.extensionManager,c=ce(t,i.schema),f=ce(e,i.schema),{selection:d}=i,{$from:p,$to:m}=d,y=p.blockRange(m);if(!y)return!1;const h=Ya(g=>ph(g.type.name,u))(d);if(y.depth>=1&&h&&y.depth-h.depth<=1){if(h.node.type===c)return l.liftListItem(f);if(ph(h.node.type.name,u)&&c.validContent(h.node.content)&&o)return s().command(()=>(r.setNodeMarkup(h.pos,c),!0)).command(()=>hh(r,c)).command(()=>mh(r,c)).run()}return s().command(()=>a().wrapInList(c)?!0:l.clearNodes()).wrapInList(c).command(()=>hh(r,c)).command(()=>mh(r,c)).run()};function Ga(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Xt(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>is(f.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:f,$to:d})=>{const p=f.pos,m=d.pos;t.doc.nodesBetween(p,m,(y,h)=>{if(!y.isText&&!y.marks.length)return;const g=Math.max(p,h),x=Math.min(m,h+y.nodeSize),k=x-g;s+=k,l.push(...y.marks.map(v=>({mark:v,from:g,to:x})))})}),s===0)return!1;const a=l.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>is(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=l.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(a>0?a+u:a)>=s}var dv=Object.freeze({__proto__:null,blur:mx,clearContent:gx,clearNodes:yx,command:wx,createParagraphNear:xx,deleteNode:vx,deleteRange:kx,deleteSelection:bx,enter:Dx,exitCode:Cx,extendMarkRange:Sx,first:Ax,focus:Ox,forEach:Fx,insertContent:Px,insertContentAt:Ix,joinBackward:jx,joinForward:Lx,keyboardShortcut:_x,lift:$x,liftEmptyBlock:Vx,liftListItem:Ux,newlineInCode:Hx,resetAttributes:Wx,scrollIntoView:Kx,selectAll:Jx,selectNodeBackward:qx,selectNodeForward:Yx,selectParentNode:Gx,selectTextblockEnd:Qx,selectTextblockStart:Xx,setContent:Zx,setMark:ev,setMeta:tv,setNode:nv,setNodeSelection:rv,setTextSelection:iv,sinkListItem:ov,splitBlock:lv,splitListItem:av,toggleList:cv,toggleMark:(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Xt(t,r.schema);return Ga(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},toggleNode:(t,e,n={})=>({state:r,commands:i})=>{const o=ce(t,r.schema),s=ce(e,r.schema);return Ci(r,o,n)?i.setNode(s):i.setNode(o,n)},toggleWrap:(t,e={})=>({state:n,commands:r})=>{const i=ce(t,n.schema);return Ci(n,i,e)?r.lift(i):r.wrapIn(i,e)},undoInputRule:()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},unsetMark:(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Xt(t,r.schema),{$from:u,empty:c,ranges:f}=l;if(!i)return!0;if(c&&s){let{from:d,to:p}=l;const m=(o=u.marks().find(h=>h.type===a))===null||o===void 0?void 0:o.attrs,y=Ja(u,a,m);y&&(d=y.from,p=y.to),n.removeMark(d,p,a)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,a)});return n.removeStoredMark(a),!0},updateAttributes:(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=ls(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=ce(t,r.schema)),l==="mark"&&(s=Xt(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{o&&o===f.type&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(p=>{if(s===p.type){const m=Math.max(d,u),y=Math.min(d+f.nodeSize,c);n.addMark(m,y,s.create({...p.attrs,...e}))}})})}),!0):!1},wrapIn:(t,e={})=>({state:n,dispatch:r})=>{const i=ce(t,n.schema);return Kw(i,e)(n,r)},wrapInList:(t,e={})=>({state:n,dispatch:r})=>{const i=ce(t,n.schema);return Jw(i,e)(n,r)}});const fv=kt.create({name:"commands",addCommands(){return{...dv}}}),pv=kt.create({name:"editable",addProseMirrorPlugins(){return[new qe({key:new Vt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),hv=kt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qe({key:new Vt("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),mv=kt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:f}=a,{pos:d,parent:p}=f,m=z.atStart(u).from===d;return!c||!m||!p.type.isTextblock||p.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return qa()||ah()?o:i},addProseMirrorPlugins(){return[new qe({key:new Vt("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(m=>m.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,l=z.atStart(e.doc).from,a=z.atEnd(e.doc).to,u=o===l&&s===a,c=n.doc.textBetween(0,n.doc.content.size," "," ").length===0;if(i||!u||!c)return;const f=n.tr,d=es({state:n,transaction:f}),{commands:p}=new ts({editor:this.editor,state:d});if(p.clearNodes(),!!f.steps.length)return f}})]}}),gv=kt.create({name:"tabindex",addProseMirrorPlugins(){return[new qe({key:new Vt("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var yv=Object.freeze({__proto__:null,ClipboardTextSerializer:hx,Commands:fv,Editable:pv,FocusEvents:hv,Keymap:mv,Tabindex:gv});function wv(t,e){const n=ce(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function gh(t,e){const n=ls(typeof e=="string"?e:e.name,t.schema);return n==="node"?wv(t,e):n==="mark"?dh(t,e):{}}function xv(t,e){const n=mt.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function vv(t,e){const n={from:0,to:t.content.size};return ih(t,n,e)}function kv(t,e,n={}){if(!e)return Ci(t,null,n)||Ga(t,null,n);const r=ls(e,t.schema);return r==="node"?Ci(t,e,n):r==="mark"?Ga(t,e,n):!1}function bv(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}const Dv=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Cv(t,e){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}let Ev=class extends Zw{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Cv(Dv,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=eh(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(yv):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Dr(n,this)}createCommandManager(){this.commandManager=new ts({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=ch(this.options.content,this.schema,this.options.parseOptions),n=sh(e,this.options.autofocus);this.view=new kw(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:hr.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return gh(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return kv(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return xv(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return vv(this.state.doc,{blockSeparator:n,textSerializers:{...r,...oh(this.schema)}})}get isEmpty(){return bv(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}};function Sv(t,e){const n=new Of(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function Av(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function Nv(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Mv(t){const e=Nv(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Tv(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((l,a)=>{s.push({from:l,to:a})});else{const{from:l,to:a}=n[o];if(l===void 0||a===void 0)return;s.push({from:l,to:a})}s.forEach(({from:l,to:a})=>{const u=e.slice(o).map(l,-1),c=e.slice(o).map(a),f=e.invert().map(u,-1),d=e.invert().map(c);r.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),Mv(r)}function Qa(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t-1),s=Ja(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function Ov(t){return new ix({find:t.find,handler:({state:e,range:n,match:r})=>{const i=V(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),a=l&&ia(l,t.type,i);if(!a)return null;o.wrap(l,a);const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&pi(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class us{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=V(R(this,"addOptions",{name:this.name}))),this.storage=V(R(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new us(e)}configure(e={}){const n=this.extend();return n.options=rs(this.options,e),n.storage=V(R(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new us(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=V(R(n,"addOptions",{name:n.name})),n.storage=V(R(n,"addStorage",{name:n.name,options:n.options})),n}}class Zt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=V(R(this,"addOptions",{name:this.name}))),this.storage=V(R(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Zt(e)}configure(e={}){const n=this.extend();return n.options=rs(this.options,e),n.storage=V(R(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Zt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=V(R(n,"addOptions",{name:n.name})),n.storage=V(R(n,"addStorage",{name:n.name,options:n.options})),n}}function Fv(t){return new ax({find:t.find,handler:({state:e,range:n,match:r})=>{const i=V(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];let a=n.to;if(s){const u=l.search(/\S/),c=n.from+l.indexOf(s),f=c+s.length;if(Qa(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>c).length)return null;f<n.to&&o.delete(f,n.to),c>n.from&&o.delete(n.from+u,c),a=n.from+u+s.length,o.addMark(n.from+u,a,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var yh={exports:{}},Qe={},wh={exports:{}},xh={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if(typeof window>"u"||typeof MessageChannel!="function"){var a=null,u=null,c=function(){if(a!==null)try{var O=t.unstable_now();a(!0,O),a=null}catch(j){throw setTimeout(c,0),j}};e=function(O){a!==null?setTimeout(e,0,O):(a=O,setTimeout(c,0))},n=function(O,j){u=setTimeout(O,j)},r=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if(typeof console<"u"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,h=-1,g=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},i=function(){},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<O?Math.floor(1e3/O):5};var k=new MessageChannel,v=k.port2;k.port1.onmessage=function(){if(y!==null){var O=t.unstable_now();x=O+g;try{y(!0,O)?v.postMessage(null):(m=!1,y=null)}catch(j){throw v.postMessage(null),j}}else m=!1},e=function(O){y=O,m||(m=!0,v.postMessage(null))},n=function(O,j){h=f(function(){O(t.unstable_now())},j)},r=function(){d(h),h=-1}}function E(O,j){var $=O.length;O.push(j);e:for(;;){var oe=$-1>>>1,be=O[oe];if(be!==void 0&&0<C(be,j))O[oe]=j,O[$]=be,$=oe;else break e}}function D(O){return O=O[0],O===void 0?null:O}function N(O){var j=O[0];if(j!==void 0){var $=O.pop();if($!==j){O[0]=$;e:for(var oe=0,be=O.length;oe<be;){var rr=2*(oe+1)-1,ir=O[rr],Oo=rr+1,oi=O[Oo];if(ir!==void 0&&0>C(ir,$))oi!==void 0&&0>C(oi,ir)?(O[oe]=oi,O[Oo]=$,oe=Oo):(O[oe]=ir,O[rr]=$,oe=rr);else if(oi!==void 0&&0>C(oi,$))O[oe]=oi,O[Oo]=$,oe=Oo;else break e}}return j}return null}function C(O,j){var $=O.sortIndex-j.sortIndex;return $!==0?$:O.id-j.id}var M=[],J=[],Dn=1,he=null,W=3,pt=!1,se=!1,Te=!1;function Cn(O){for(var j=D(J);j!==null;){if(j.callback===null)N(J);else if(j.startTime<=O)N(J),j.sortIndex=j.expirationTime,E(M,j);else break;j=D(J)}}function nr(O){if(Te=!1,Cn(O),!se)if(D(M)!==null)se=!0,e(re);else{var j=D(J);j!==null&&n(nr,j.startTime-O)}}function re(O,j){se=!1,Te&&(Te=!1,r()),pt=!0;var $=W;try{for(Cn(j),he=D(M);he!==null&&(!(he.expirationTime>j)||O&&!t.unstable_shouldYield());){var oe=he.callback;if(typeof oe=="function"){he.callback=null,W=he.priorityLevel;var be=oe(he.expirationTime<=j);j=t.unstable_now(),typeof be=="function"?he.callback=be:he===D(M)&&N(M),Cn(j)}else N(M);he=D(M)}if(he!==null)var rr=!0;else{var ir=D(J);ir!==null&&n(nr,ir.startTime-j),rr=!1}return rr}finally{he=null,W=$,pt=!1}}var me=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){se||pt||(se=!0,e(re))},t.unstable_getCurrentPriorityLevel=function(){return W},t.unstable_getFirstCallbackNode=function(){return D(M)},t.unstable_next=function(O){switch(W){case 1:case 2:case 3:var j=3;break;default:j=W}var $=W;W=j;try{return O()}finally{W=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=me,t.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var $=W;W=O;try{return j()}finally{W=$}},t.unstable_scheduleCallback=function(O,j,$){var oe=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?oe+$:oe):$=oe,O){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=$+be,O={id:Dn++,callback:j,priorityLevel:O,startTime:$,expirationTime:be,sortIndex:-1},$>oe?(O.sortIndex=$,E(J,O),D(M)===null&&O===D(J)&&(Te?r():Te=!0,n(nr,$-oe))):(O.sortIndex=be,E(M,O),se||pt||(se=!0,e(re))),O},t.unstable_wrapCallback=function(O){var j=W;return function(){var $=W;W=j;try{return O.apply(this,arguments)}finally{W=$}}}})(xh),wh.exports=xh;var Pv=wh.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cs=b,ee=Ed,de=Pv;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!cs)throw Error(A(227));var vh=new Set,Ei={};function jn(t,e){Cr(t,e),Cr(t+"Capture",e)}function Cr(t,e){for(Ei[t]=e,t=0;t<e.length;t++)vh.add(e[t])}var Ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kh=Object.prototype.hasOwnProperty,bh={},Dh={};function Bv(t){return kh.call(Dh,t)?!0:kh.call(bh,t)?!1:Rv.test(t)?Dh[t]=!0:(bh[t]=!0,!1)}function Iv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jv(t,e,n,r){if(e===null||typeof e>"u"||Iv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Pe(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Pe(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Pe(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Pe(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Pe(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Pe(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){xe[t]=new Pe(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){xe[t]=new Pe(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){xe[t]=new Pe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xa=/[\-:]([a-z])/g;function Za(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xa,Za);xe[e]=new Pe(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xa,Za);xe[e]=new Pe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xa,Za);xe[e]=new Pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Pe(t,1,!1,t.toLowerCase(),null,!1,!1)}),xe.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){xe[t]=new Pe(t,1,!1,t.toLowerCase(),null,!0,!0)});function eu(t,e,n,r){var i=xe.hasOwnProperty(e)?xe[e]:null,o=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(jv(e,n,i,r)&&(n=null),r||i===null?Bv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Si=60103,zn=60106,en=60107,tu=60108,Ai=60114,nu=60109,ru=60110,ds=60112,Ni=60113,fs=60120,ps=60115,iu=60116,ou=60121,su=60128,Ch=60129,lu=60130,au=60131;if(typeof Symbol=="function"&&Symbol.for){var fe=Symbol.for;Si=fe("react.element"),zn=fe("react.portal"),en=fe("react.fragment"),tu=fe("react.strict_mode"),Ai=fe("react.profiler"),nu=fe("react.provider"),ru=fe("react.context"),ds=fe("react.forward_ref"),Ni=fe("react.suspense"),fs=fe("react.suspense_list"),ps=fe("react.memo"),iu=fe("react.lazy"),ou=fe("react.block"),fe("react.scope"),su=fe("react.opaque.id"),Ch=fe("react.debug_trace_mode"),lu=fe("react.offscreen"),au=fe("react.legacy_hidden")}var Eh=typeof Symbol=="function"&&Symbol.iterator;function Mi(t){return t===null||typeof t!="object"?null:(t=Eh&&t[Eh]||t["@@iterator"],typeof t=="function"?t:null)}var uu;function Ti(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function hs(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(a){var r=a}Reflect.construct(t,[],e)}else{try{e.call()}catch(a){r=a}t.call(e.prototype)}else{try{throw Error()}catch(a){r=a}t()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var i=a.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l])return`
`+i[s].replace(" at new "," at ");while(1<=s&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ti(t):""}function Lv(t){switch(t.tag){case 5:return Ti(t.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 2:case 15:return t=hs(t.type,!1),t;case 11:return t=hs(t.type.render,!1),t;case 22:return t=hs(t.type._render,!1),t;case 1:return t=hs(t.type,!0),t;default:return""}}function Er(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case en:return"Fragment";case zn:return"Portal";case Ai:return"Profiler";case tu:return"StrictMode";case Ni:return"Suspense";case fs:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ru:return(t.displayName||"Context")+".Consumer";case nu:return(t._context.displayName||"Context")+".Provider";case ds:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case ps:return Er(t.type);case ou:return Er(t._render);case iu:e=t._payload,t=t._init;try{return Er(t(e))}catch{}}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Sh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zv(t){var e=Sh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ms(t){t._valueTracker||(t._valueTracker=zv(t))}function Ah(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function du(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mh(t,e){e=e.checked,e!=null&&eu(t,"checked",e,!1)}function fu(t,e){Mh(t,e);var n=tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pu(t,e.type,n):e.hasOwnProperty("defaultValue")&&pu(t,e.type,tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Th(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pu(t,e,n){(e!=="number"||gs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function _v(t){var e="";return cs.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function hu(t,e){return t=ee({children:void 0},e),(e=_v(e.children))&&(t.children=e),t}function Sr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Oh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tn(n)}}function Fh(t,e){var n=tn(e.value),r=tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ph(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var gu={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Rh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ys,Bh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==gu.svg||"innerHTML"in t)t.innerHTML=e;else{for(ys=ys||document.createElement("div"),ys.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ys.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fi={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$v=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(t){$v.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fi[e]=Fi[t]})});function Ih(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fi.hasOwnProperty(t)&&Fi[t]?(""+e).trim():e+"px"}function jh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ih(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Vv=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wu(t,e){if(e){if(Vv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function xu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function vu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ku=null,Ar=null,Nr=null;function Lh(t){if(t=Qi(t)){if(typeof ku!="function")throw Error(A(280));var e=t.stateNode;e&&(e=Bs(e),ku(t.stateNode,t.type,e))}}function zh(t){Ar?Nr?Nr.push(t):Nr=[t]:Ar=t}function _h(){if(Ar){var t=Ar,e=Nr;if(Nr=Ar=null,Lh(t),e)for(t=0;t<e.length;t++)Lh(e[t])}}function bu(t,e){return t(e)}function $h(t,e,n,r,i){return t(e,n,r,i)}function Du(){}var Vh=bu,_n=!1,Cu=!1;function Eu(){(Ar!==null||Nr!==null)&&(Du(),_h())}function Uv(t,e,n){if(Cu)return t(e,n);Cu=!0;try{return Vh(t,e,n)}finally{Cu=!1,Eu()}}function Pi(t,e){var n=t.stateNode;if(n===null)return null;var r=Bs(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Su=!1;if(Ot)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){Su=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{Su=!1}function Hv(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Bi=!1,ws=null,xs=!1,Au=null,Wv={onError:function(t){Bi=!0,ws=t}};function Kv(t,e,n,r,i,o,s,l,a){Bi=!1,ws=null,Hv.apply(Wv,arguments)}function Jv(t,e,n,r,i,o,s,l,a){if(Kv.apply(this,arguments),Bi){if(Bi){var u=ws;Bi=!1,ws=null}else throw Error(A(198));xs||(xs=!0,Au=u)}}function $n(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Uh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hh(t){if($n(t)!==t)throw Error(A(188))}function qv(t){var e=t.alternate;if(!e){if(e=$n(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Hh(i),t;if(o===r)return Hh(i),e;o=o.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function Wh(t){if(t=qv(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Kh(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var Jh,Nu,qh,Yh,Mu=!1,bt=[],nn=null,rn=null,on=null,Ii=new Map,ji=new Map,Li=[],Gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tu(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function Qh(t,e){switch(t){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ji.delete(e.pointerId)}}function zi(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t=Tu(e,n,r,i,o),e!==null&&(e=Qi(e),e!==null&&Nu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Yv(t,e,n,r,i){switch(e){case"focusin":return nn=zi(nn,t,e,n,r,i),!0;case"dragenter":return rn=zi(rn,t,e,n,r,i),!0;case"mouseover":return on=zi(on,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ii.set(o,zi(Ii.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ji.set(o,zi(ji.get(o)||null,t,e,n,r,i)),!0}return!1}function Gv(t){var e=Vn(t.target);if(e!==null){var n=$n(e);if(n!==null){if(e=n.tag,e===13){if(e=Uh(n),e!==null){t.blockedOn=e,Yh(t.lanePriority,function(){de.unstable_runWithPriority(t.priority,function(){qh(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Iu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=Qi(n),e!==null&&Nu(e),t.blockedOn=n,!1;e.shift()}return!0}function Xh(t,e,n){vs(t)&&n.delete(e)}function Qv(){for(Mu=!1;0<bt.length;){var t=bt[0];if(t.blockedOn!==null){t=Qi(t.blockedOn),t!==null&&Jh(t);break}for(var e=t.targetContainers;0<e.length;){var n=Iu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&bt.shift()}nn!==null&&vs(nn)&&(nn=null),rn!==null&&vs(rn)&&(rn=null),on!==null&&vs(on)&&(on=null),Ii.forEach(Xh),ji.forEach(Xh)}function _i(t,e){t.blockedOn===e&&(t.blockedOn=null,Mu||(Mu=!0,de.unstable_scheduleCallback(de.unstable_NormalPriority,Qv)))}function Zh(t){function e(i){return _i(i,t)}if(0<bt.length){_i(bt[0],t);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nn!==null&&_i(nn,t),rn!==null&&_i(rn,t),on!==null&&_i(on,t),Ii.forEach(e),ji.forEach(e),n=0;n<Li.length;n++)r=Li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)Gv(n),n.blockedOn===null&&Li.shift()}function ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mr={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionend:ks("Transition","TransitionEnd")},Ou={},em={};Ot&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function bs(t){if(Ou[t])return Ou[t];if(!Mr[t])return t;var e=Mr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in em)return Ou[t]=e[n];return t}var tm=bs("animationend"),nm=bs("animationiteration"),rm=bs("animationstart"),im=bs("transitionend"),om=new Map,Fu=new Map,Xv=["abort","abort",tm,"animationEnd",nm,"animationIteration",rm,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",im,"transitionEnd","waiting","waiting"];function Pu(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Fu.set(r,e),om.set(r,i),jn(i,[r])}}var Zv=de.unstable_now;Zv();var Q=8;function Tr(t){if(1&t)return Q=15,1;if(2&t)return Q=14,2;if(4&t)return Q=13,4;var e=24&t;return e!==0?(Q=12,e):t&32?(Q=11,32):(e=192&t,e!==0?(Q=10,e):t&256?(Q=9,256):(e=3584&t,e!==0?(Q=8,e):t&4096?(Q=7,4096):(e=4186112&t,e!==0?(Q=6,e):(e=62914560&t,e!==0?(Q=5,e):t&67108864?(Q=4,67108864):t&134217728?(Q=3,134217728):(e=805306368&t,e!==0?(Q=2,e):1073741824&t?(Q=1,1073741824):(Q=8,t))))))}function ek(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function tk(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(A(358,t))}}function $i(t,e){var n=t.pendingLanes;if(n===0)return Q=0;var r=0,i=0,o=t.expiredLanes,s=t.suspendedLanes,l=t.pingedLanes;if(o!==0)r=o,i=Q=15;else if(o=n&134217727,o!==0){var a=o&~s;a!==0?(r=Tr(a),i=Q):(l&=o,l!==0&&(r=Tr(l),i=Q))}else o=n&~s,o!==0?(r=Tr(o),i=Q):l!==0&&(r=Tr(l),i=Q);if(r===0)return 0;if(r=31-sn(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&!(e&s)){if(Tr(e),i<=Q)return e;Q=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),i=1<<n,r|=t[n],e&=~i;return r}function sm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ds(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Or(24&~e),t===0?Ds(10,e):t;case 10:return t=Or(192&~e),t===0?Ds(8,e):t;case 8:return t=Or(3584&~e),t===0&&(t=Or(4186112&~e),t===0&&(t=512)),t;case 2:return e=Or(805306368&~e),e===0&&(e=268435456),e}throw Error(A(358,t))}function Or(t){return t&-t}function Ru(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cs(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-sn(e),t[e]=n}var sn=Math.clz32?Math.clz32:ik,nk=Math.log,rk=Math.LN2;function ik(t){return t===0?32:31-(nk(t)/rk|0)|0}var ok=de.unstable_UserBlockingPriority,sk=de.unstable_runWithPriority,Es=!0;function lk(t,e,n,r){_n||Du();var i=Bu,o=_n;_n=!0;try{$h(i,t,e,n,r)}finally{(_n=o)||Eu()}}function ak(t,e,n,r){sk(ok,Bu.bind(null,t,e,n,r))}function Bu(t,e,n,r){if(Es){var i;if((i=(e&4)===0)&&0<bt.length&&-1<Gh.indexOf(t))t=Tu(null,t,e,n,r),bt.push(t);else{var o=Iu(t,e,n,r);if(o===null)i&&Qh(t,r);else{if(i){if(-1<Gh.indexOf(t)){t=Tu(o,t,e,n,r),bt.push(t);return}if(Yv(o,t,e,n,r))return;Qh(t,r)}Im(t,e,r,null,n)}}}}function Iu(t,e,n,r){var i=vu(r);if(i=Vn(i),i!==null){var o=$n(i);if(o===null)i=null;else{var s=o.tag;if(s===13){if(i=Uh(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Im(t,e,r,i,n),null}var ln=null,ju=null,Ss=null;function lm(){if(Ss)return Ss;var t,e=ju,n=e.length,r,i="value"in ln?ln.value:ln.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Ss=i.slice(t,1<r?1-r:void 0)}function As(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ns(){return!0}function am(){return!1}function He(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ns:am,this.isPropagationStopped=am,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),e}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lu=He(Fr),Vi=ee({},Fr,{view:0,detail:0}),uk=He(Vi),zu,_u,Ui,Ms=ee({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(zu=t.screenX-Ui.screenX,_u=t.screenY-Ui.screenY):_u=zu=0,Ui=t),zu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),um=He(Ms),ck=ee({},Ms,{dataTransfer:0}),dk=He(ck),fk=ee({},Vi,{relatedTarget:0}),$u=He(fk),pk=ee({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),hk=He(pk),mk=ee({},Fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gk=He(mk),yk=ee({},Fr,{data:0}),cm=He(yk),wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vk[t])?!!e[t]:!1}function Vu(){return kk}var bk=ee({},Vi,{key:function(t){if(t.key){var e=wk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=As(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(t){return t.type==="keypress"?As(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?As(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dk=He(bk),Ck=ee({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=He(Ck),Ek=ee({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),Sk=He(Ek),Ak=ee({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nk=He(Ak),Mk=ee({},Ms,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tk=He(Mk),Ok=[9,13,27,32],Uu=Ot&&"CompositionEvent"in window,Hi=null;Ot&&"documentMode"in document&&(Hi=document.documentMode);var Fk=Ot&&"TextEvent"in window&&!Hi,fm=Ot&&(!Uu||Hi&&8<Hi&&11>=Hi),pm=String.fromCharCode(32),hm=!1;function mm(t,e){switch(t){case"keyup":return Ok.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pr=!1;function Pk(t,e){switch(t){case"compositionend":return gm(e);case"keypress":return e.which!==32?null:(hm=!0,pm);case"textInput":return t=e.data,t===pm&&hm?null:t;default:return null}}function Rk(t,e){if(Pr)return t==="compositionend"||!Uu&&mm(t,e)?(t=lm(),Ss=ju=ln=null,Pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fm&&e.locale!=="ko"?null:e.data;default:return null}}var Bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bk[t.type]:e==="textarea"}function wm(t,e,n,r){zh(r),e=Os(e,"onChange"),0<e.length&&(n=new Lu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wi=null,Ki=null;function Ik(t){Om(t,0)}function Ts(t){var e=Lr(t);if(Ah(e))return t}function jk(t,e){if(t==="change")return e}var xm=!1;if(Ot){var Hu;if(Ot){var Wu="oninput"in document;if(!Wu){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),Wu=typeof vm.oninput=="function"}Hu=Wu}else Hu=!1;xm=Hu&&(!document.documentMode||9<document.documentMode)}function km(){Wi&&(Wi.detachEvent("onpropertychange",bm),Ki=Wi=null)}function bm(t){if(t.propertyName==="value"&&Ts(Ki)){var e=[];if(wm(e,Ki,t,vu(t)),t=Ik,_n)t(e);else{_n=!0;try{bu(t,e)}finally{_n=!1,Eu()}}}}function Lk(t,e,n){t==="focusin"?(km(),Wi=e,Ki=n,Wi.attachEvent("onpropertychange",bm)):t==="focusout"&&km()}function zk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ts(Ki)}function _k(t,e){if(t==="click")return Ts(e)}function $k(t,e){if(t==="input"||t==="change")return Ts(e)}function Vk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xe=typeof Object.is=="function"?Object.is:Vk,Uk=Object.prototype.hasOwnProperty;function Ji(t,e){if(Xe(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Uk.call(e,n[r])||!Xe(t[n[r]],e[n[r]]))return!1;return!0}function Dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cm(t,e){var n=Dm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dm(n)}}function Em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sm(){for(var t=window,e=gs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gs(t.document)}return e}function Ku(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Hk=Ot&&"documentMode"in document&&11>=document.documentMode,Rr=null,Ju=null,qi=null,qu=!1;function Am(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qu||Rr==null||Rr!==gs(r)||(r=Rr,"selectionStart"in r&&Ku(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qi&&Ji(qi,r)||(qi=r,r=Os(Ju,"onSelect"),0<r.length&&(e=new Lu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rr)))}Pu("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pu("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pu(Xv,2);for(var Nm="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Yu=0;Yu<Nm.length;Yu++)Fu.set(Nm[Yu],0);Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function Tm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jv(r,e,void 0,t),t.currentTarget=null}function Om(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Tm(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Tm(i,l,u),o=a}}}if(xs)throw t=Au,xs=!1,Au=null,t}function X(t,e){var n=Vm(e),r=t+"__bubble";n.has(r)||(Bm(e,t,2,!1),n.add(r))}var Fm="_reactListening"+Math.random().toString(36).slice(2);function Pm(t){t[Fm]||(t[Fm]=!0,vh.forEach(function(e){Mm.has(e)||Rm(e,!1,t,null),Rm(e,!0,t,null)}))}function Rm(t,e,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=n;if(t==="selectionchange"&&n.nodeType!==9&&(o=n.ownerDocument),r!==null&&!e&&Mm.has(t)){if(t!=="scroll")return;i|=2,o=r}var s=Vm(o),l=t+"__"+(e?"capture":"bubble");s.has(l)||(e&&(i|=4),Bm(o,t,i,e),s.add(l))}function Bm(t,e,n,r){var i=Fu.get(e);switch(i===void 0?2:i){case 0:i=lk;break;case 1:i=ak;break;default:i=Bu}n=i.bind(null,e,n,t),i=void 0,!Su||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Im(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Vn(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Uv(function(){var u=o,c=vu(n),f=[];e:{var d=om.get(t);if(d!==void 0){var p=Lu,m=t;switch(t){case"keypress":if(As(n)===0)break e;case"keydown":case"keyup":p=Dk;break;case"focusin":m="focus",p=$u;break;case"focusout":m="blur",p=$u;break;case"beforeblur":case"afterblur":p=$u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Sk;break;case tm:case nm:case rm:p=hk;break;case im:p=Nk;break;case"scroll":p=uk;break;case"wheel":p=Tk;break;case"copy":case"cut":case"paste":p=gk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=dm}var y=(e&4)!==0,h=!y&&t==="scroll",g=y?d!==null?d+"Capture":null:d;y=[];for(var x=u,k;x!==null;){k=x;var v=k.stateNode;if(k.tag===5&&v!==null&&(k=v,g!==null&&(v=Pi(x,g),v!=null&&y.push(Gi(x,v,k)))),h)break;x=x.return}0<y.length&&(d=new p(d,m,null,n,c),f.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&!(e&16)&&(m=n.relatedTarget||n.fromElement)&&(Vn(m)||m[jr]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Vn(m):null,m!==null&&(h=$n(m),m!==h||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=um,v="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=dm,v="onPointerLeave",g="onPointerEnter",x="pointer"),h=p==null?d:Lr(p),k=m==null?d:Lr(m),d=new y(v,x+"leave",p,n,c),d.target=h,d.relatedTarget=k,v=null,Vn(c)===u&&(y=new y(g,x+"enter",m,n,c),y.target=k,y.relatedTarget=h,v=y),h=v,p&&m)t:{for(y=p,g=m,x=0,k=y;k;k=Br(k))x++;for(k=0,v=g;v;v=Br(v))k++;for(;0<x-k;)y=Br(y),x--;for(;0<k-x;)g=Br(g),k--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=Br(y),g=Br(g)}y=null}else y=null;p!==null&&jm(f,d,p,y,!1),m!==null&&h!==null&&jm(f,h,m,y,!0)}}e:{if(d=u?Lr(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var E=jk;else if(ym(d))if(xm)E=$k;else{E=zk;var D=Lk}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=_k);if(E&&(E=E(t,u))){wm(f,E,n,c);break e}D&&D(t,d,u),t==="focusout"&&(D=d._wrapperState)&&D.controlled&&d.type==="number"&&pu(d,"number",d.value)}switch(D=u?Lr(u):window,t){case"focusin":(ym(D)||D.contentEditable==="true")&&(Rr=D,Ju=u,qi=null);break;case"focusout":qi=Ju=Rr=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,Am(f,n,c);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":Am(f,n,c)}var N;if(Uu)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Pr?mm(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(fm&&n.locale!=="ko"&&(Pr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Pr&&(N=lm()):(ln=c,ju="value"in ln?ln.value:ln.textContent,Pr=!0)),D=Os(u,C),0<D.length&&(C=new cm(C,t,null,n,c),f.push({event:C,listeners:D}),N?C.data=N:(N=gm(n),N!==null&&(C.data=N)))),(N=Fk?Pk(t,n):Rk(t,n))&&(u=Os(u,"onBeforeInput"),0<u.length&&(c=new cm("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=N))}Om(f,e)})}function Gi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Os(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Pi(t,n),o!=null&&r.unshift(Gi(t,o,i)),o=Pi(t,e),o!=null&&r.push(Gi(t,o,i))),t=t.return}return r}function Br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Pi(n,o),a!=null&&s.unshift(Gi(n,a,l))):i||(a=Pi(n,o),a!=null&&s.push(Gi(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}function Fs(){}var Gu=null,Qu=null;function Lm(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Xu(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,Wk=typeof clearTimeout=="function"?clearTimeout:void 0;function Zu(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function _m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ec=0;function Kk(t){return{$$typeof:su,toString:t,valueOf:t}}var Ps=Math.random().toString(36).slice(2),an="__reactFiber$"+Ps,Rs="__reactProps$"+Ps,jr="__reactContainer$"+Ps,$m="__reactEvents$"+Ps;function Vn(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_m(t);t!==null;){if(n=t[an])return n;t=_m(t)}return e}t=n,n=t.parentNode}return null}function Qi(t){return t=t[an]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Bs(t){return t[Rs]||null}function Vm(t){var e=t[$m];return e===void 0&&(e=t[$m]=new Set),e}var tc=[],zr=-1;function un(t){return{current:t}}function Z(t){0>zr||(t.current=tc[zr],tc[zr]=null,zr--)}function te(t,e){zr++,tc[zr]=t.current,t.current=e}var cn={},Ee=un(cn),Le=un(!1),Un=cn;function _r(t,e){var n=t.type.contextTypes;if(!n)return cn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ze(t){return t=t.childContextTypes,t!=null}function Is(){Z(Le),Z(Ee)}function Um(t,e,n){if(Ee.current!==cn)throw Error(A(168));te(Ee,e),te(Le,n)}function Hm(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(A(108,Er(e)||"Unknown",i));return ee({},n,r)}function js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cn,Un=Ee.current,te(Ee,t),te(Le,Le.current),!0}function Wm(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=Hm(t,e,Un),r.__reactInternalMemoizedMergedChildContext=t,Z(Le),Z(Ee),te(Ee,t)):Z(Le),te(Le,n)}var nc=null,Hn=null,Jk=de.unstable_runWithPriority,rc=de.unstable_scheduleCallback,ic=de.unstable_cancelCallback,qk=de.unstable_shouldYield,Km=de.unstable_requestPaint,oc=de.unstable_now,Yk=de.unstable_getCurrentPriorityLevel,Ls=de.unstable_ImmediatePriority,Jm=de.unstable_UserBlockingPriority,qm=de.unstable_NormalPriority,Ym=de.unstable_LowPriority,Gm=de.unstable_IdlePriority,sc={},Gk=Km!==void 0?Km:function(){},Ft=null,zs=null,lc=!1,Qm=oc(),Se=1e4>Qm?oc:function(){return oc()-Qm};function $r(){switch(Yk()){case Ls:return 99;case Jm:return 98;case qm:return 97;case Ym:return 96;case Gm:return 95;default:throw Error(A(332))}}function Xm(t){switch(t){case 99:return Ls;case 98:return Jm;case 97:return qm;case 96:return Ym;case 95:return Gm;default:throw Error(A(332))}}function Wn(t,e){return t=Xm(t),Jk(t,e)}function Xi(t,e,n){return t=Xm(t),rc(t,e,n)}function Dt(){if(zs!==null){var t=zs;zs=null,ic(t)}Zm()}function Zm(){if(!lc&&Ft!==null){lc=!0;var t=0;try{var e=Ft;Wn(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),Ft=null}catch(n){throw Ft!==null&&(Ft=Ft.slice(t+1)),rc(Ls,Dt),n}finally{lc=!1}}}var Qk=Ln.ReactCurrentBatchConfig;function ct(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var _s=un(null),$s=null,Vr=null,Vs=null;function ac(){Vs=Vr=$s=null}function uc(t){var e=_s.current;Z(_s),t.type._context._currentValue=e}function e0(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function Ur(t,e){$s=t,Vs=Vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Ze(t,e){if(Vs!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Vs=t,e=1073741823),e={context:t,observedBits:e,next:null},Vr===null){if($s===null)throw Error(A(308));Vr=e,$s.dependencies={lanes:0,firstContext:e,responders:null}}else Vr=Vr.next=e;return t._currentValue}var dn=!1;function cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function t0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pn(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function n0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zi(t,e,n,r){var i=t.updateQueue;dn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==s&&(f===null?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=a)}}if(o!==null){f=i.baseState,s=0,c=u=a=null;do{l=o.lane;var d=o.eventTime;if((r&l)===l){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,m=o;switch(l=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,l);break e}f=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=m.payload,l=typeof p=="function"?p.call(d,f,l):p,l==null)break e;f=ee({},f,l);break e;case 2:dn=!0}}o.callback!==null&&(t.flags|=32,l=i.effects,l===null?i.effects=[o]:l.push(o))}else d={eventTime:d,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=f):c=c.next=d,s|=l;if(o=o.next,o===null){if(l=i.shared.pending,l===null)break;o=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}while(1);c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,fo|=s,t.lanes=s,t.memoizedState=f}}function r0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var i0=new cs.Component().refs;function Us(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hs={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=We(),i=gn(t),o=fn(r,i);o.payload=e,n!=null&&(o.callback=n),pn(t,o),yn(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=We(),i=gn(t),o=fn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),pn(t,o),yn(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),r=gn(t),i=fn(n,r);i.tag=2,e!=null&&(i.callback=e),pn(t,i),yn(t,r,n)}};function o0(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ji(n,r)||!Ji(i,o):!0}function s0(t,e,n){var r=!1,i=cn,o=e.contextType;return typeof o=="object"&&o!==null?o=Ze(o):(i=ze(e)?Un:Ee.current,r=e.contextTypes,o=(r=r!=null)?_r(t,i):cn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function l0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hs.enqueueReplaceState(e,e.state,null)}function dc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=i0,cc(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ze(o):(o=ze(e)?Un:Ee.current,i.context=_r(t,o)),Zi(t,n,i,r),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Us(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hs.enqueueReplaceState(i,i.state,null),Zi(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var Ws=Array.isArray;function eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=r.refs;s===i0&&(s=r.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Ks(t,e){if(t.type!=="textarea")throw Error(A(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function a0(t){function e(h,g){if(t){var x=h.lastEffect;x!==null?(x.nextEffect=g,h.lastEffect=g):h.firstEffect=h.lastEffect=g,g.nextEffect=null,g.flags=8}}function n(h,g){if(!t)return null;for(;g!==null;)e(h,g),g=g.sibling;return null}function r(h,g){for(h=new Map;g!==null;)g.key!==null?h.set(g.key,g):h.set(g.index,g),g=g.sibling;return h}function i(h,g){return h=vn(h,g),h.index=0,h.sibling=null,h}function o(h,g,x){return h.index=x,t?(x=h.alternate,x!==null?(x=x.index,x<g?(h.flags=2,g):x):(h.flags=2,g)):g}function s(h){return t&&h.alternate===null&&(h.flags=2),h}function l(h,g,x,k){return g===null||g.tag!==6?(g=Jc(x,h.mode,k),g.return=h,g):(g=i(g,x),g.return=h,g)}function a(h,g,x,k){return g!==null&&g.elementType===x.type?(k=i(g,x.props),k.ref=eo(h,g,x),k.return=h,k):(k=cl(x.type,x.key,x.props,null,h.mode,k),k.ref=eo(h,g,x),k.return=h,k)}function u(h,g,x,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=qc(x,h.mode,k),g.return=h,g):(g=i(g,x.children||[]),g.return=h,g)}function c(h,g,x,k,v){return g===null||g.tag!==7?(g=Qr(x,h.mode,k,v),g.return=h,g):(g=i(g,x),g.return=h,g)}function f(h,g,x){if(typeof g=="string"||typeof g=="number")return g=Jc(""+g,h.mode,x),g.return=h,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Si:return x=cl(g.type,g.key,g.props,null,h.mode,x),x.ref=eo(h,null,g),x.return=h,x;case zn:return g=qc(g,h.mode,x),g.return=h,g}if(Ws(g)||Mi(g))return g=Qr(g,h.mode,x,null),g.return=h,g;Ks(h,g)}return null}function d(h,g,x,k){var v=g!==null?g.key:null;if(typeof x=="string"||typeof x=="number")return v!==null?null:l(h,g,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Si:return x.key===v?x.type===en?c(h,g,x.props.children,k,v):a(h,g,x,k):null;case zn:return x.key===v?u(h,g,x,k):null}if(Ws(x)||Mi(x))return v!==null?null:c(h,g,x,k,null);Ks(h,x)}return null}function p(h,g,x,k,v){if(typeof k=="string"||typeof k=="number")return h=h.get(x)||null,l(g,h,""+k,v);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Si:return h=h.get(k.key===null?x:k.key)||null,k.type===en?c(g,h,k.props.children,v,k.key):a(g,h,k,v);case zn:return h=h.get(k.key===null?x:k.key)||null,u(g,h,k,v)}if(Ws(k)||Mi(k))return h=h.get(x)||null,c(g,h,k,v,null);Ks(g,k)}return null}function m(h,g,x,k){for(var v=null,E=null,D=g,N=g=0,C=null;D!==null&&N<x.length;N++){D.index>N?(C=D,D=null):C=D.sibling;var M=d(h,D,x[N],k);if(M===null){D===null&&(D=C);break}t&&D&&M.alternate===null&&e(h,D),g=o(M,g,N),E===null?v=M:E.sibling=M,E=M,D=C}if(N===x.length)return n(h,D),v;if(D===null){for(;N<x.length;N++)D=f(h,x[N],k),D!==null&&(g=o(D,g,N),E===null?v=D:E.sibling=D,E=D);return v}for(D=r(h,D);N<x.length;N++)C=p(D,h,N,x[N],k),C!==null&&(t&&C.alternate!==null&&D.delete(C.key===null?N:C.key),g=o(C,g,N),E===null?v=C:E.sibling=C,E=C);return t&&D.forEach(function(J){return e(h,J)}),v}function y(h,g,x,k){var v=Mi(x);if(typeof v!="function")throw Error(A(150));if(x=v.call(x),x==null)throw Error(A(151));for(var E=v=null,D=g,N=g=0,C=null,M=x.next();D!==null&&!M.done;N++,M=x.next()){D.index>N?(C=D,D=null):C=D.sibling;var J=d(h,D,M.value,k);if(J===null){D===null&&(D=C);break}t&&D&&J.alternate===null&&e(h,D),g=o(J,g,N),E===null?v=J:E.sibling=J,E=J,D=C}if(M.done)return n(h,D),v;if(D===null){for(;!M.done;N++,M=x.next())M=f(h,M.value,k),M!==null&&(g=o(M,g,N),E===null?v=M:E.sibling=M,E=M);return v}for(D=r(h,D);!M.done;N++,M=x.next())M=p(D,h,N,M.value,k),M!==null&&(t&&M.alternate!==null&&D.delete(M.key===null?N:M.key),g=o(M,g,N),E===null?v=M:E.sibling=M,E=M);return t&&D.forEach(function(Dn){return e(h,Dn)}),v}return function(h,g,x,k){var v=typeof x=="object"&&x!==null&&x.type===en&&x.key===null;v&&(x=x.props.children);var E=typeof x=="object"&&x!==null;if(E)switch(x.$$typeof){case Si:e:{for(E=x.key,v=g;v!==null;){if(v.key===E){switch(v.tag){case 7:if(x.type===en){n(h,v.sibling),g=i(v,x.props.children),g.return=h,h=g;break e}break;default:if(v.elementType===x.type){n(h,v.sibling),g=i(v,x.props),g.ref=eo(h,v,x),g.return=h,h=g;break e}}n(h,v);break}else e(h,v);v=v.sibling}x.type===en?(g=Qr(x.props.children,h.mode,k,x.key),g.return=h,h=g):(k=cl(x.type,x.key,x.props,null,h.mode,k),k.ref=eo(h,g,x),k.return=h,h=k)}return s(h);case zn:e:{for(v=x.key;g!==null;){if(g.key===v)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(h,g.sibling),g=i(g,x.children||[]),g.return=h,h=g;break e}else{n(h,g);break}else e(h,g);g=g.sibling}g=qc(x,h.mode,k),g.return=h,h=g}return s(h)}if(typeof x=="string"||typeof x=="number")return x=""+x,g!==null&&g.tag===6?(n(h,g.sibling),g=i(g,x),g.return=h,h=g):(n(h,g),g=Jc(x,h.mode,k),g.return=h,h=g),s(h);if(Ws(x))return m(h,g,x,k);if(Mi(x))return y(h,g,x,k);if(E&&Ks(h,x),typeof x>"u"&&!v)switch(h.tag){case 1:case 22:case 0:case 11:case 15:throw Error(A(152,Er(h.type)||"Component"))}return n(h,g)}}var Js=a0(!0),u0=a0(!1),to={},Ct=un(to),no=un(to),ro=un(to);function Kn(t){if(t===to)throw Error(A(174));return t}function fc(t,e){switch(te(ro,e),te(no,t),te(Ct,to),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yu(e,t)}Z(Ct),te(Ct,e)}function Hr(){Z(Ct),Z(no),Z(ro)}function c0(t){Kn(ro.current);var e=Kn(Ct.current),n=yu(e,t.type);e!==n&&(te(no,t),te(Ct,n))}function pc(t){no.current===t&&(Z(Ct),Z(no))}var ne=un(0);function qs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pt=null,hn=null,Et=!1;function d0(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function f0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function hc(t){if(Et){var e=hn;if(e){var n=e;if(!f0(t,e)){if(e=Ir(n.nextSibling),!e||!f0(t,e)){t.flags=t.flags&-1025|2,Et=!1,Pt=t;return}d0(Pt,n)}Pt=t,hn=Ir(e.firstChild)}else t.flags=t.flags&-1025|2,Et=!1,Pt=t}}function p0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function Ys(t){if(t!==Pt)return!1;if(!Et)return p0(t),Et=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Xu(e,t.memoizedProps))for(e=hn;e;)d0(t,e),e=Ir(e.nextSibling);if(p0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=Pt?Ir(t.stateNode.nextSibling):null;return!0}function mc(){hn=Pt=null,Et=!1}var Wr=[];function gc(){for(var t=0;t<Wr.length;t++)Wr[t]._workInProgressVersionPrimary=null;Wr.length=0}var io=Ln.ReactCurrentDispatcher,et=Ln.ReactCurrentBatchConfig,oo=0,ie=null,Ae=null,ve=null,Gs=!1,so=!1;function _e(){throw Error(A(321))}function yc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xe(t[n],e[n]))return!1;return!0}function wc(t,e,n,r,i,o){if(oo=o,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,io.current=t===null||t.memoizedState===null?Zk:eb,t=n(r,i),so){o=0;do{if(so=!1,!(25>o))throw Error(A(301));o+=1,ve=Ae=null,e.updateQueue=null,io.current=tb,t=n(r,i)}while(so)}if(io.current=el,e=Ae!==null&&Ae.next!==null,oo=0,ve=Ae=ie=null,Gs=!1,e)throw Error(A(300));return t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ie.memoizedState=ve=t:ve=ve.next=t,ve}function qn(){if(Ae===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=ve===null?ie.memoizedState:ve.next;if(e!==null)ve=e,Ae=t;else{if(t===null)throw Error(A(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},ve===null?ie.memoizedState=ve=t:ve=ve.next=t}return ve}function St(t,e){return typeof e=="function"?e(t):e}function lo(t){var e=qn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=Ae,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var l=s=o=null,a=i;do{var u=a.lane;if((oo&u)===u)l!==null&&(l=l.next={lane:0,action:a.action,eagerReducer:a.eagerReducer,eagerState:a.eagerState,next:null}),r=a.eagerReducer===t?a.eagerState:t(r,a.action);else{var c={lane:u,action:a.action,eagerReducer:a.eagerReducer,eagerState:a.eagerState,next:null};l===null?(s=l=c,o=r):l=l.next=c,ie.lanes|=u,fo|=u}a=a.next}while(a!==null&&a!==i);l===null?o=r:l.next=s,Xe(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function ao(t){var e=qn(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Xe(o,e.memoizedState)||(dt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function h0(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===r:(t=t.mutableReadLanes,(t=(oo&t)===t)&&(e._workInProgressVersionPrimary=r,Wr.push(e))),t)return n(e._source);throw Wr.push(e),Error(A(350))}function m0(t,e,n,r){var i=Re;if(i===null)throw Error(A(349));var o=e._getVersion,s=o(e._source),l=io.current,a=l.useState(function(){return h0(i,e,n)}),u=a[1],c=a[0];a=ve;var f=t.memoizedState,d=f.refs,p=d.getSnapshot,m=f.source;f=f.subscribe;var y=ie;return t.memoizedState={refs:d,source:e,subscribe:r},l.useEffect(function(){d.getSnapshot=n,d.setSnapshot=u;var h=o(e._source);if(!Xe(s,h)){h=n(e._source),Xe(c,h)||(u(h),h=gn(y),i.mutableReadLanes|=h&i.pendingLanes),h=i.mutableReadLanes,i.entangledLanes|=h;for(var g=i.entanglements,x=h;0<x;){var k=31-sn(x),v=1<<k;g[k]|=h,x&=~v}}},[n,e,r]),l.useEffect(function(){return r(e._source,function(){var h=d.getSnapshot,g=d.setSnapshot;try{g(h(e._source));var x=gn(y);i.mutableReadLanes|=x&i.pendingLanes}catch(k){g(function(){throw k})}})},[e,r]),Xe(p,n)&&Xe(m,e)&&Xe(f,r)||(t={pending:null,dispatch:null,lastRenderedReducer:St,lastRenderedState:c},t.dispatch=u=bc.bind(null,ie,t),a.queue=t,a.baseQueue=null,c=h0(i,e,n),a.memoizedState=a.baseState=c),c}function g0(t,e,n){var r=qn();return m0(r,t,e,n)}function uo(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:St,lastRenderedState:t},t=t.dispatch=bc.bind(null,ie,t),[e.memoizedState,t]}function Qs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null},ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y0(t){var e=Jn();return t={current:t},e.memoizedState=t}function Xs(){return qn().memoizedState}function xc(t,e,n,r){var i=Jn();ie.flags|=t,i.memoizedState=Qs(1|e,n,void 0,r===void 0?null:r)}function vc(t,e,n,r){var i=qn();r=r===void 0?null:r;var o=void 0;if(Ae!==null){var s=Ae.memoizedState;if(o=s.destroy,r!==null&&yc(r,s.deps)){Qs(e,n,o,r);return}}ie.flags|=t,i.memoizedState=Qs(1|e,n,o,r)}function w0(t,e){return xc(516,4,t,e)}function Zs(t,e){return vc(516,4,t,e)}function x0(t,e){return vc(4,2,t,e)}function v0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function k0(t,e,n){return n=n!=null?n.concat([t]):null,vc(4,2,v0.bind(null,e,t),n)}function kc(){}function b0(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D0(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Xk(t,e){var n=$r();Wn(98>n?98:n,function(){t(!0)}),Wn(97<n?97:n,function(){var r=et.transition;et.transition=1;try{t(!1),e()}finally{et.transition=r}})}function bc(t,e,n){var r=We(),i=gn(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===ie||s!==null&&s===ie)so=Gs=!0;else{if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,a=s(l,n);if(o.eagerReducer=s,o.eagerState=a,Xe(a,l))return}catch{}finally{}yn(t,i,r)}}var el={readContext:Ze,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useOpaqueIdentifier:_e,unstable_isNewReconciler:!1},Zk={readContext:Ze,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:w0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xc(4,2,v0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xc(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=bc.bind(null,ie,t),[r.memoizedState,t]},useRef:y0,useState:uo,useDebugValue:kc,useDeferredValue:function(t){var e=uo(t),n=e[0],r=e[1];return w0(function(){var i=et.transition;et.transition=1;try{r(t)}finally{et.transition=i}},[t]),n},useTransition:function(){var t=uo(!1),e=t[0];return t=Xk.bind(null,t[1]),y0(t),[t,e]},useMutableSource:function(t,e,n){var r=Jn();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},m0(r,t,e,n)},useOpaqueIdentifier:function(){if(Et){var t=!1,e=Kk(function(){throw t||(t=!0,n("r:"+(ec++).toString(36))),Error(A(355))}),n=uo(e)[1];return!(ie.mode&2)&&(ie.flags|=516,Qs(5,function(){n("r:"+(ec++).toString(36))},void 0,null)),e}return e="r:"+(ec++).toString(36),uo(e),e},unstable_isNewReconciler:!1},eb={readContext:Ze,useCallback:b0,useContext:Ze,useEffect:Zs,useImperativeHandle:k0,useLayoutEffect:x0,useMemo:D0,useReducer:lo,useRef:Xs,useState:function(){return lo(St)},useDebugValue:kc,useDeferredValue:function(t){var e=lo(St),n=e[0],r=e[1];return Zs(function(){var i=et.transition;et.transition=1;try{r(t)}finally{et.transition=i}},[t]),n},useTransition:function(){var t=lo(St)[0];return[Xs().current,t]},useMutableSource:g0,useOpaqueIdentifier:function(){return lo(St)[0]},unstable_isNewReconciler:!1},tb={readContext:Ze,useCallback:b0,useContext:Ze,useEffect:Zs,useImperativeHandle:k0,useLayoutEffect:x0,useMemo:D0,useReducer:ao,useRef:Xs,useState:function(){return ao(St)},useDebugValue:kc,useDeferredValue:function(t){var e=ao(St),n=e[0],r=e[1];return Zs(function(){var i=et.transition;et.transition=1;try{r(t)}finally{et.transition=i}},[t]),n},useTransition:function(){var t=ao(St)[0];return[Xs().current,t]},useMutableSource:g0,useOpaqueIdentifier:function(){return ao(St)[0]},unstable_isNewReconciler:!1},nb=Ln.ReactCurrentOwner,dt=!1;function $e(t,e,n,r){e.child=t===null?u0(e,null,n,r):Js(e,t.child,n,r)}function C0(t,e,n,r,i){n=n.render;var o=e.ref;return Ur(e,i),r=wc(t,e,n,r,o,i),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Rt(t,e,i)):(e.flags|=1,$e(t,e,r,i),e.child)}function E0(t,e,n,r,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!Wc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,S0(t,e,s,r,i,o)):(t=cl(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}return s=t.child,!(i&o)&&(i=s.memoizedProps,n=n.compare,n=n!==null?n:Ji,n(i,r)&&t.ref===e.ref)?Rt(t,e,o):(e.flags|=1,t=vn(s,r),t.ref=e.ref,t.return=e,e.child=t)}function S0(t,e,n,r,i,o){if(t!==null&&Ji(t.memoizedProps,r)&&t.ref===e.ref)if(dt=!1,(o&i)!==0)t.flags&16384&&(dt=!0);else return e.lanes=t.lanes,Rt(t,e,o);return Cc(t,e,n,r,o)}function Dc(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},ul(e,n);else if(n&1073741824)e.memoizedState={baseLanes:0},ul(e,o!==null?o.baseLanes:n);else return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},ul(e,t),null;else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ul(e,r);return $e(t,e,i,n),e.child}function A0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function Cc(t,e,n,r,i){var o=ze(n)?Un:Ee.current;return o=_r(e,o),Ur(e,i),n=wc(t,e,n,r,o,i),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Rt(t,e,i)):(e.flags|=1,$e(t,e,n,i),e.child)}function N0(t,e,n,r,i){if(ze(n)){var o=!0;js(e)}else o=!1;if(Ur(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),s0(e,n,r),dc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ze(u):(u=ze(n)?Un:Ee.current,u=_r(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&l0(e,s,r,u),dn=!1;var d=e.memoizedState;s.state=d,Zi(e,r,s,i),a=e.memoizedState,l!==r||d!==a||Le.current||dn?(typeof c=="function"&&(Us(e,n,c,r),a=e.memoizedState),(l=dn||o0(e,n,l,r,d,a,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4)):(typeof s.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{s=e.stateNode,t0(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ct(e.type,l),s.props=u,f=e.pendingProps,d=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ze(a):(a=ze(n)?Un:Ee.current,a=_r(e,a));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||d!==a)&&l0(e,s,r,a),dn=!1,d=e.memoizedState,s.state=d,Zi(e,r,s,i);var m=e.memoizedState;l!==f||d!==m||Le.current||dn?(typeof p=="function"&&(Us(e,n,p,r),m=e.memoizedState),(u=dn||o0(e,n,u,r,d,m,a))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),r=!1)}return Ec(t,e,n,r,o,i)}function Ec(t,e,n,r,i,o){A0(t,e);var s=(e.flags&64)!==0;if(!r&&!s)return i&&Wm(e,n,!1),Rt(t,e,o);r=e.stateNode,nb.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Js(e,t.child,null,o),e.child=Js(e,null,l,o)):$e(t,e,l,o),e.memoizedState=r.state,i&&Wm(e,n,!0),e.child}function M0(t){var e=t.stateNode;e.pendingContext?Um(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Um(t,e.context,!1),fc(t,e.containerInfo)}var tl={dehydrated:null,retryLane:0};function T0(t,e,n){var r=e.pendingProps,i=ne.current,o=!1,s;return(s=(e.flags&64)!==0)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),te(ne,i&1),t===null?(r.fallback!==void 0&&hc(e),t=r.children,i=r.fallback,o?(t=O0(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=tl,t):typeof r.unstable_expectedLoadTime=="number"?(t=O0(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=tl,e.lanes=33554432,t):(n=Kc({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?o?(r=P0(t,e,r.children,r.fallback,n),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=t.childLanes&~n,e.memoizedState=tl,r):(n=F0(t,e,r.children,n),e.memoizedState=null,n):o?(r=P0(t,e,r.children,r.fallback,n),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=t.childLanes&~n,e.memoizedState=tl,r):(n=F0(t,e,r.children,n),e.memoizedState=null,n)}function O0(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},!(i&2)&&o!==null?(o.childLanes=0,o.pendingProps=e):o=Kc(e,i,0,null),n=Qr(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function F0(t,e,n,r){var i=t.child;return t=i.sibling,n=vn(i,{mode:"visible",children:n}),!(e.mode&2)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function P0(t,e,n,r,i){var o=e.mode,s=t.child;t=s.sibling;var l={mode:"hidden",children:n};return!(o&2)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,s=n.lastEffect,s!==null?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=vn(s,l),t!==null?r=vn(t,r):(r=Qr(r,o,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function R0(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),e0(t.return,e)}function Sc(t,e,n,r,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function B0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if($e(t,e,r.children,n),r=ne.current,r&2)r=r&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0(t,n);else if(t.tag===19)R0(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(ne,r),!(e.mode&2))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sc(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sc(e,!0,n,null,o,e.lastEffect);break;case"together":Sc(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Rt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fo|=e.lanes,n&e.childLanes){if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var I0,Ac,j0,L0;I0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ac=function(){},j0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Kn(Ct.current);var o=null;switch(n){case"input":i=du(t,i),r=du(t,r),o=[];break;case"option":i=hu(t,i),r=hu(t,r),o=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),o=[];break;case"textarea":i=mu(t,i),r=mu(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fs)}wu(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ei.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ei.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&X("scroll",t),o||l===a||(o=[])):typeof a=="object"&&a!==null&&a.$$typeof===su?a.toString():(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},L0=function(t,e,n,r){n!==r&&(e.flags|=4)};function co(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rb(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ze(e.type)&&Is(),null;case 3:return Hr(),Z(Le),Z(Ee),gc(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ys(e)?e.flags|=4:r.hydrate||(e.flags|=256)),Ac(e),null;case 5:pc(e);var i=Kn(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)j0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(A(166));return null}if(t=Kn(Ct.current),Ys(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[an]=e,r[Rs]=o,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(t=0;t<Yi.length;t++)X(Yi[t],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":Nh(r,o),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},X("invalid",r);break;case"textarea":Oh(r,o),X("invalid",r)}wu(n,o),t=null;for(var s in o)o.hasOwnProperty(s)&&(i=o[s],s==="children"?typeof i=="string"?r.textContent!==i&&(t=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(t=["children",""+i]):Ei.hasOwnProperty(s)&&i!=null&&s==="onScroll"&&X("scroll",r));switch(n){case"input":ms(r),Th(r,o,!0);break;case"textarea":ms(r),Ph(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fs)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(s=i.nodeType===9?i:i.ownerDocument,t===gu.html&&(t=Rh(n)),t===gu.html?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[an]=e,t[Rs]=r,I0(t,e,!1,!1),e.stateNode=t,s=xu(n,r),n){case"dialog":X("cancel",t),X("close",t),i=r;break;case"iframe":case"object":case"embed":X("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yi.length;i++)X(Yi[i],t);i=r;break;case"source":X("error",t),i=r;break;case"img":case"image":case"link":X("error",t),X("load",t),i=r;break;case"details":X("toggle",t),i=r;break;case"input":Nh(t,r),i=du(t,r),X("invalid",t);break;case"option":i=hu(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),X("invalid",t);break;case"textarea":Oh(t,r),i=mu(t,r),X("invalid",t);break;default:i=r}wu(n,i);var l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?jh(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Bh(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Oi(t,a):typeof a=="number"&&Oi(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ei.hasOwnProperty(o)?a!=null&&o==="onScroll"&&X("scroll",t):a!=null&&eu(t,o,a,s))}switch(n){case"input":ms(t),Th(t,r,!1);break;case"textarea":ms(t),Ph(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Sr(t,!!r.multiple,o,!1):r.defaultValue!=null&&Sr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fs)}Lm(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)L0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));n=Kn(ro.current),Kn(Ct.current),Ys(e)?(r=e.stateNode,n=e.memoizedProps,r[an]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r)}return null;case 13:return Z(ne),r=e.memoizedState,e.flags&64?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&Ys(e):n=t.memoizedState!==null,r&&!n&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||ne.current&1?ke===0&&(ke=3):((ke===0||ke===3)&&(ke=4),Re===null||!(fo&134217727)&&!(Jr&134217727)||Yr(Re,Ne))),(r||n)&&(e.flags|=4),null);case 4:return Hr(),Ac(e),t===null&&Pm(e.stateNode.containerInfo),null;case 10:return uc(e),null;case 17:return ze(e.type)&&Is(),null;case 19:if(Z(ne),r=e.memoizedState,r===null)return null;if(o=(e.flags&64)!==0,s=r.rendering,s===null)if(o)co(r,!1);else{if(ke!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(s=qs(t),s!==null){for(e.flags|=64,co(r,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(ne,ne.current&1|2),e.child}t=t.sibling}r.tail!==null&&Se()>Lc&&(e.flags|=64,o=!0,co(r,!1),e.lanes=33554432)}else{if(!o)if(t=qs(s),t!==null){if(e.flags|=64,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),co(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Et)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Se()-r.renderingStartTime>Lc&&n!==1073741824&&(e.flags|=64,o=!0,co(r,!1),e.lanes=33554432);r.isBackwards?(s.sibling=e.child,e.child=s):(n=r.last,n!==null?n.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Se(),n.sibling=null,e=ne.current,te(ne,o?e&1|2:e&1),n):null;case 23:case 24:return Hc(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(A(156,e.tag))}function ib(t){switch(t.tag){case 1:ze(t.type)&&Is();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(Hr(),Z(Le),Z(Ee),gc(),e=t.flags,e&64)throw Error(A(285));return t.flags=e&-4097|64,t;case 5:return pc(t),null;case 13:return Z(ne),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Z(ne),null;case 4:return Hr(),null;case 10:return uc(t),null;case 23:case 24:return Hc(),null;default:return null}}function Nc(t,e){try{var n="",r=e;do n+=Lv(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i}}function Mc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ob=typeof WeakMap=="function"?WeakMap:Map;function z0(t,e,n){n=fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){il||(il=!0,zc=r),Mc(t,e)},n}function _0(t,e,n){n=fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return Mc(t,e),r(i)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(At===null?At=new Set([this]):At.add(this),Mc(t,e));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}var sb=typeof WeakSet=="function"?WeakSet:Set;function $0(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){xn(t,n)}else e.current=null}function lb(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:ct(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Zu(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(A(163))}function ab(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;r=i.next,i=i.tag,i&4&&i&1&&(ng(n,t),gb(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:ct(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&r0(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}r0(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&Lm(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&Zh(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(A(163))}function V0(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=Ih("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function U0(t,e){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(nc,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if(r&4)ng(e,n);else{r=e;try{i()}catch(o){xn(r,o)}}n=n.next}while(n!==t)}break;case 1:if($0(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){xn(e,o)}break;case 5:$0(e);break;case 4:J0(t,e)}}function H0(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function W0(t){return t.tag===5||t.tag===3||t.tag===4}function K0(t){e:{for(var e=t.return;e!==null;){if(W0(e))break e;e=e.return}throw Error(A(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(A(161))}n.flags&16&&(Oi(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||W0(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?Tc(t,n,e):Oc(t,n,e)}function Tc(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fs));else if(r!==4&&(t=t.child,t!==null))for(Tc(t,e,n),t=t.sibling;t!==null;)Tc(t,e,n),t=t.sibling}function Oc(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oc(t,e,n),t=t.sibling;t!==null;)Oc(t,e,n),t=t.sibling}function J0(t,e){for(var n=e,r=!1,i,o;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(A(160));switch(i=r.stateNode,r.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var s=t,l=n,a=l;;)if(U0(s,a),a.child!==null&&a.tag!==4)a.child.return=a,a=a.child;else{if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}o?(s=i,l=n.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(U0(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Fc(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var i=t!==null?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(n[Rs]=r,t==="input"&&r.type==="radio"&&r.name!=null&&Mh(n,r),xu(t,i),e=xu(t,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];s==="style"?jh(n,l):s==="dangerouslySetInnerHTML"?Bh(n,l):s==="children"?Oi(n,l):eu(n,s,l,e)}switch(t){case"input":fu(n,r);break;case"textarea":Fh(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,o=r.value,o!=null?Sr(n,!!r.multiple,o,!1):t!==!!r.multiple&&(r.defaultValue!=null?Sr(n,!!r.multiple,r.defaultValue,!0):Sr(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(A(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,Zh(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(jc=Se(),V0(e.child,!0)),q0(e);return;case 19:q0(e);return;case 17:return;case 23:case 24:V0(e,e.memoizedState!==null);return}throw Error(A(163))}function q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sb),e.forEach(function(r){var i=xb.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ub(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var cb=Math.ceil,nl=Ln.ReactCurrentDispatcher,Pc=Ln.ReactCurrentOwner,I=0,Re=null,ae=null,Ne=0,Yn=0,Rc=un(0),ke=0,rl=null,Kr=0,fo=0,Jr=0,Bc=0,Ic=null,jc=0,Lc=1/0;function qr(){Lc=Se()+500}var P=null,il=!1,zc=null,At=null,mn=!1,po=null,ho=90,_c=[],$c=[],Bt=null,mo=0,Vc=null,ol=-1,It=0,sl=0,go=null,ll=!1;function We(){return I&48?Se():ol!==-1?ol:ol=Se()}function gn(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return $r()===99?1:2;if(It===0&&(It=Kr),Qk.transition!==0){sl!==0&&(sl=Ic!==null?Ic.pendingLanes:0),t=It;var e=4186112&~sl;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=$r(),I&4&&t===98?t=Ds(12,It):(t=ek(t),t=Ds(t,It)),t}function yn(t,e,n){if(50<mo)throw mo=0,Vc=null,Error(A(185));if(t=al(t,e),t===null)return null;Cs(t,e,n),t===Re&&(Jr|=e,ke===4&&Yr(t,Ne));var r=$r();e===1?I&8&&!(I&48)?Uc(t):(tt(t,n),I===0&&(qr(),Dt())):(!(I&4)||r!==98&&r!==99||(Bt===null?Bt=new Set([t]):Bt.add(t)),tt(t,n)),Ic=t}function al(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function tt(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-sn(s),a=1<<l,u=o[l];if(u===-1){if(!(a&r)||a&i){u=e,Tr(a);var c=Q;o[l]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=e&&(t.expiredLanes|=a);s&=~a}if(r=$i(t,t===Re?Ne:0),e=Q,r===0)n!==null&&(n!==sc&&ic(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==sc&&ic(n)}e===15?(n=Uc.bind(null,t),Ft===null?(Ft=[n],zs=rc(Ls,Zm)):Ft.push(n),n=sc):e===14?n=Xi(99,Uc.bind(null,t)):(n=tk(e),n=Xi(n,Y0.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function Y0(t){if(ol=-1,sl=It=0,I&48)throw Error(A(327));var e=t.callbackNode;if(wn()&&t.callbackNode!==e)return null;var n=$i(t,t===Re?Ne:0);if(n===0)return null;var r=n,i=I;I|=16;var o=Z0();(Re!==t||Ne!==r)&&(qr(),Gr(t,r));do try{pb();break}catch(l){X0(t,l)}while(1);if(ac(),nl.current=o,I=i,ae!==null?r=0:(Re=null,Ne=0,r=ke),Kr&Jr)Gr(t,0);else if(r!==0){if(r===2&&(I|=64,t.hydrate&&(t.hydrate=!1,Zu(t.containerInfo)),n=sm(t),n!==0&&(r=yo(t,n))),r===1)throw e=rl,Gr(t,0),Yr(t,n),tt(t,Se()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(A(345));case 2:Gn(t);break;case 3:if(Yr(t,n),(n&62914560)===n&&(r=jc+500-Se(),10<r)){if($i(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){We(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zm(Gn.bind(null,t),r);break}Gn(t);break;case 4:if(Yr(t,n),(n&4186112)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-sn(n);o=1<<s,s=r[s],s>i&&(i=s),n&=~o}if(n=i,n=Se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cb(n/1960))-n,10<n){t.timeoutHandle=zm(Gn.bind(null,t),n);break}Gn(t);break;case 5:Gn(t);break;default:throw Error(A(329))}}return tt(t,Se()),t.callbackNode===e?Y0.bind(null,t):null}function Yr(t,e){for(e&=~Bc,e&=~Jr,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Uc(t){if(I&48)throw Error(A(327));if(wn(),t===Re&&t.expiredLanes&Ne){var e=Ne,n=yo(t,e);Kr&Jr&&(e=$i(t,e),n=yo(t,e))}else e=$i(t,0),n=yo(t,e);if(t.tag!==0&&n===2&&(I|=64,t.hydrate&&(t.hydrate=!1,Zu(t.containerInfo)),e=sm(t),e!==0&&(n=yo(t,e))),n===1)throw n=rl,Gr(t,0),Yr(t,e),tt(t,Se()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gn(t),tt(t,Se()),null}function db(){if(Bt!==null){var t=Bt;Bt=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,tt(e,Se())})}Dt()}function G0(t,e){var n=I;I|=1;try{return t(e)}finally{I=n,I===0&&(qr(),Dt())}}function Q0(t,e){var n=I;I&=-2,I|=8;try{return t(e)}finally{I=n,I===0&&(qr(),Dt())}}function ul(t,e){te(Rc,Yn),Yn|=e,Kr|=e}function Hc(){Yn=Rc.current,Z(Rc)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wk(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Is();break;case 3:Hr(),Z(Le),Z(Ee),gc();break;case 5:pc(r);break;case 4:Hr();break;case 13:Z(ne);break;case 19:Z(ne);break;case 10:uc(r);break;case 23:case 24:Hc()}n=n.return}Re=t,ae=vn(t.current,null),Ne=Yn=Kr=e,ke=0,rl=null,Bc=Jr=fo=0}function X0(t,e){do{var n=ae;try{if(ac(),io.current=el,Gs){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gs=!1}if(oo=0,ve=Ae=ie=null,so=!1,Pc.current=null,n===null||n.return===null){ke=1,rl=e,ae=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Ne,l.flags|=2048,l.firstEffect=l.lastEffect=null,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a;if(!(l.mode&2)){var c=l.alternate;c?(l.updateQueue=c.updateQueue,l.memoizedState=c.memoizedState,l.lanes=c.lanes):(l.updateQueue=null,l.memoizedState=null)}var f=(ne.current&1)!==0,d=s;do{var p;if(p=d.tag===13){var m=d.memoizedState;if(m!==null)p=m.dehydrated!==null;else{var y=d.memoizedProps;p=y.fallback===void 0?!1:y.unstable_avoidThisFallback!==!0?!0:!f}}if(p){var h=d.updateQueue;if(h===null){var g=new Set;g.add(u),d.updateQueue=g}else h.add(u);if(!(d.mode&2)){if(d.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var x=fn(-1,1);x.tag=2,pn(l,x)}l.lanes|=1;break e}a=void 0,l=e;var k=o.pingCache;if(k===null?(k=o.pingCache=new ob,a=new Set,k.set(u,a)):(a=k.get(u),a===void 0&&(a=new Set,k.set(u,a))),!a.has(l)){a.add(l);var v=wb.bind(null,o,u,l);u.then(v,v)}d.flags|=4096,d.lanes=e;break e}d=d.return}while(d!==null);a=Error((Er(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}ke!==5&&(ke=2),a=Nc(a,l),d=s;do{switch(d.tag){case 3:o=a,d.flags|=4096,e&=-e,d.lanes|=e;var E=z0(d,o,e);n0(d,E);break e;case 1:o=a;var D=d.type,N=d.stateNode;if(!(d.flags&64)&&(typeof D.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(At===null||!At.has(N)))){d.flags|=4096,e&=-e,d.lanes|=e;var C=_0(d,o,e);n0(d,C);break e}}d=d.return}while(d!==null)}tg(n)}catch(M){e=M,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(1)}function Z0(){var t=nl.current;return nl.current=el,t===null?el:t}function yo(t,e){var n=I;I|=16;var r=Z0();Re===t&&Ne===e||Gr(t,e);do try{fb();break}catch(i){X0(t,i)}while(1);if(ac(),I=n,nl.current=r,ae!==null)throw Error(A(261));return Re=null,Ne=0,ke}function fb(){for(;ae!==null;)eg(ae)}function pb(){for(;ae!==null&&!qk();)eg(ae)}function eg(t){var e=ig(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?tg(t):ae=e,Pc.current=null}function tg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&2048){if(n=ib(e),n!==null){n.flags&=2047,ae=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(n=rb(n,e,Yn),n!==null){ae=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||Yn&1073741824||!(n.mode&4)){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);ke===0&&(ke=5)}function Gn(t){var e=$r();return Wn(99,hb.bind(null,t,e)),null}function hb(t,e){do wn();while(po!==null);if(I&48)throw Error(A(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,l=t.expirationTimes;0<o;){var a=31-sn(o),u=1<<a;i[a]=0,s[a]=-1,l[a]=-1,o&=~u}if(Bt!==null&&!(r&24)&&Bt.has(t)&&Bt.delete(t),t===Re&&(ae=Re=null,Ne=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=I,I|=32,Pc.current=null,Gu=Es,s=Sm(),Ku(s)){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&u.rangeCount!==0){l=u.anchorNode,o=u.anchorOffset,a=u.focusNode,u=u.focusOffset;try{l.nodeType,a.nodeType}catch{l=null;break e}var c=0,f=-1,d=-1,p=0,m=0,y=s,h=null;t:for(;;){for(var g;y!==l||o!==0&&y.nodeType!==3||(f=c+o),y!==a||u!==0&&y.nodeType!==3||(d=c+u),y.nodeType===3&&(c+=y.nodeValue.length),(g=y.firstChild)!==null;)h=y,y=g;for(;;){if(y===s)break t;if(h===l&&++p===o&&(f=c),h===a&&++m===u&&(d=c),(g=y.nextSibling)!==null)break;y=h,h=y.parentNode}y=g}l=f===-1||d===-1?null:{start:f,end:d}}else l=null;l=l||{start:0,end:0}}else l=null;Qu={focusedElem:s,selectionRange:l},Es=!1,go=null,ll=!1,P=r;do try{mb()}catch(M){if(P===null)throw Error(A(330));xn(P,M),P=P.nextEffect}while(P!==null);go=null,P=r;do try{for(s=t;P!==null;){var x=P.flags;if(x&16&&Oi(P.stateNode,""),x&128){var k=P.alternate;if(k!==null){var v=k.ref;v!==null&&(typeof v=="function"?v(null):v.current=null)}}switch(x&1038){case 2:K0(P),P.flags&=-3;break;case 6:K0(P),P.flags&=-3,Fc(P.alternate,P);break;case 1024:P.flags&=-1025;break;case 1028:P.flags&=-1025,Fc(P.alternate,P);break;case 4:Fc(P.alternate,P);break;case 8:l=P,J0(s,l);var E=l.alternate;H0(l),E!==null&&H0(E)}P=P.nextEffect}}catch(M){if(P===null)throw Error(A(330));xn(P,M),P=P.nextEffect}while(P!==null);if(v=Qu,k=Sm(),x=v.focusedElem,s=v.selectionRange,k!==x&&x&&x.ownerDocument&&Em(x.ownerDocument.documentElement,x)){for(s!==null&&Ku(x)&&(k=s.start,v=s.end,v===void 0&&(v=k),"selectionStart"in x?(x.selectionStart=k,x.selectionEnd=Math.min(v,x.value.length)):(v=(k=x.ownerDocument||document)&&k.defaultView||window,v.getSelection&&(v=v.getSelection(),l=x.textContent.length,E=Math.min(s.start,l),s=s.end===void 0?E:Math.min(s.end,l),!v.extend&&E>s&&(l=s,s=E,E=l),l=Cm(x,E),o=Cm(x,s),l&&o&&(v.rangeCount!==1||v.anchorNode!==l.node||v.anchorOffset!==l.offset||v.focusNode!==o.node||v.focusOffset!==o.offset)&&(k=k.createRange(),k.setStart(l.node,l.offset),v.removeAllRanges(),E>s?(v.addRange(k),v.extend(o.node,o.offset)):(k.setEnd(o.node,o.offset),v.addRange(k)))))),k=[],v=x;v=v.parentNode;)v.nodeType===1&&k.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<k.length;x++)v=k[x],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}Es=!!Gu,Qu=Gu=null,t.current=n,P=r;do try{for(x=t;P!==null;){var D=P.flags;if(D&36&&ab(x,P.alternate,P),D&128){k=void 0;var N=P.ref;if(N!==null){var C=P.stateNode;switch(P.tag){case 5:k=C;break;default:k=C}typeof N=="function"?N(k):N.current=k}}P=P.nextEffect}}catch(M){if(P===null)throw Error(A(330));xn(P,M),P=P.nextEffect}while(P!==null);P=null,Gk(),I=i}else t.current=n;if(mn)mn=!1,po=t,ho=e;else for(P=r;P!==null;)e=P.nextEffect,P.nextEffect=null,P.flags&8&&(D=P,D.sibling=null,D.stateNode=null),P=e;if(r=t.pendingLanes,r===0&&(At=null),r===1?t===Vc?mo++:(mo=0,Vc=t):mo=0,n=n.stateNode,Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(nc,n,void 0,(n.current.flags&64)===64)}catch{}if(tt(t,Se()),il)throw il=!1,t=zc,zc=null,t;return I&8||Dt(),null}function mb(){for(;P!==null;){var t=P.alternate;ll||go===null||(P.flags&8?Kh(P,go)&&(ll=!0):P.tag===13&&ub(t,P)&&Kh(P,go)&&(ll=!0));var e=P.flags;e&256&&lb(t,P),!(e&512)||mn||(mn=!0,Xi(97,function(){return wn(),null})),P=P.nextEffect}}function wn(){if(ho!==90){var t=97<ho?97:ho;return ho=90,Wn(t,yb)}return!1}function gb(t,e){_c.push(e,t),mn||(mn=!0,Xi(97,function(){return wn(),null}))}function ng(t,e){$c.push(e,t),mn||(mn=!0,Xi(97,function(){return wn(),null}))}function yb(){if(po===null)return!1;var t=po;if(po=null,I&48)throw Error(A(331));var e=I;I|=32;var n=$c;$c=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,typeof s=="function")try{s()}catch(a){if(o===null)throw Error(A(330));xn(o,a)}}for(n=_c,_c=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(a){if(o===null)throw Error(A(330));xn(o,a)}}for(l=t.current.firstEffect;l!==null;)t=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=t;return I=e,Dt(),!0}function rg(t,e,n){e=Nc(n,e),e=z0(t,e,1),pn(t,e),e=We(),t=al(t,1),t!==null&&(Cs(t,1,e),tt(t,e))}function xn(t,e){if(t.tag===3)rg(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){rg(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(At===null||!At.has(r))){t=Nc(e,t);var i=_0(n,t,1);if(pn(n,i),i=We(),n=al(n,1),n!==null)Cs(n,1,i),tt(n,i);else if(typeof r.componentDidCatch=="function"&&(At===null||!At.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}n=n.return}}function wb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(Ne&n)===n&&(ke===4||ke===3&&(Ne&62914560)===Ne&&500>Se()-jc?Gr(t,0):Bc|=n),tt(t,e)}function xb(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?(It===0&&(It=Kr),e=Or(62914560&~It),e===0&&(e=4194304)):e=$r()===99?1:2:e=1),n=We(),t=al(t,e),t!==null&&(Cs(t,e,n),tt(t,n))}var ig;ig=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Le.current)dt=!0;else if(n&r)dt=!!(t.flags&16384);else{switch(dt=!1,e.tag){case 3:M0(e),mc();break;case 5:c0(e);break;case 1:ze(e.type)&&js(e);break;case 4:fc(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;te(_s,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return n&e.child.childLanes?T0(t,e,n):(te(ne,ne.current&1),e=Rt(t,e,n),e!==null?e.sibling:null);te(ne,ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&64){if(r)return B0(t,e,n);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(ne,ne.current),r)break;return null;case 23:case 24:return e.lanes=0,Dc(t,e,n)}return Rt(t,e,n)}else dt=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=_r(e,Ee.current),Ur(e,n),i=wc(null,e,r,t,i,n),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,ze(r)){var o=!0;js(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cc(e);var s=r.getDerivedStateFromProps;typeof s=="function"&&Us(e,r,s,t),i.updater=Hs,e.stateNode=i,i._reactInternals=e,dc(e,r,t,n),e=Ec(null,e,r,!0,o,n)}else e.tag=0,$e(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=kb(i),t=ct(i,t),o){case 0:e=Cc(null,e,i,t,n);break e;case 1:e=N0(null,e,i,t,n);break e;case 11:e=C0(null,e,i,t,n);break e;case 14:e=E0(null,e,i,ct(i.type,t),r,n);break e}throw Error(A(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),Cc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),N0(t,e,r,i,n);case 3:if(M0(e),r=e.updateQueue,t===null||r===null)throw Error(A(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,t0(t,e),Zi(e,r,null,n),r=e.memoizedState.element,r===i)mc(),e=Rt(t,e,n);else{if(i=e.stateNode,(o=i.hydrate)&&(hn=Ir(e.stateNode.containerInfo.firstChild),Pt=e,o=Et=!0),o){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)o=t[i],o._workInProgressVersionPrimary=t[i+1],Wr.push(o);for(n=u0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else $e(t,e,r,n),mc();e=e.child}return e;case 5:return c0(e),t===null&&hc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Xu(r,i)?s=null:o!==null&&Xu(r,o)&&(e.flags|=16),A0(t,e),$e(t,e,s,n),e.child;case 6:return t===null&&hc(e),null;case 13:return T0(t,e,n);case 4:return fc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Js(e,null,r,n):$e(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),C0(t,e,r,i,n);case 7:return $e(t,e,e.pendingProps,n),e.child;case 8:return $e(t,e,e.pendingProps.children,n),e.child;case 12:return $e(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var l=e.type._context;if(te(_s,l._currentValue),l._currentValue=o,s!==null)if(l=s.value,o=Xe(l,o)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(l,o):1073741823)|0,o===0){if(s.children===i.children&&!Le.current){e=Rt(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var a=l.dependencies;if(a!==null){s=l.child;for(var u=a.firstContext;u!==null;){if(u.context===r&&u.observedBits&o){l.tag===1&&(u=fn(-1,n&-n),u.tag=2,pn(l,u)),l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),e0(l.return,n),a.lanes|=n;break}u=u.next}}else s=l.tag===10&&l.type===e.type?null:l.child;if(s!==null)s.return=l;else for(s=l;s!==null;){if(s===e){s=null;break}if(l=s.sibling,l!==null){l.return=s.return,s=l;break}s=s.return}l=s}$e(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,r=o.children,Ur(e,n),i=Ze(i,o.unstable_observedBits),r=r(i),e.flags|=1,$e(t,e,r,n),e.child;case 14:return i=e.type,o=ct(i,e.pendingProps),o=ct(i.type,o),E0(t,e,i,o,r,n);case 15:return S0(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ct(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,ze(r)?(t=!0,js(e)):t=!1,Ur(e,n),s0(e,r,i),dc(e,r,i,n),Ec(null,e,r,!0,t,n);case 19:return B0(t,e,n);case 23:return Dc(t,e,n);case 24:return Dc(t,e,n)}throw Error(A(156,e.tag))};function vb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new vb(t,e,n,r)}function Wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kb(t){if(typeof t=="function")return Wc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ds)return 11;if(t===ps)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Wc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case en:return Qr(n.children,i,o,e);case Ch:s=8,i|=16;break;case tu:s=8,i|=1;break;case Ai:return t=nt(12,n,e,i|8),t.elementType=Ai,t.type=Ai,t.lanes=o,t;case Ni:return t=nt(13,n,e,i),t.type=Ni,t.elementType=Ni,t.lanes=o,t;case fs:return t=nt(19,n,e,i),t.elementType=fs,t.lanes=o,t;case lu:return Kc(n,i,o,e);case au:return t=nt(24,n,e,i),t.elementType=au,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nu:s=10;break e;case ru:s=9;break e;case ds:s=11;break e;case ps:s=14;break e;case iu:s=16,r=null;break e;case ou:s=22;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=nt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Qr(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function Kc(t,e,n,r){return t=nt(23,t,r,e),t.elementType=lu,t.lanes=n,t}function Jc(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function qc(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bb(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ru(0),this.expirationTimes=Ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ru(0),this.mutableSourceEagerHydrationData=null}function Db(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dl(t,e,n,r){var i=e.current,o=We(),s=gn(i);e:if(n){n=n._reactInternals;t:{if($n(n)!==n||n.tag!==1)throw Error(A(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(ze(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(A(171))}if(n.tag===1){var a=n.type;if(ze(a)){n=Hm(n,a,l);break e}}n=l}else n=cn;return e.context===null?e.context=n:e.pendingContext=n,e=fn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),pn(i,e),yn(i,s,o),s}function Yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gc(t,e){og(t,e),(t=t.alternate)&&og(t,e)}function Cb(){return null}function Qc(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new bb(t,e,n!=null&&n.hydrate===!0),e=nt(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,cc(e),t[jr]=n.current,Pm(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var i=e._getVersion;i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}Qc.prototype.render=function(t){dl(t,this._internalRoot,null,null)},Qc.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;dl(null,t,null,function(){e[jr]=null})};function wo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Eb(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Qc(t,0,e?{hydrate:!0}:void 0)}function fl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if(typeof i=="function"){var l=i;i=function(){var u=Yc(s);l.call(u)}}dl(e,s,t,i)}else{if(o=n._reactRootContainer=Eb(n,r),s=o._internalRoot,typeof i=="function"){var a=i;i=function(){var u=Yc(s);a.call(u)}}Q0(function(){dl(e,s,t,i)})}return Yc(s)}Jh=function(t){if(t.tag===13){var e=We();yn(t,4,e),Gc(t,4)}},Nu=function(t){if(t.tag===13){var e=We();yn(t,67108864,e),Gc(t,67108864)}},qh=function(t){if(t.tag===13){var e=We(),n=gn(t);yn(t,n,e),Gc(t,n)}},Yh=function(t,e){return e()},ku=function(t,e,n){switch(e){case"input":if(fu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bs(r);if(!i)throw Error(A(90));Ah(r),fu(r,i)}}}break;case"textarea":Fh(t,n);break;case"select":e=n.value,e!=null&&Sr(t,!!n.multiple,e,!1)}},bu=G0,$h=function(t,e,n,r,i){var o=I;I|=4;try{return Wn(98,t.bind(null,e,n,r,i))}finally{I=o,I===0&&(qr(),Dt())}},Du=function(){!(I&49)&&(db(),wn())},Vh=function(t,e){var n=I;I|=2;try{return t(e)}finally{I=n,I===0&&(qr(),Dt())}};function sg(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wo(e))throw Error(A(200));return Db(t,e,null,n)}var Sb={Events:[Qi,Lr,Bs,zh,_h,wn,{current:!1}]},xo={findFiberByHostInstance:Vn,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Ab={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wh(t),t===null?null:t.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||Cb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{nc=pl.inject(Ab),Hn=pl}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sb,Qe.createPortal=sg,Qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):Error(A(268,Object.keys(t)));return t=Wh(e),t=t===null?null:t.stateNode,t},Qe.flushSync=function(t,e){var n=I;if(n&48)return t(e);I|=1;try{if(t)return Wn(99,t.bind(null,e))}finally{I=n,Dt()}},Qe.hydrate=function(t,e,n){if(!wo(e))throw Error(A(200));return fl(null,t,e,!0,n)},Qe.render=function(t,e,n){if(!wo(e))throw Error(A(200));return fl(null,t,e,!1,n)},Qe.unmountComponentAtNode=function(t){if(!wo(t))throw Error(A(40));return t._reactRootContainer?(Q0(function(){fl(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1},Qe.unstable_batchedUpdates=G0,Qe.unstable_createPortal=function(t,e){return sg(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},Qe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wo(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return fl(t,e,n,!1,r)},Qe.version="17.0.2";function lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lg)}catch(t){console.error(t)}}lg(),yh.exports=Qe;var Xc=yh.exports;const ag=ot(Xc);class Nb extends Ev{constructor(){super(...arguments),this.contentComponent=null}}const Mb=({renderers:t})=>q.createElement(q.Fragment,null,Array.from(t).map(([e,n])=>ag.createPortal(n.reactElement,n.element,e)));class Tb extends q.Component{constructor(e){super(e),this.editorContentRef=q.createRef(),this.state={renderers:new Map}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=this,e.createNodeViews()}}componentWillUnmount(){const{editor:e}=this.props;if(!e||(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,...n}=this.props;return q.createElement(q.Fragment,null,q.createElement("div",{ref:this.editorContentRef,...n}),q.createElement(Mb,{renderers:this.state.renderers}))}}const Ob=q.memo(Tb),Fb=b.createContext({onDragStart:void 0}),Pb=()=>b.useContext(Fb);q.forwardRef((t,e)=>{const{onDragStart:n}=Pb(),r=t.as||"div";return q.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function Rb(){const[,t]=b.useState(0);return()=>t(e=>e+1)}const Zc=(t={},e=[])=>{const[n,r]=b.useState(null),i=Rb();return b.useEffect(()=>{let o=!0;const s=new Nb(t);return r(s),s.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{o&&i()})})}),()=>{s.destroy(),o=!1}},e),n},ed=t=>b.createElement("svg",{id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:{enableBackground:"new 0 0 50 50"},xmlSpace:"preserve",...t},b.createElement("path",{d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"},b.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})));let vo=typeof window<"u"?b.useLayoutEffect:b.useEffect;function Xr(t){let e=b.useRef(t);return vo(()=>{e.current=t},[t]),e}function hl(){let t=[],e=[],n={enqueue(r){e.push(r)},addEventListener(r,i,o,s){return r.addEventListener(i,o,s),n.add(()=>r.removeEventListener(i,o,s))},requestAnimationFrame(...r){let i=requestAnimationFrame(...r);return n.add(()=>cancelAnimationFrame(i))},nextFrame(...r){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...r))},setTimeout(...r){let i=setTimeout(...r);return n.add(()=>clearTimeout(i))},add(r){return t.push(r),()=>{let i=t.indexOf(r);if(i>=0){let[o]=t.splice(i,1);o()}}},dispose(){for(let r of t.splice(0))r()},async workQueue(){for(let r of e.splice(0))await r()}};return n}function Bb(){let[t]=b.useState(hl);return b.useEffect(()=>()=>t.dispose(),[t]),t}let ko=function(t){let e=Xr(t);return q.useCallback((...n)=>e.current(...n),[e])},td={serverHandoffComplete:!1};function nd(){let[t,e]=b.useState(td.serverHandoffComplete);return b.useEffect(()=>{t!==!0&&e(!0)},[t]),b.useEffect(()=>{td.serverHandoffComplete===!1&&(td.serverHandoffComplete=!0)},[]),t}var ug;let Ib=0;function cg(){return++Ib}let jb=(ug=q.useId)!=null?ug:function(){let t=nd(),[e,n]=q.useState(t?cg:null);return vo(()=>{e===null&&n(cg())},[e]),e!=null?""+e:void 0};function rt(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,rt),r}let Lb=Symbol();function dg(...t){let e=b.useRef(t);b.useEffect(()=>{e.current=t},[t]);let n=ko(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[Lb]))?void 0:n}var fg=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(fg||{}),jt=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(jt||{});function pg({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:o=!0,name:s}){let l=hg(e,t);if(o)return ml(l,n,r,s);let a=i??0;if(a&2){let{static:u=!1,...c}=l;if(u)return ml(c,n,r,s)}if(a&1){let{unmount:u=!0,...c}=l;return rt(u?0:1,{[0](){return null},[1](){return ml({...c,hidden:!0,style:{display:"none"}},n,r,s)}})}return ml(l,n,r,s)}function ml(t,e={},n,r){let{as:i=n,children:o,refName:s="ref",...l}=id(t,["unmount","static"]),a=t.ref!==void 0?{[s]:t.ref}:{},u=typeof o=="function"?o(e):o;l.className&&typeof l.className=="function"&&(l.className=l.className(e));let c={};if(i===b.Fragment&&Object.keys(mg(l)).length>0){if(!b.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`));return b.cloneElement(u,Object.assign({},hg(u.props,mg(id(l,["ref"]))),c,a))}return b.createElement(i,Object.assign({},id(l,["ref"]),i!==b.Fragment&&a,i!==b.Fragment&&c),u)}function hg(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](i,...o){let s=n[r];for(let l of s){if(i.defaultPrevented)return;l(i,...o)}}});return e}function rd(t){var e;return Object.assign(b.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function mg(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function id(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let od=b.createContext(null);od.displayName="OpenClosedContext";var bo=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(bo||{});function gg(){return b.useContext(od)}function zb({value:t,children:e}){return q.createElement(od.Provider,{value:t},e)}function yg(){let t=b.useRef(!1);return vo(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function _b(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function $b(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function sd(t,...e){t&&e.length>0&&t.classList.add(...e)}function ld(t,...e){t&&e.length>0&&t.classList.remove(...e)}var ad=(t=>(t.Ended="ended",t.Cancelled="cancelled",t))(ad||{});function Vb(t,e){let n=hl();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(t),[o,s]=[r,i].map(l=>{let[a=0]=l.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,c)=>c-u);return a});if(o+s!==0){let l=[];l.push(n.addEventListener(t,"transitionrun",a=>{a.target===a.currentTarget&&(l.splice(0).forEach(u=>u()),l.push(n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e("ended"),l.splice(0).forEach(c=>c()))}),n.addEventListener(t,"transitioncancel",u=>{u.target===u.currentTarget&&(e("cancelled"),l.splice(0).forEach(c=>c()))})))}))}else e("ended");return n.add(()=>e("cancelled")),n.dispose}function Ub(t,e,n,r){let i=n?"enter":"leave",o=hl(),s=r!==void 0?$b(r):()=>{},l=rt(i,{enter:()=>e.enter,leave:()=>e.leave}),a=rt(i,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=rt(i,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return ld(t,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),sd(t,...l,...u),o.nextFrame(()=>{ld(t,...u),sd(t,...a),Vb(t,c=>(c==="ended"&&(ld(t,...l),sd(t,...e.entered)),s(c)))}),o.dispose}function Hb({container:t,direction:e,classes:n,events:r,onStart:i,onStop:o}){let s=yg(),l=Bb(),a=Xr(e),u=ko(()=>rt(a.current,{enter:()=>r.current.beforeEnter(),leave:()=>r.current.beforeLeave(),idle:()=>{}})),c=ko(()=>rt(a.current,{enter:()=>r.current.afterEnter(),leave:()=>r.current.afterLeave(),idle:()=>{}}));vo(()=>{let f=hl();l.add(f.dispose);let d=t.current;if(d&&a.current!=="idle"&&s.current)return f.dispose(),u(),i.current(a.current),f.add(Ub(d,n.current,a.current==="enter",p=>{f.dispose(),rt(p,{[ad.Ended](){c(),o.current(a.current)},[ad.Cancelled]:()=>{}})})),f.dispose},[e])}function Qn(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let gl=b.createContext(null);gl.displayName="TransitionContext";var Wb=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Wb||{});function Kb(){let t=b.useContext(gl);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Jb(){let t=b.useContext(yl);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let yl=b.createContext(null);yl.displayName="NestingContext";function wl(t){return"children"in t?wl(t.children):t.current.filter(({state:e})=>e==="visible").length>0}function wg(t){let e=Xr(t),n=b.useRef([]),r=yg(),i=ko((s,l=jt.Hidden)=>{let a=n.current.findIndex(({id:u})=>u===s);a!==-1&&(rt(l,{[jt.Unmount](){n.current.splice(a,1)},[jt.Hidden](){n.current[a].state="hidden"}}),_b(()=>{var u;!wl(n)&&r.current&&((u=e.current)==null||u.call(e))}))}),o=ko(s=>{let l=n.current.find(({id:a})=>a===s);return l?l.state!=="visible"&&(l.state="visible"):n.current.push({id:s,state:"visible"}),()=>i(s,jt.Unmount)});return b.useMemo(()=>({children:n,register:o,unregister:i}),[o,i,n])}function qb(){}let Yb=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function xg(t){var e;let n={};for(let r of Yb)n[r]=(e=t[r])!=null?e:qb;return n}function Gb(t){let e=b.useRef(xg(t));return b.useEffect(()=>{e.current=xg(t)},[t]),e}let Qb="div",vg=fg.RenderStrategy,kg=rd(function(t,e){let{beforeEnter:n,afterEnter:r,beforeLeave:i,afterLeave:o,enter:s,enterFrom:l,enterTo:a,entered:u,leave:c,leaveFrom:f,leaveTo:d,...p}=t,m=b.useRef(null),y=dg(m,e),[h,g]=b.useState("visible"),x=p.unmount?jt.Unmount:jt.Hidden,{show:k,appear:v,initial:E}=Kb(),{register:D,unregister:N}=Jb(),C=b.useRef(null),M=jb();b.useEffect(()=>{if(M)return D(M)},[D,M]),b.useEffect(()=>{if(x===jt.Hidden&&M){if(k&&h!=="visible"){g("visible");return}rt(h,{hidden:()=>N(M),visible:()=>D(M)})}},[h,M,D,N,k,x]);let J=Xr({enter:Qn(s),enterFrom:Qn(l),enterTo:Qn(a),entered:Qn(u),leave:Qn(c),leaveFrom:Qn(f),leaveTo:Qn(d)}),Dn=Gb({beforeEnter:n,afterEnter:r,beforeLeave:i,afterLeave:o}),he=nd();b.useEffect(()=>{if(he&&h==="visible"&&m.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[m,h,he]);let W=E&&!v,pt=(()=>!he||W||C.current===k?"idle":k?"enter":"leave")(),se=b.useRef(!1),Te=wg(()=>{se.current||(g("hidden"),N(M))});Hb({container:m,classes:J,events:Dn,direction:pt,onStart:Xr(()=>{se.current=!0}),onStop:Xr(re=>{se.current=!1,re==="leave"&&!wl(Te)&&(g("hidden"),N(M))})}),b.useEffect(()=>{!W||(x===jt.Hidden?C.current=null:C.current=k)},[k,W,h]);let Cn=p,nr={ref:y};return q.createElement(yl.Provider,{value:Te},q.createElement(zb,{value:rt(h,{visible:bo.Open,hidden:bo.Closed})},pg({ourProps:nr,theirProps:Cn,defaultTag:Qb,features:vg,visible:h==="visible",name:"Transition.Child"})))}),ud=rd(function(t,e){let{show:n,appear:r=!1,unmount:i,...o}=t,s=b.useRef(null),l=dg(s,e);nd();let a=gg();if(n===void 0&&a!==null&&(n=rt(a,{[bo.Open]:!0,[bo.Closed]:!1})),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=b.useState(n?"visible":"hidden"),f=wg(()=>{c("hidden")}),[d,p]=b.useState(!0),m=b.useRef([n]);vo(()=>{d!==!1&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))},[m,n]);let y=b.useMemo(()=>({show:n,appear:r,initial:d}),[n,r,d]);b.useEffect(()=>{if(n)c("visible");else if(!wl(f))c("hidden");else{let g=s.current;if(!g)return;let x=g.getBoundingClientRect();x.x===0&&x.y===0&&x.width===0&&x.height===0&&c("hidden")}},[n,f]);let h={unmount:i};return q.createElement(yl.Provider,{value:f},q.createElement(gl.Provider,{value:y},pg({ourProps:{...h,as:b.Fragment,children:q.createElement(kg,{ref:l,...h,...o})},theirProps:{},defaultTag:b.Fragment,features:vg,visible:u==="visible",name:"Transition"})))}),Xb=rd(function(t,e){let n=b.useContext(gl)!==null,r=gg()!==null;return q.createElement(q.Fragment,null,!n&&r?q.createElement(ud,{ref:e,...t}):q.createElement(kg,{ref:e,...t}))}),Xn=Object.assign(ud,{Child:Xb,Root:ud});function Zb(t,e){const n=b.useRef(null),r=b.useCallback(i=>{n.current&&e&&e(n.current),i&&t&&t(i),n.current=i},[t,e]);return[n,r]}function eD(t,e){const n=b.useRef(0);b.useEffect(()=>{if(n.current>=2)return t();n.current+=1},e)}function tD(t){const{popup:e}=Y();return(e==null?void 0:e.type)===t}function nD(t){return b.useMemo(()=>ty(t),[t])}const rD=({submit:t,progress:e,setProgress:n,close:r,reduced:i,isOpen:o,editor:s,submitText:l,submitSize:a})=>{let u=null;e==="sending"&&(l=null,u=w.jsx(ed,{className:"h-[24px] w-[24px] fill-white dark:fill-black"}));const c=b.useCallback(d=>{if(s!=null&&s.isFocused){d.stopPropagation();return}},[s]),f=b.useCallback(async()=>{if(!(!s||s.isEmpty)){n("sending");try{await t({html:s.getHTML()})}catch{n("error");return}return r?r():(n("sent"),s.chain().clearContent().blur().run()),!1}},[n,s,t,r]);return b.useEffect(()=>{const d=p=>{if(p.metaKey||p.ctrlKey){p.key==="Enter"&&(s!=null&&s.isFocused)&&(f(),s==null||s.commands.blur());return}if(p.key==="Escape"){s!=null&&s.isFocused&&(r?r():s==null||s.commands.blur());return}};return window.addEventListener("keydown",d,{passive:!0}),()=>{window.removeEventListener("keydown",d,{passive:!0})}},[s,r,f]),w.jsxs("div",{className:`relative w-full pl-[52px] transition-[padding] delay-100 duration-150 ${i&&"pl-0"} ${o&&"pl-[1px] pt-[64px] sm:pl-[52px]"}`,children:[w.jsx("div",{className:`shadow-form hover:shadow-formxl w-full rounded-md border border-none border-slate-50 bg-[rgba(255,255,255,0.9)] px-3 py-4 font-sans text-[16.5px] leading-normal transition-all delay-100 duration-150 focus:outline-0 dark:border-none dark:bg-[rgba(255,255,255,0.08)] dark:text-neutral-300 dark:shadow-transparent ${o?"min-h-[144px] cursor-text pb-[68px] pt-2":"min-h-[48px] cursor-pointer overflow-hidden hover:border-slate-300"}
            `,"data-testid":"form-editor",children:w.jsx(Ob,{editor:s,onMouseDown:c,onTouchStart:c})}),w.jsxs("div",{className:"absolute bottom-[9px] right-[9px] flex space-x-4 transition-[opacity] duration-150",children:[r&&w.jsx("button",{className:"ml-2.5 font-sans text-sm font-medium text-neutral-500 outline-0 dark:text-neutral-400",type:"button",onClick:r,children:"Cancel"}),w.jsxs("button",{className:`flex w-auto items-center justify-center sm:w-[128px] ${a==="medium"&&"sm:w-[100px]"} ${a==="small"&&"sm:w-[64px]"} h-[39px] rounded-[6px] border bg-neutral-900 px-3 py-2 text-center font-sans text-sm font-semibold text-white outline-0 transition-[opacity] duration-150 dark:bg-[rgba(255,255,255,0.9)] dark:text-neutral-800`,"data-testid":"submit-form-button",type:"button",onClick:f,children:[w.jsx("span",{children:u}),l&&w.jsx("span",{children:l})]})]})]})},iD=({show:t,name:e,expertise:n,editName:r,editExpertise:i})=>w.jsxs(Xn,{enter:"transition duration-500 delay-100 ease-in-out",enterFrom:"opacity-0 -translate-x-2",enterTo:"opacity-100 translate-x-0",leave:"transition-none duration-0",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:t,children:[w.jsx("div",{className:"font-sans text-[17px] font-bold tracking-tight text-[rgb(23,23,23)] dark:text-[rgba(255,255,255,0.85)]","data-testid":"member-name",onClick:r,children:e||"Anonymous"}),w.jsx("div",{className:"flex items-baseline justify-start",children:w.jsxs("button",{className:`group flex max-w-[80%] items-center justify-start whitespace-nowrap text-left font-sans text-[14px] tracking-tight text-[rgba(0,0,0,0.5)] transition duration-150 hover:text-[rgba(0,0,0,0.75)] dark:text-[rgba(255,255,255,0.5)] dark:hover:text-[rgba(255,255,255,0.4)] sm:max-w-[90%] ${!n&&"text-[rgba(0,0,0,0.3)] hover:text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.3)]"}`,type:"button",onClick:i,children:[w.jsx("span",{className:"... overflow-hidden text-ellipsis",children:n||"Add your expertise"}),n&&w.jsx(sy,{className:"ml-1 h-[12px] w-[12px] translate-x-[-6px] stroke-[rgba(0,0,0,0.5)] opacity-0 transition-all duration-100 ease-out group-hover:translate-x-0 group-hover:stroke-[rgba(0,0,0,0.75)] group-hover:opacity-100 dark:stroke-[rgba(255,255,255,0.5)] dark:group-hover:stroke-[rgba(255,255,255,0.3)]"})]})})]}),bg=({comment:t,submit:e,submitText:n,submitSize:r,close:i,editor:o,reduced:s,isOpen:l})=>{var E,D;const{member:a,dispatchAction:u}=Y(),c=tD("addDetailsPopup"),[f,d]=b.useState("default"),p=b.useRef(null),m=(a==null?void 0:a.name)??((E=t==null?void 0:t.member)==null?void 0:E.name),y=(a==null?void 0:a.expertise)??((D=t==null?void 0:t.member)==null?void 0:D.expertise);(f==="sending"||m&&c)&&(l=!0);const h=N=>{if(o!=null&&o.isFocused){N.preventDefault();return}},g=b.useCallback(N=>{var C;(C=o==null?void 0:o.commands)==null||C.blur(),u("openPopup",{type:"addDetailsPopup",expertiseAutofocus:N.expertiseAutofocus??!1,callback:function(M){!o||!p.current||M&&(o.setEditable(!0),o.commands.focus())}})},[o,u,p]),x=b.useCallback(()=>{g({expertiseAutofocus:!1})},[g]),k=b.useCallback(()=>{g({expertiseAutofocus:!0})},[g]),v=b.useCallback(()=>{if(o&&!o.isFocused){if(!m){x();return}o.commands.focus()}},[o,x,m]);return b.useEffect(()=>{o&&o.setEditable(!!m&&f!=="sending")},[o,m,f]),w.jsx("form",{ref:p,className:`-mx-3 mb-10 mt-[-10px] rounded-md px-3 pb-2 pt-3 transition duration-200 ${l?"cursor-default":"cursor-pointer"} ${s&&"pl-1"}`,"data-testid":"form",onClick:v,onMouseDown:h,onTouchStart:h,children:w.jsxs("div",{className:"relative w-full",children:[w.jsx("div",{className:"pr-[1px] font-sans leading-normal dark:text-neutral-300",children:w.jsx(rD,{close:i,editor:o,isOpen:l,progress:f,reduced:s,setProgress:d,submit:e,submitSize:r,submitText:n})}),w.jsxs("div",{className:"absolute left-0 top-1 flex h-12 w-full items-center justify-start",children:[w.jsx("div",{className:"pointer-events-none mr-3 grow-0",children:w.jsx(Yd,{comment:t})}),w.jsx("div",{className:"grow-1 w-full",children:w.jsx(iD,{editExpertise:k,editName:x,expertise:y,name:m,show:l})})]})]})})},Dg=({editor:t,submit:e,close:n,closeIfNotChanged:r,submitText:i,submitSize:o})=>{const{dispatchAction:s,secundaryFormCount:l}=Y();b.useEffect(()=>(s("increaseSecundaryFormCount",{}),()=>{s("decreaseSecundaryFormCount",{})}),[s]),eD(()=>{l>1&&r()},[l]);const a=Ro();return w.jsx("div",{className:"mt-[-20px]",children:w.jsx(bg,{close:n,editor:t,isOpen:!0,reduced:a,submit:e,submitSize:o,submitText:i})})},oD=/^\s*>\s$/,sD=Zt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Di(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ov({find:oD,type:this.type})]}}),lD=Zt.create({name:"doc",topNode:!0,content:"block+"}),aD=Zt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Di(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const f=a.filter(d=>l.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});function cd(t){this.j={},this.jr=[],this.jd=null,this.t=t}cd.prototype={accepts:function(){return!!this.t},tt:function(e,n){if(n&&n.j)return this.j[e]=n,n;var r=n,i=this.j[e];if(i)return r&&(i.t=r),i;i=K();var o=xl(this,e);return o?(Object.assign(i.j,o.j),i.jr.append(o.jr),i.jr=o.jd,i.t=r||o.t):i.t=r,this.j[e]=i,i}};var K=function(){return new cd},B=function(e){return new cd(e)},T=function(e,n,r){e.j[n]||(e.j[n]=r)},pe=function(e,n,r){e.jr.push([n,r])},xl=function(e,n){var r=e.j[n];if(r)return r;for(var i=0;i<e.jr.length;i++){var o=e.jr[i][0],s=e.jr[i][1];if(o.test(n))return s}return e.jd},_=function(e,n,r){for(var i=0;i<n.length;i++)T(e,n[i],r)},uD=function(e,n){for(var r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];T(e,i,o)}},Zn=function(e,n,r,i){for(var o=0,s=n.length,l;o<s&&(l=e.j[n[o]]);)e=l,o++;if(o>=s)return[];for(;o<s-1;)l=i(),T(e,n[o],l),e=l,o++;T(e,n[s-1],r)},ft="DOMAIN",Lt="LOCALHOST",Nt="TLD",it="NUM",Zr="PROTOCOL",dd="MAILTO",Cg="WS",fd="NL",ei="OPENBRACE",Do="OPENBRACKET",Co="OPENANGLEBRACKET",Eo="OPENPAREN",er="CLOSEBRACE",ti="CLOSEBRACKET",ni="CLOSEANGLEBRACKET",ri="CLOSEPAREN",vl="AMPERSAND",kl="APOSTROPHE",bl="ASTERISK",ii="AT",Dl="BACKSLASH",Cl="BACKTICK",El="CARET",So="COLON",pd="COMMA",Sl="DOLLAR",kn="DOT",Al="EQUALS",hd="EXCLAMATION",Nl="HYPHEN",Ml="PERCENT",Tl="PIPE",Ol="PLUS",Fl="POUND",Pl="QUERY",md="QUOTE",gd="SEMI",zt="SLASH",Rl="TILDE",Bl="UNDERSCORE",Il="SYM",cD=Object.freeze({__proto__:null,DOMAIN:ft,LOCALHOST:Lt,TLD:Nt,NUM:it,PROTOCOL:Zr,MAILTO:dd,WS:Cg,NL:fd,OPENBRACE:ei,OPENBRACKET:Do,OPENANGLEBRACKET:Co,OPENPAREN:Eo,CLOSEBRACE:er,CLOSEBRACKET:ti,CLOSEANGLEBRACKET:ni,CLOSEPAREN:ri,AMPERSAND:vl,APOSTROPHE:kl,ASTERISK:bl,AT:ii,BACKSLASH:Dl,BACKTICK:Cl,CARET:El,COLON:So,COMMA:pd,DOLLAR:Sl,DOT:kn,EQUALS:Al,EXCLAMATION:hd,HYPHEN:Nl,PERCENT:Ml,PIPE:Tl,PLUS:Ol,POUND:Fl,QUERY:Pl,QUOTE:md,SEMI:gd,SLASH:zt,TILDE:Rl,UNDERSCORE:Bl,SYM:Il}),Eg="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw vermögensberater-ctb vermögensberatung-pwb ελ ευ бг бел дети ею католик ком қаз мкд мон москва онлайн орг рус рф сайт срб укр გე հայ ישראל קום ابوظبي اتصالات ارامكو الاردن البحرين الجزائر السعودية العليان المغرب امارات ایران بارت بازار بھارت بيتك پاکستان ڀارت تونس سودان سورية شبكة عراق عرب عمان فلسطين قطر كاثوليك كوم مصر مليسيا موريتانيا موقع همراه कॉम नेट भारत भारतम् भारोत संगठन বাংলা ভারত ভাৰত ਭਾਰਤ ભારત ଭାରତ இந்தியா இலங்கை சிங்கப்பூர் భారత్ ಭಾರತ ഭാരതം ලංකා คอม ไทย ລາວ 닷넷 닷컴 삼성 한국 アマゾン グーグル クラウド コム ストア セール ファッション ポイント みんな 世界 中信 中国 中國 中文网 亚马逊 企业 佛山 信息 健康 八卦 公司 公益 台湾 台灣 商城 商店 商标 嘉里 嘉里大酒店 在线 大众汽车 大拿 天主教 娱乐 家電 广东 微博 慈善 我爱你 手机 招聘 政务 政府 新加坡 新闻 时尚 書籍 机构 淡马锡 游戏 澳門 点看 移动 组织机构 网址 网店 网站 网络 联通 诺基亚 谷歌 购物 通販 集团 電訊盈科 飞利浦 食品 餐厅 香格里拉 香港".split(" "),Ao=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,No=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Mo=/\uFE0F/,To=/\d/,Sg=/\s/;function dD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=K(),n=B(it),r=B(ft),i=K(),o=B(Cg),s=[[To,r],[Ao,r],[No,r],[Mo,r]],l=function(){var v=B(ft);return v.j={"-":i},v.jr=[].concat(s),v},a=function(v){var E=l();return E.t=v,E};uD(e,[["'",B(kl)],["{",B(ei)],["[",B(Do)],["<",B(Co)],["(",B(Eo)],["}",B(er)],["]",B(ti)],[">",B(ni)],[")",B(ri)],["&",B(vl)],["*",B(bl)],["@",B(ii)],["`",B(Cl)],["^",B(El)],[":",B(So)],[",",B(pd)],["$",B(Sl)],[".",B(kn)],["=",B(Al)],["!",B(hd)],["-",B(Nl)],["%",B(Ml)],["|",B(Tl)],["+",B(Ol)],["#",B(Fl)],["?",B(Pl)],['"',B(md)],["/",B(zt)],[";",B(gd)],["~",B(Rl)],["_",B(Bl)],["\\",B(Dl)]]),T(e,`
`,B(fd)),pe(e,Sg,o),T(o,`
`,K()),pe(o,Sg,o);for(var u=0;u<Eg.length;u++)Zn(e,Eg[u],a(Nt),l);var c=l(),f=l(),d=l(),p=l();Zn(e,"file",c,l),Zn(e,"ftp",f,l),Zn(e,"http",d,l),Zn(e,"mailto",p,l);var m=l(),y=B(Zr),h=B(dd);T(f,"s",m),T(f,":",y),T(d,"s",m),T(d,":",y),T(c,":",y),T(m,":",y),T(p,":",h);for(var g=l(),x=0;x<t.length;x++)Zn(e,t[x],g,l);return T(g,":",y),Zn(e,"localhost",a(Lt),l),pe(e,To,n),pe(e,Ao,r),pe(e,No,r),pe(e,Mo,r),pe(n,To,n),pe(n,Ao,r),pe(n,No,r),pe(n,Mo,r),T(n,"-",i),T(r,"-",i),T(i,"-",i),pe(r,To,r),pe(r,Ao,r),pe(r,No,r),pe(r,Mo,r),pe(i,To,r),pe(i,Ao,r),pe(i,No,r),pe(i,Mo,r),e.jd=B(Il),e}function fD(t,e){for(var n=pD(e.replace(/[A-Z]/g,function(p){return p.toLowerCase()})),r=n.length,i=[],o=0,s=0;s<r;){for(var l=t,a=null,u=0,c=null,f=-1,d=-1;s<r&&(a=xl(l,n[s]));)l=a,l.accepts()?(f=0,d=0,c=l):f>=0&&(f+=n[s].length,d++),u+=n[s].length,o+=n[s].length,s++;o-=f,s-=d,u-=f,i.push({t:c.t,v:e.substr(o-u,u),s:o-u,e:o})}return i}function pD(t){for(var e=[],n=t.length,r=0;r<n;){var i=t.charCodeAt(r),o=void 0,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function jl(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jl=function(e){return typeof e}:jl=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}var Me={defaultProtocol:"http",events:null,format:Ag,formatHref:Ag,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function hD(t){t=t||{},this.defaultProtocol="defaultProtocol"in t?t.defaultProtocol:Me.defaultProtocol,this.events="events"in t?t.events:Me.events,this.format="format"in t?t.format:Me.format,this.formatHref="formatHref"in t?t.formatHref:Me.formatHref,this.nl2br="nl2br"in t?t.nl2br:Me.nl2br,this.tagName="tagName"in t?t.tagName:Me.tagName,this.target="target"in t?t.target:Me.target,this.rel="rel"in t?t.rel:Me.rel,this.validate="validate"in t?t.validate:Me.validate,this.truncate="truncate"in t?t.truncate:Me.truncate,this.className="className"in t?t.className:Me.className,this.attributes=t.attributes||Me.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in t)?t.ignoreTags:Me.ignoreTags,n=0;n<e.length;n++)this.ignoreTags.push(e[n].toUpperCase())}hD.prototype={resolve:function(e){var n=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",n,e),tagName:this.get("tagName",n,e),className:this.get("className",n,e),target:this.get("target",n,e),rel:this.get("rel",n,e),events:this.getObject("events",n,e),attributes:this.getObject("attributes",n,e),truncate:this.get("truncate",n,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,n,r){var i=this[e];if(!i)return i;var o;switch(jl(i)){case"function":return i(n,r.t);case"object":return o=r.t in i?i[r.t]:Me[e],typeof o=="function"?o(n,r.t):o}return i},getObject:function(e,n,r){var i=this[e];return typeof i=="function"?i(n,r.t):i}};function Ag(t){return t}function mD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(t.prototype);for(var i in n)r[i]=n[i];return r.constructor=e,e.prototype=r,e}function Ll(){}Ll.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function tr(t,e){function n(r,i){this.t=t,this.v=r,this.tk=i}return mD(Ll,n,e),n}var Ng=tr("email",{isLink:!0}),yd=tr("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),wd=tr("text"),Mg=tr("nl"),bn=tr("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me.defaultProtocol,n=this.tk,r=!1,i=!1,o=[],s=0;n[s].t===Zr;)r=!0,o.push(n[s].v),s++;for(;n[s].t===zt;)i=!0,o.push(n[s].v),s++;for(;s<n.length;s++)o.push(n[s].v);return o=o.join(""),r||i||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===Zr}}),gD=Object.freeze({__proto__:null,MultiToken:Ll,Base:Ll,createTokenClass:tr,MailtoEmail:Ng,Email:yd,Text:wd,Nl:Mg,Url:bn});function yD(){var t=K(),e=K(),n=K(),r=K(),i=K(),o=K(),s=K(),l=B(bn),a=K(),u=B(bn),c=B(bn),f=K(),d=K(),p=K(),m=K(),y=K(),h=B(bn),g=B(bn),x=B(bn),k=B(bn),v=K(),E=K(),D=K(),N=K(),C=K(),M=K(),J=B(yd),Dn=K(),he=B(yd),W=B(Ng),pt=K(),se=K(),Te=K(),Cn=K(),nr=B(Mg);T(t,fd,nr),T(t,Zr,e),T(t,dd,n),T(e,zt,r),T(r,zt,i),T(t,Nt,o),T(t,ft,o),T(t,Lt,l),T(t,it,o),T(i,Nt,c),T(i,ft,c),T(i,it,c),T(i,Lt,c),T(o,kn,s),T(C,kn,M),T(s,Nt,l),T(s,ft,o),T(s,it,o),T(s,Lt,o),T(M,Nt,J),T(M,ft,C),T(M,it,C),T(M,Lt,C),T(l,kn,s),T(J,kn,M),T(l,So,a),T(l,zt,c),T(a,it,u),T(u,zt,c),T(J,So,Dn),T(Dn,it,he);var re=[vl,bl,ii,Dl,Cl,El,Sl,ft,Al,Nl,Lt,it,Ml,Tl,Ol,Fl,Zr,zt,Il,Rl,Nt,Bl],me=[kl,ni,er,ti,ri,So,pd,kn,hd,Co,ei,Do,Eo,Pl,md,gd];T(c,ei,d),T(c,Do,p),T(c,Co,m),T(c,Eo,y),T(f,ei,d),T(f,Do,p),T(f,Co,m),T(f,Eo,y),T(d,er,c),T(p,ti,c),T(m,ni,c),T(y,ri,c),T(h,er,c),T(g,ti,c),T(x,ni,c),T(k,ri,c),T(v,er,c),T(E,ti,c),T(D,ni,c),T(N,ri,c),_(d,re,h),_(p,re,g),_(m,re,x),_(y,re,k),_(d,me,v),_(p,me,E),_(m,me,D),_(y,me,N),_(h,re,h),_(g,re,g),_(x,re,x),_(k,re,k),_(h,me,h),_(g,me,g),_(x,me,x),_(k,me,k),_(v,re,h),_(E,re,g),_(D,re,x),_(N,re,k),_(v,me,v),_(E,me,E),_(D,me,D),_(N,me,N),_(c,re,c),_(f,re,c),_(c,me,f),_(f,me,f),T(n,Nt,W),T(n,ft,W),T(n,it,W),T(n,Lt,W),_(W,re,W),_(W,me,pt),_(pt,re,W),_(pt,me,pt);var O=[vl,kl,bl,Dl,Cl,El,er,Sl,ft,Al,Nl,it,ei,Ml,Tl,Ol,Fl,Pl,zt,Il,Rl,Nt,Bl];return _(o,O,se),T(o,ii,Te),_(l,O,se),T(l,ii,Te),_(s,O,se),_(se,O,se),T(se,ii,Te),T(se,kn,Cn),_(Cn,O,se),T(Te,Nt,C),T(Te,ft,C),T(Te,it,C),T(Te,Lt,J),t}function wD(t,e,n){for(var r=n.length,i=0,o=[],s=[];i<r;){for(var l=t,a=null,u=null,c=0,f=null,d=-1;i<r&&!(a=xl(l,n[i].t));)s.push(n[i++]);for(;i<r&&(u=a||xl(l,n[i].t));)a=null,l=u,l.accepts()?(d=0,f=l):d>=0&&d++,i++,c++;if(d<0)for(var p=i-c;p<i;p++)s.push(n[p]);else{s.length>0&&(o.push(xd(wd,e,s)),s=[]),i-=d,c-=d;var m=f.t,y=n.slice(i-c,i);o.push(xd(m,e,y))}}return s.length>0&&o.push(xd(wd,e,s)),o}function xd(t,e,n){var r=n[0].s,i=n[n.length-1].e,o=e.substr(r,i-r);return new t(o,n)}var xD=typeof console<"u"&&console&&console.warn||function(){},Ke={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function vD(t){if(Ke.initialized&&xD('linkifyjs: already initialized - will not register custom protocol "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(t))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");Ke.customProtocols.push(t)}function kD(){Ke.scanner={start:dD(Ke.customProtocols),tokens:cD},Ke.parser={start:yD(),tokens:gD};for(var t={createTokenClass:tr},e=0;e<Ke.pluginQueue.length;e++)Ke.pluginQueue[e][1]({scanner:Ke.scanner,parser:Ke.parser,utils:t});Ke.initialized=!0}function Tg(t){return Ke.initialized||kD(),wD(Ke.parser.start,t,fD(Ke.scanner.start,t))}function vd(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=Tg(t),r=[],i=0;i<n.length;i++){var o=n[i];o.isLink&&(!e||o.t===e)&&r.push(o.toObject())}return r}function Og(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=Tg(t);return n.length===1&&n[0].isLink&&(!e||n[0].t===e)}function bD(t){return new qe({key:new Vt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,l=Sv(n.doc,[...e]),{mapping:a}=l;if(Tv(l).forEach(({oldRange:c,newRange:f})=>{Qa(c.from,c.to,n.doc).filter(d=>d.mark.type===t.type).forEach(d=>{const p=a.map(d.from),m=a.map(d.to),y=Qa(p,m,r.doc).filter(E=>E.mark.type===t.type);if(!y.length)return;const h=y[0],g=n.doc.textBetween(d.from,d.to,void 0," "),x=r.doc.textBetween(h.from,h.to,void 0," "),k=Og(g),v=Og(x);k&&!v&&s.removeMark(h.from,h.to,t.type)}),Av(r.doc,f,d=>d.isTextblock).forEach(d=>{const p=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");vd(p).filter(m=>m.isLink).filter(m=>t.validate?t.validate(m.value):!0).map(m=>({...m,from:d.pos+m.start+1,to:d.pos+m.end+1})).filter(m=>{const y=f.from>=m.from&&f.from<=m.to,h=f.to>=m.from&&f.to<=m.to;return y||h}).forEach(m=>{s.addMark(m.from,m.to,t.type.create({href:m.href}))})})}),!!s.steps.length)return s}})}function DD(t){return new qe({key:new Vt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i;const o=gh(e.state,t.type.name);return((i=r.target)===null||i===void 0?void 0:i.closest("a"))&&o.href?(window.open(o.href,o.target),!0):!1}}})}function CD(t){return new qe({key:new Vt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const a=vd(l).find(u=>u.isLink&&u.value===l);return!l||!a?!1:(t.editor.commands.setMark(t.type,{href:a.href}),!0)}}})}const ED=us.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(vD)},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:t}){return["a",Di(this.options.HTMLAttributes,t),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Fv({find:t=>vd(t).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(bD({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(DD({type:this.type})),this.options.linkOnPaste&&t.push(CD({editor:this.editor,type:this.type})),t}}),SD=Zt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Di(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),AD=kt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new qe({props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];return n?(t.descendants((o,s)=>{const l=r>=s&&r<=s+o.nodeSize,a=!o.isLeaf&&!o.childCount;if((l||!this.options.showOnlyCurrent)&&a){const u=[this.options.emptyNodeClass];this.editor.isEmpty&&u.push(this.options.emptyEditorClass);const c=Ge.node(s,s+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:s,hasAnchor:l}):this.options.placeholder});i.push(c)}return this.options.includeChildren}),ye.create(t,i)):null}}})]}}),ND=Zt.create({name:"text",group:"inline"});function kd({placeholder:t,autofocus:e=!1,content:n=""}){return{extensions:[lD,ND,SD,ED.configure({openOnClick:!1}),AD.configure({placeholder:t,showOnlyWhenEditable:!1}),sD.configure({}),aD.configure({})],content:n,autofocus:e,editorProps:{attributes:{class:"gh-comment-content focus:outline-0","data-testid":"editor"}},parseOptions:{preserveWhitespace:"full"}}}const MD=({comment:t,parent:e,close:n})=>{const{dispatchAction:r}=Y(),i={placeholder:"Edit this comment",autofocus:!1,content:t.html},o=Zc({...kd(i)});b.useEffect(()=>{o&&o.chain().focus().command(({tr:u,commands:c})=>c.setTextSelection({from:u.doc.content.size,to:u.doc.content.size})).run()},[o]);const l={submitText:"Save",submitSize:"small",submit:b.useCallback(async({html:u})=>{await r("editComment",{comment:{id:t.id,html:u},parent:e})},[e,t,r])},a=b.useCallback(()=>{(o==null?void 0:o.getHTML())===t.html&&n()},[o,n,t.html]);return w.jsx(Dg,{close:n,closeIfNotChanged:a,editor:o,...l})},TD=t=>b.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"black",...t},b.createElement("path",{d:"M8.00025 13.8739L2.46073 8.09636C1.97388 7.60989 1.65255 6.98248 1.54231 6.30312C1.43208 5.62376 1.53853 4.92694 1.84658 4.31148V4.31148C2.07887 3.84703 2.41819 3.44443 2.83659 3.13684C3.25499 2.82925 3.74049 2.62547 4.25308 2.54231C4.76567 2.45914 5.29069 2.49896 5.78488 2.65849C6.27906 2.81802 6.72827 3.09269 7.09549 3.45987L8.00025 4.36406L8.90502 3.45987C9.27224 3.09269 9.72145 2.81802 10.2156 2.65849C10.7098 2.49896 11.2348 2.45914 11.7474 2.54231C12.26 2.62547 12.7455 2.82925 13.1639 3.13684C13.5823 3.44443 13.9216 3.84703 14.1539 4.31148C14.4616 4.9267 14.5678 5.62311 14.4577 6.30208C14.3476 6.98105 14.0267 7.60817 13.5404 8.09462L8.00025 13.8739Z",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})),OD=({comment:t})=>{const{dispatchAction:e,member:n,commentsEnabled:r}=Y(),[i,o]=b.useState(""),s=r==="paid",l=n&&!!n.paid,a=n&&(l||!s),u=()=>{a&&(t.liked?e("unlikeComment",t):(e("likeComment",t),o("animate-heartbeat"),setTimeout(()=>{o("")},400)))},c=a?"button":"span";let f="cursor-pointer";return a||(f="cursor-text"),w.jsxs(c,{className:`duration-50 group flex items-center font-sans text-sm outline-0 transition-all ease-linear ${t.liked?"text-[rgba(0,0,0,0.9)] dark:text-[rgba(255,255,255,0.9)]":"text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]"} ${!t.liked&&a&&"hover:text-[rgba(0,0,0,0.75)] hover:dark:text-[rgba(255,255,255,0.25)]"} ${f}`,"data-testid":"like-button",type:"button",onClick:u,children:[w.jsx(TD,{className:i+` mr-[6px] ${t.liked?"fill-[rgba(0,0,0,0.9)] stroke-[rgba(0,0,0,0.9)] dark:fill-[rgba(255,255,255,0.9)] dark:stroke-[rgba(255,255,255,0.9)]":"stroke-[rgba(0,0,0,0.5)] dark:stroke-[rgba(255,255,255,0.5)]"} ${!t.liked&&a&&"group-hover:stroke-[rgba(0,0,0,0.75)] dark:group-hover:stroke-[rgba(255,255,255,0.25)]"} transition duration-50 ease-linear`}),t.count.likes]})},Fg=({comment:t,close:e})=>{const{dispatchAction:n}=Y(),r=()=>{n("hideComment",t),e()},i=()=>{n("showComment",t),e()},o=t.status!=="published";return w.jsx("div",{className:"flex flex-col",children:o?w.jsxs("button",{className:"w-full text-left text-[14px]",type:"button",onClick:i,children:[w.jsx("span",{children:"Show "}),w.jsx("span",{className:"hidden sm:inline",children:"comment"})]}):w.jsxs("button",{className:"w-full text-left text-[14px]",type:"button",onClick:r,children:[w.jsx("span",{children:"Hide "}),w.jsx("span",{className:"hidden sm:inline",children:"comment"})]})})},FD=({comment:t,close:e,toggleEdit:n})=>{const{dispatchAction:r}=Y(),i=()=>{r("deleteComment",t),e()};return w.jsxs("div",{className:"flex flex-col",children:[w.jsx("button",{className:"mb-3 w-full text-left text-[14px]","data-testid":"edit",type:"button",onClick:n,children:"Edit"}),w.jsx("button",{className:"w-full text-left text-[14px] text-red-600",type:"button",onClick:i,children:"Delete"})]})},PD=({comment:t,close:e})=>{const{dispatchAction:n}=Y(),r=()=>{n("openPopup",{type:"reportPopup",comment:t}),e()};return w.jsx("div",{className:"flex flex-col",children:w.jsxs("button",{className:"w-full text-left text-[14px]",type:"button",onClick:r,children:[w.jsx("span",{children:"Report "}),w.jsx("span",{className:"hidden sm:inline",children:"comment"})]})})},RD=({comment:t,close:e,toggleEdit:n})=>{var c;const{member:r,admin:i}=Y(),o=r&&((c=t.member)==null?void 0:c.uuid)===(r==null?void 0:r.uuid),s=!!i,l=b.useRef(null);b.useEffect(()=>{var p,m;const f=()=>{e()};window.addEventListener("click",f,{passive:!0});const d=(m=(p=l.current)==null?void 0:p.ownerDocument)==null?void 0:m.defaultView;return d&&d!==window&&d.addEventListener("click",f,{passive:!0}),()=>{window.removeEventListener("click",f,{passive:!0}),d&&d!==window&&d.removeEventListener("click",f,{passive:!0})}},[e]),b.useEffect(()=>{const f=d=>{d.key==="Escape"&&e()};return window.addEventListener("keydown",f,{passive:!0}),()=>{window.removeEventListener("keydown",f,{passive:!0})}},[e]);const a=f=>{f.stopPropagation()};let u=null;if(t.status==="published")o?u=w.jsx(FD,{close:e,comment:t,toggleEdit:n}):s?u=w.jsx(Fg,{close:e,comment:t}):u=w.jsx(PD,{close:e,comment:t});else if(s)u=w.jsx(Fg,{close:e,comment:t});else return null;return w.jsx("div",{ref:l,onClick:a,children:w.jsx("div",{className:"absolute z-10 min-w-min whitespace-nowrap rounded bg-white py-3 pl-4 pr-8 font-sans text-sm shadow-lg outline-0 dark:bg-zinc-900 dark:text-white sm:min-w-[150px]",children:u})})},BD=t=>b.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"black",xmlns:"http://www.w3.org/2000/svg",...t},b.createElement("path",{d:"M3 12C3.82843 12 4.5 11.3284 4.5 10.5C4.5 9.67157 3.82843 9 3 9C2.17157 9 1.5 9.67157 1.5 10.5C1.5 11.3284 2.17157 12 3 12Z"}),b.createElement("path",{d:"M8 12C8.82843 12 9.5 11.3284 9.5 10.5C9.5 9.67157 8.82843 9 8 9C7.17157 9 6.5 9.67157 6.5 10.5C6.5 11.3284 7.17157 12 8 12Z"}),b.createElement("path",{d:"M13 12C13.8284 12 14.5 11.3284 14.5 10.5C14.5 9.67157 13.8284 9 13 9C12.1716 9 11.5 9.67157 11.5 10.5C11.5 11.3284 12.1716 12 13 12Z"})),Pg=({comment:t,toggleEdit:e})=>{const[n,r]=b.useState(!1),{member:i,admin:o}=Y(),s=()=>{r(u=>!u)},l=()=>{r(!1)},a=!!i&&t.status==="published"||!!o;return i?w.jsxs("div",{className:"relative","data-testid":"more-button",children:[a?w.jsx("button",{className:"outline-0",type:"button",onClick:s,children:w.jsx(BD,{className:"duration-50 gh-comments-icon gh-comments-icon-more fill-[rgba(0,0,0,0.5)] outline-0 transition ease-linear hover:fill-[rgba(0,0,0,0.75)] dark:fill-[rgba(255,255,255,0.5)] dark:hover:fill-[rgba(255,255,255,0.25)]"})}):null,n?w.jsx(RD,{close:l,comment:t,toggleEdit:e}):null]}):null},ID=({loadMore:t,count:e})=>w.jsx("div",{className:"flex w-full items-center justify-start",children:w.jsx("button",{className:"text-md group mb-10 ml-[48px] flex w-auto items-center px-0 pb-2 pt-0 text-left font-sans font-semibold text-neutral-700 dark:text-white sm:mb-12 ","data-testid":"reply-pagination-button",type:"button",onClick:t,children:w.jsxs("span",{className:"flex h-[39px] w-auto items-center justify-center whitespace-nowrap rounded-[6px] bg-[rgba(0,0,0,0.05)] px-4 py-2 text-center font-sans text-sm font-semibold text-neutral-700 outline-0 transition-[opacity,background] duration-150 hover:bg-[rgba(0,0,0,0.1)] dark:bg-[rgba(255,255,255,0.08)] dark:text-neutral-100 dark:hover:bg-[rgba(255,255,255,0.1)]",children:["↓ Show ",Jl(e)," more ",e===1?"reply":"replies"]})})}),jD=({comment:t})=>{const{dispatchAction:e}=Y(),n=t.count.replies-t.replies.length,r=()=>{e("loadMoreReplies",{comment:t})};return w.jsxs("div",{children:[t.replies.map(i=>w.jsx(Rg,{comment:i,parent:t},i.id)),n>0&&w.jsx(ID,{count:n,loadMore:r})]})},LD=t=>b.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",stroke:"black",xmlns:"http://www.w3.org/2000/svg",...t},b.createElement("path",{d:"M7.17463 2.98741C7.17439 2.7888 7.11434 2.59487 7.00229 2.43088C6.89025 2.26689 6.73141 2.14046 6.54647 2.06805C6.36153 1.99564 6.15907 1.98061 5.96546 2.02492C5.77186 2.06923 5.5961 2.17083 5.46107 2.31648L1.86192 6.21418C1.69351 6.39677 1.60001 6.63606 1.60001 6.88445C1.60001 7.13284 1.69351 7.37213 1.86192 7.55472L5.45909 11.4524C5.59412 11.5981 5.76988 11.6997 5.96349 11.744C6.15709 11.7883 6.35955 11.7733 6.54449 11.7009C6.72943 11.6284 6.88827 11.502 7.00032 11.338C7.11236 11.174 7.17242 10.9801 7.17265 10.7815V8.86164H9.12703C10.438 8.86164 11.6953 9.38241 12.6222 10.3094C13.5492 11.2364 14.07 12.4937 14.07 13.8046V9.85023C14.07 8.53927 13.5492 7.28201 12.6222 6.35502C11.6953 5.42803 10.438 4.90726 9.12703 4.90726H7.17265L7.17463 2.98741Z",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})),zD=({disabled:t,isReplying:e,toggleReply:n})=>{const{member:r}=Y();return r?w.jsxs("button",{className:`duration-50 group flex items-center font-sans text-sm outline-0 transition-all ease-linear ${e?"text-[rgba(0,0,0,0.9)] dark:text-[rgba(255,255,255,0.9)]":"text-[rgba(0,0,0,0.5)] hover:text-[rgba(0,0,0,0.75)] dark:text-[rgba(255,255,255,0.5)] dark:hover:text-[rgba(255,255,255,0.25)]"}`,"data-testid":"reply-button",disabled:!!t,type:"button",onClick:n,children:[w.jsx(LD,{className:`mr-[6px] ${e?"fill-[rgba(0,0,0,0.9)] stroke-[rgba(0,0,0,0.9)] dark:fill-[rgba(255,255,255,0.9)] dark:stroke-[rgba(255,255,255,0.9)]":"stroke-[rgba(0,0,0,0.5)] group-hover:stroke-[rgba(0,0,0,0.75)] dark:stroke-[rgba(255,255,255,0.5)] dark:group-hover:stroke-[rgba(255,255,255,0.25)]"} duration-50 transition ease-linear`}),"Reply"]}):null},_D=({parent:t,close:e})=>{const{postId:n,dispatchAction:r}=Y(),[,i]=Zb(Jd),s=Zc({...kd({placeholder:"Reply to comment",autofocus:!0})}),l=b.useCallback(async({html:c})=>{await r("addReply",{parent:t,reply:{post_id:n,status:"published",html:c}})},[t,n,r]),a={submitText:w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"hidden sm:inline",children:"Add "}),w.jsx("span",{className:"capitalize sm:normal-case",children:"reply"})]}),submitSize:"medium",submit:l},u=b.useCallback(()=>{s!=null&&s.isEmpty&&e()},[s,e]);return w.jsx("div",{ref:i,children:w.jsx(Dg,{close:e,closeIfNotChanged:u,editor:s,...a})})},Rg=({comment:t,parent:e})=>w.jsx(Xn,{enter:"transition-opacity duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:!0,appear:!0,children:w.jsx($D,{comment:t,parent:e})}),$D=({comment:t,parent:e})=>{const[n,r]=b.useState(!1),i=()=>{r(!1)},o=()=>{r(!0)};return n?w.jsx(MD,{close:i,comment:t,parent:e}):w.jsx(VD,{comment:t,openEditMode:o,parent:e})},VD=({comment:t,parent:e,openEditMode:n})=>ry(t)?w.jsx(UD,{comment:t,openEditMode:n,parent:e}):w.jsx(HD,{comment:t,openEditMode:n}),UD=({comment:t,parent:e,openEditMode:n})=>{const[r,i]=b.useState(!1),{dispatchAction:o}=Y(),s=async()=>{r||await o("loadMoreReplies",{comment:t,limit:"all"}),i(c=>!c)},l=()=>{i(!1)},a=r||t.replies&&t.replies.length>0,u=w.jsx(Yd,{comment:t});return w.jsxs(Ig,{avatar:u,hasReplies:a,children:[w.jsx(YD,{comment:t}),w.jsx(GD,{html:t.html}),w.jsx(QD,{comment:t,isInReplyMode:r,openEditMode:n,parent:e,toggleReplyMode:s}),w.jsx(Bg,{comment:t}),w.jsx(JD,{closeReplyMode:l,comment:t,isInReplyMode:r})]})},HD=({comment:t,openEditMode:e})=>{const{admin:n}=Y();let r;n&&t.status==="hidden"?r="This comment has been hidden.":r="This comment has been removed.";const i=w.jsx(oy,{}),o=t.replies&&t.replies.length>0;return w.jsxs(Ig,{avatar:i,hasReplies:o,children:[w.jsx("div",{className:"mb-2 mt-[-3px] flex items-start",children:w.jsxs("div",{className:"flex h-12 flex-row items-center gap-4 pb-[8px] pr-4",children:[w.jsx("p",{className:"mt-[4px] font-sans text-[16px] italic leading-normal text-[rgba(0,0,0,0.2)] dark:text-[rgba(255,255,255,0.35)]",children:r}),w.jsx("div",{className:"mt-[4px]",children:w.jsx(Pg,{comment:t,toggleEdit:e})})]})}),w.jsx(Bg,{comment:t})]})},WD=({comment:t})=>{var r;const{member:e}=Y(),n=e&&t.member&&t.member.uuid===e.uuid?e.expertise:(r=t==null?void 0:t.member)==null?void 0:r.expertise;return n?w.jsxs("span",{children:[n,w.jsx("span",{className:"mx-[0.3em]",children:"·"})]}):null},KD=({comment:t})=>t.edited_at?w.jsxs("span",{children:[w.jsx("span",{className:"mx-[0.3em]",children:"·"}),"Edited"]}):null,Bg=({comment:t})=>t.replies&&t.replies.length>0?w.jsx("div",{className:"mb-4 mt-10 sm:mb-0",children:w.jsx(jD,{comment:t})}):null,JD=({comment:t,isInReplyMode:e,closeReplyMode:n})=>e?w.jsx("div",{className:"my-10",children:w.jsx(_D,{close:n,parent:t})}):null,qD=({comment:t})=>{const e=t.member?t.member.name?t.member.name:"Anonymous":"Deleted member";return w.jsx("h4",{className:"text-[rgb(23,23,23] font-sans text-[17px] font-bold tracking-tight dark:text-[rgba(255,255,255,0.85)]",children:e})},YD=({comment:t})=>{const e=nD(t.created_at);return w.jsx("div",{className:"mb-2 mt-[-3px] flex items-start",children:w.jsxs("div",{children:[w.jsx(qD,{comment:t}),w.jsx("div",{className:"flex items-baseline pr-4 font-sans text-[14px] tracking-tight text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]",children:w.jsxs("span",{children:[w.jsx(WD,{comment:t}),w.jsx("span",{title:ny(t.created_at),children:e}),w.jsx(KD,{comment:t})]})})]})})},GD=({html:t})=>{const e={__html:t};return w.jsx("div",{className:"mt mb-2 flex flex-row items-center gap-4 pr-4",children:w.jsx("p",{dangerouslySetInnerHTML:e,className:"gh-comment-content font-sans text-[16px] leading-normal text-neutral-900 dark:text-[rgba(255,255,255,0.85)]","data-testid":"comment-content"})})},QD=({comment:t,toggleReplyMode:e,isInReplyMode:n,openEditMode:r,parent:i})=>{const{member:o,commentsEnabled:s}=Y(),l=s==="paid",a=o&&!!o.paid,u=o&&(a||!l)&&!i;return w.jsxs("div",{className:"flex items-center gap-5",children:[w.jsx(OD,{comment:t}),u&&w.jsx(zD,{isReplying:n,toggleReply:e}),w.jsx(Pg,{comment:t,toggleEdit:r})]})},XD=({hasReplies:t})=>t?w.jsx("div",{className:"mb-2 h-full w-[3px] grow rounded bg-gradient-to-b from-[rgba(0,0,0,0.05)] via-[rgba(0,0,0,0.05)] to-transparent dark:from-[rgba(255,255,255,0.08)] dark:via-[rgba(255,255,255,0.08)]"}):null,Ig=({children:t,avatar:e,hasReplies:n})=>w.jsxs("div",{className:`flex w-full flex-row ${n===!0?"mb-0":"mb-10"}`,"data-testid":"comment-component",children:[w.jsxs("div",{className:"mr-3 flex flex-col items-center justify-start",children:[w.jsx("div",{className:"flex-0 mb-4",children:e}),w.jsx(XD,{hasReplies:n})]}),w.jsx("div",{className:"grow",children:t})]}),ZD=({showCount:t,count:e})=>t?e===1?w.jsx("div",{className:"text-[1.6rem] text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]","data-testid":"count",children:"1 comment"}):w.jsxs("div",{className:"text-[1.6rem] text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]","data-testid":"count",children:[Jl(e)," comments"]}):null,eC=({title:t})=>t===null?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"hidden sm:inline",children:"Member "}),w.jsx("span",{className:"capitalize sm:normal-case",children:"discussion"})]}):w.jsx(w.Fragment,{children:t}),tC=({title:t,showCount:e,count:n})=>!t&&!e&&t!==null?null:w.jsxs("div",{className:"mb-8 flex w-full items-baseline justify-between font-sans",children:[w.jsx("h2",{className:"text-[2.8rem] font-bold tracking-tight dark:text-[rgba(255,255,255,0.85)]","data-testid":"title",children:w.jsx(eC,{title:t})}),w.jsx(ZD,{count:n,showCount:e})]}),nC=({commentsCount:t})=>{const{postId:e,dispatchAction:n}=Y(),i=Zc({...kd({placeholder:t===0?"Start the conversation":"Join the discussion",autofocus:!1})}),o=b.useCallback(async({html:u})=>{await n("addComment",{post_id:e,status:"published",html:u})},[e,n]),s=b.useRef(null);b.useEffect(()=>{if(!i)return;const u=c=>{var p;if(!i||c.metaKey||c.ctrlKey)return;let f=document.activeElement;for(;f&&f.tagName==="IFRAME"&&f.contentDocument;)f=((p=f.contentDocument)==null?void 0:p.activeElement)??null;const d=f&&(f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.tagName==="IFRAME"||f.contentEditable==="true");if(c.key==="c"&&!(i!=null&&i.isFocused)&&!d){i==null||i.commands.focus(),s.current&&Jd(s.current);return}};return window.addEventListener("keydown",u,{passive:!0}),()=>{window.removeEventListener("keydown",u,{passive:!0})}},[i]);const l={submitText:w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"hidden sm:inline",children:"Add "}),w.jsx("span",{className:"capitalize sm:normal-case",children:"comment"})]}),submitSize:"large",submit:o},a=(i==null?void 0:i.isFocused)??!1;return w.jsx("div",{ref:s,className:"mt-[-4px]","data-testid":"main-form",children:w.jsx(bg,{editor:i,isOpen:a,reduced:!1,...l})})},rC=()=>{const{pagination:t,dispatchAction:e}=Y(),n=()=>{e("loadMoreComments",{})};if(!t)return null;const r=t.total-t.page*t.limit;return r<=0?null:w.jsx("button",{className:"text-md group mb-10 flex w-full items-center px-0 pb-2 pt-0 text-left font-sans font-semibold text-neutral-700 dark:text-white","data-testid":"pagination-component",type:"button",onClick:n,children:w.jsxs("span",{className:"flex h-[39px] w-full items-center justify-center whitespace-nowrap rounded-[6px] bg-[rgba(0,0,0,0.05)] px-3 py-2 text-center font-sans text-sm font-semibold text-neutral-700 outline-0 transition-[opacity,background] duration-150 hover:bg-[rgba(0,0,0,0.1)] dark:bg-[rgba(255,255,255,0.08)] dark:text-neutral-100 dark:hover:bg-[rgba(255,255,255,0.1)]",children:["↑ Show ",Jl(r)," previous ",r===1?"comment":"comments"]})})},zl="ghost-comments-root",iC=()=>{const{pagination:t,member:e,comments:n,commentCount:r,commentsEnabled:i,title:o,showCount:s,secundaryFormCount:l}=Y(),a=n.slice().reverse().map(d=>w.jsx(Rg,{comment:d},d.id)),u=i==="paid",c=e&&!!e.paid;b.useEffect(()=>{const d=document.getElementById(zl);d&&window.location.hash==="#ghost-comments"&&window.scrollY===0&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{d.scrollIntoView()})})},[]);const f=l>0;return w.jsxs(w.Fragment,{children:[w.jsx(tC,{count:r,showCount:s,title:o}),w.jsx(rC,{}),w.jsx("div",{className:t?"":"mt-4","data-test":"comment-elements",children:a}),w.jsx("div",{children:f?null:e?c||!u?w.jsx(nC,{commentsCount:r}):w.jsx(Wd,{isFirst:(t==null?void 0:t.total)===0,isPaid:u}):w.jsx(Wd,{isFirst:(t==null?void 0:t.total)===0,isPaid:u})})]})};function oC(){return w.jsx("div",{className:"flex h-32 w-full items-center justify-center",children:w.jsx(ed,{className:"mb-6 h-12 w-12 fill-[rgb(225,225,225,0.9)] dark:fill-[rgba(255,255,255,0.6)]"})})}const sC=({done:t})=>{const e=(a,u,c)=>{var f=[a,u,c].map(function(d){return d/=255,d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4)});return f[0]*.2126+f[1]*.7152+f[2]*.0722},n=(a,u)=>{var c=e(a[0],a[1],a[2]),f=e(u[0],u[1],u[2]),d=Math.max(c,f),p=Math.min(c,f);return(d+.05)/(p+.05)},{accentColor:r,colorScheme:i}=Y(),s=(()=>{if(i==="light")return!1;if(i==="dark")return!0;{const a=document.getElementById(zl);if(!a||!a.parentElement)return!1;const u=getComputedStyle(a.parentElement).getPropertyValue("color"),c=u.substring(u.indexOf("(")+1,u.lastIndexOf(")")).split(/,\s*/),f=parseInt(c[0]),d=parseInt(c[1]),p=parseInt(c[2]);return n([255,255,255],[f,d,p])<5}})()?"dark":"",l={"--gh-accent-color":r??"blue",paddingTop:0,paddingBottom:24};return w.jsx("section",{className:"ghost-display "+s,"data-testid":"content-box",style:l,children:t?w.jsx(iC,{}):w.jsx(oC,{})})};class lC extends b.Component{constructor(n){super(n);si(this,"node");si(this,"iframeHtml");si(this,"iframeHead");si(this,"iframeRoot");si(this,"handleLoad",()=>{this.setupFrameBaseStyle()});this.setNode=this.setNode.bind(this),this.node=null}componentDidMount(){this.node.addEventListener("load",this.handleLoad)}componentWillUnmount(){this.node.removeEventListener("load",this.handleLoad)}setupFrameBaseStyle(){var n,r;this.node.contentDocument&&(this.iframeHtml=this.node.contentDocument.documentElement,this.iframeHead=this.node.contentDocument.head,this.iframeRoot=this.node.contentDocument.body,this.forceUpdate(),this.props.onResize&&((r=(n=new ResizeObserver(i=>this.props.onResize(this.iframeRoot)))==null?void 0:n.observe)==null||r.call(n,this.iframeRoot)),this.node.contentWindow.addEventListener("keydown",i=>{window.dispatchEvent(new KeyboardEvent("keydown",i))}))}setNode(n){this.node=n}render(){const{children:n,head:r,title:i="",style:o={},onResize:s,...l}=this.props;return w.jsxs("iframe",{srcDoc:"<!DOCTYPE html>",...l,ref:this.setNode,frameBorder:"0",style:o,title:i,children:[this.iframeHead&&Xc.createPortal(r,this.iframeHead),this.iframeRoot&&Xc.createPortal(n,this.iframeRoot)]})}}const aC=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width: 481px){.container{max-width:481px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1400px){.container{max-width:1400px}}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.bottom-\\[9px\\]{bottom:9px}.left-0{left:0px}.right-6{right:2.4rem}.right-\\[9px\\]{right:9px}.top-0{top:0px}.top-1{top:.4rem}.top-6{top:2.4rem}.z-10{z-index:10}.-mx-3{margin-left:-1.2rem;margin-right:-1.2rem}.mx-\\[0\\.3em\\]{margin-left:.3em;margin-right:.3em}.my-10{margin-top:4rem;margin-bottom:4rem}.mb-0{margin-bottom:0}.mb-1{margin-bottom:.4rem}.mb-10{margin-bottom:4rem}.mb-2{margin-bottom:.8rem}.mb-3{margin-bottom:1.2rem}.mb-4{margin-bottom:1.6rem}.mb-6{margin-bottom:2.4rem}.mb-8{margin-bottom:3.2rem}.mb-\\[12px\\]{margin-bottom:12px}.mb-\\[28px\\]{margin-bottom:28px}.mb-\\[8px\\]{margin-bottom:8px}.ml-1{margin-left:.4rem}.ml-2{margin-left:.8rem}.ml-2\\.5{margin-left:1rem}.ml-\\[48px\\]{margin-left:48px}.mr-1{margin-right:.4rem}.mr-2{margin-right:.8rem}.mr-3{margin-right:1.2rem}.mr-\\[6px\\]{margin-right:6px}.mt-10{margin-top:4rem}.mt-4{margin-top:1.6rem}.mt-6{margin-top:2.4rem}.mt-8{margin-top:3.2rem}.mt-\\[-10px\\]{margin-top:-10px}.mt-\\[-1px\\]{margin-top:-1px}.mt-\\[-20px\\]{margin-top:-20px}.mt-\\[-3px\\]{margin-top:-3px}.mt-\\[-4px\\]{margin-top:-4px}.mt-\\[4px\\]{margin-top:4px}.inline-block{display:inline-block}.flex{display:flex}.contents{display:contents}.hidden{display:none}.h-10{height:4rem}.h-12{height:4.8rem}.h-32{height:12.8rem}.h-9{height:3.6rem}.h-\\[12px\\]{height:12px}.h-\\[16px\\]{height:16px}.h-\\[20px\\]{height:20px}.h-\\[24px\\]{height:24px}.h-\\[39px\\]{height:39px}.h-\\[42px\\]{height:42px}.h-\\[44px\\]{height:44px}.h-full{height:100%}.h-screen{height:100vh}.min-h-\\[144px\\]{min-height:144px}.min-h-\\[48px\\]{min-height:48px}.w-10{width:4rem}.w-12{width:4.8rem}.w-9{width:3.6rem}.w-\\[12px\\]{width:12px}.w-\\[16px\\]{width:16px}.w-\\[20px\\]{width:20px}.w-\\[24px\\]{width:24px}.w-\\[3px\\]{width:3px}.w-\\[40\\%\\]{width:40%}.w-\\[60\\%\\]{width:60%}.w-auto{width:auto}.w-full{width:100%}.w-screen{width:100vw}.min-w-min{min-width:-webkit-min-content;min-width:min-content}.max-w-\\[80\\%\\]{max-width:80%}.grow{flex-grow:1}.grow-0{flex-grow:0}.-translate-x-2{--tw-translate-x: -.8rem;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[-6px\\]{--tw-translate-x: -6px;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0{--tw-translate-y: 0px;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-2{--tw-translate-y: .8rem;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-4{--tw-translate-y: 1.6rem;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@-webkit-keyframes heartbeat{0%,to{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.3);transform:scale(1.3)}}@keyframes heartbeat{0%,to{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.3);transform:scale(1.3)}}.animate-heartbeat{-webkit-animation:heartbeat .35s ease-in-out forwards;animation:heartbeat .35s ease-in-out forwards}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.items-baseline{align-items:baseline}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-3{gap:1.2rem}.gap-4{gap:1.6rem}.gap-5{gap:2rem}.gap-9{gap:3.6rem}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.6rem * var(--tw-space-x-reverse));margin-left:calc(1.6rem * calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.4rem}.rounded-\\[6px\\]{border-radius:6px}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.6rem}.border{border-width:1px}.border-2{border-width:2px}.border-y{border-top-width:1px;border-bottom-width:1px}.border-none{border-style:none}.border-\\[rgba\\(0\\,0\\,0\\,0\\.075\\)\\]{border-color:#00000013}.border-neutral-200{--tw-border-opacity: 1;border-color:rgb(229 229 229 / var(--tw-border-opacity))}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity))}.border-slate-50{--tw-border-opacity: 1;border-color:rgb(248 250 252 / var(--tw-border-opacity))}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity))}.bg-\\[\\#1C1C1C\\]{--tw-bg-opacity: 1;background-color:rgb(28 28 28 / var(--tw-bg-opacity))}.bg-\\[rgba\\(0\\,0\\,0\\,0\\.05\\)\\]{background-color:#0000000d}.bg-\\[rgba\\(0\\,0\\,0\\,0\\.085\\)\\]{background-color:#00000016}.bg-\\[rgba\\(255\\,255\\,255\\,0\\.9\\)\\]{background-color:#ffffffe6}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-\\[rgba\\(0\\,0\\,0\\,0\\.05\\)\\]{--tw-gradient-from: rgba(0,0,0,.05) var(--tw-gradient-from-position);--tw-gradient-to: rgba(0, 0, 0, 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-\\[rgba\\(0\\,0\\,0\\,0\\.2\\)\\]{--tw-gradient-from: rgba(0,0,0,.2) var(--tw-gradient-from-position);--tw-gradient-to: rgba(0, 0, 0, 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-\\[rgba\\(0\\,0\\,0\\,0\\.05\\)\\]{--tw-gradient-to: rgba(0, 0, 0, 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgba(0,0,0,.05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.bg-cover{background-size:cover}.bg-no-repeat{background-repeat:no-repeat}.fill-\\[rgb\\(225\\,225\\,225\\,0\\.9\\)\\]{fill:#e1e1e1e6}.fill-\\[rgba\\(0\\,0\\,0\\,0\\.5\\)\\]{fill:#00000080}.fill-\\[rgba\\(0\\,0\\,0\\,0\\.9\\)\\]{fill:#000000e6}.fill-white{fill:#fff}.stroke-\\[rgba\\(0\\,0\\,0\\,0\\.5\\)\\]{stroke:#00000080}.stroke-\\[rgba\\(0\\,0\\,0\\,0\\.9\\)\\]{stroke:#000000e6}.stroke-white{stroke:#fff}.p-0{padding:0}.p-\\[28px\\]{padding:28px}.px-0{padding-left:0;padding-right:0}.px-3{padding-left:1.2rem;padding-right:1.2rem}.px-4{padding-left:1.6rem;padding-right:1.6rem}.px-5{padding-left:2rem;padding-right:2rem}.px-8{padding-left:3.2rem;padding-right:3.2rem}.py-2{padding-top:.8rem;padding-bottom:.8rem}.py-3{padding-top:1.2rem;padding-bottom:1.2rem}.py-4{padding-top:1.6rem;padding-bottom:1.6rem}.py-\\[14px\\]{padding-top:14px;padding-bottom:14px}.pb-2{padding-bottom:.8rem}.pb-\\[32px\\]{padding-bottom:32px}.pb-\\[48px\\]{padding-bottom:48px}.pb-\\[68px\\]{padding-bottom:68px}.pb-\\[8px\\]{padding-bottom:8px}.pl-0{padding-left:0}.pl-1{padding-left:.4rem}.pl-4{padding-left:1.6rem}.pl-\\[1px\\]{padding-left:1px}.pl-\\[52px\\]{padding-left:52px}.pr-0{padding-right:0}.pr-4{padding-right:1.6rem}.pr-8{padding-right:3.2rem}.pr-\\[1px\\]{padding-right:1px}.pt-0{padding-top:0}.pt-2{padding-top:.8rem}.pt-3{padding-top:1.2rem}.pt-\\[40px\\]{padding-top:40px}.pt-\\[64px\\]{padding-top:64px}.text-left{text-align:left}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-\\[1\\.3rem\\]{font-size:1.3rem}.text-\\[1\\.6rem\\]{font-size:1.6rem}.text-\\[14px\\]{font-size:14px}.text-\\[15px\\]{font-size:15px}.text-\\[16\\.5px\\]{font-size:16.5px}.text-\\[16px\\]{font-size:16px}.text-\\[17px\\]{font-size:17px}.text-\\[2\\.8rem\\]{font-size:2.8rem}.text-\\[24px\\]{font-size:24px}.text-lg{font-size:1.8rem}.text-md{font-size:1.5rem}.text-sm{font-size:1.4rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.capitalize{text-transform:capitalize}.italic{font-style:italic}.leading-9{line-height:2.25rem}.leading-none{line-height:1}.leading-normal{line-height:1.5}.tracking-tight{letter-spacing:-.018em}.text-\\[rgb\\(23\\,23\\,23\\)\\]{--tw-text-opacity: 1;color:rgb(23 23 23 / var(--tw-text-opacity))}.text-\\[rgba\\(0\\,0\\,0\\,0\\.2\\)\\]{color:#0003}.text-\\[rgba\\(0\\,0\\,0\\,0\\.3\\)\\]{color:#0000004d}.text-\\[rgba\\(0\\,0\\,0\\,0\\.4\\)\\]{color:#0006}.text-\\[rgba\\(0\\,0\\,0\\,0\\.5\\)\\]{color:#00000080}.text-\\[rgba\\(0\\,0\\,0\\,0\\.9\\)\\]{color:#000000e6}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-neutral-400{--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity))}.text-neutral-500{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity))}.text-neutral-600{--tw-text-opacity: 1;color:rgb(82 82 82 / var(--tw-text-opacity))}.text-neutral-700{--tw-text-opacity: 1;color:rgb(64 64 64 / var(--tw-text-opacity))}.text-neutral-900{--tw-text-opacity: 1;color:rgb(23 23 23 / var(--tw-text-opacity))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-20{opacity:.2}.opacity-80{opacity:.8}.shadow-form{--tw-shadow: 0px 78px 57px -57px rgba(0, 0, 0, .1), 0px 15px 20px -8px rgba(0, 0, 0, .08), 0px 0px 1px 0px rgba(0,0,0,.32);--tw-shadow-colored: 0px 78px 57px -57px var(--tw-shadow-color), 0px 15px 20px -8px var(--tw-shadow-color), 0px 0px 1px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0px 0px 1px rgba(0, 0, 0, .12), 0px 4px 8px rgba(0, 0, 0, .04), 0px 8px 48px rgba(0, 0, 0, .05);--tw-shadow-colored: 0px 0px 1px var(--tw-shadow-color), 0px 4px 8px var(--tw-shadow-color), 0px 8px 48px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-modal{--tw-shadow: 0 3.8px 2.2px rgba(0, 0, 0, .028), 0 9.2px 5.3px rgba(0, 0, 0, .04), 0 17.3px 10px rgba(0, 0, 0, .05), 0 30.8px 17.9px rgba(0, 0, 0, .06), 0 57.7px 33.4px rgba(0, 0, 0, .072), 0 138px 80px rgba(0, 0, 0, .1);--tw-shadow-colored: 0 3.8px 2.2px var(--tw-shadow-color), 0 9.2px 5.3px var(--tw-shadow-color), 0 17.3px 10px var(--tw-shadow-color), 0 30.8px 17.9px var(--tw-shadow-color), 0 57.7px 33.4px var(--tw-shadow-color), 0 138px 80px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-0{outline-width:0px}.blur{--tw-blur: blur(8px);-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-\\[2px\\]{--tw-backdrop-blur: blur(2px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[border-color\\]{transition-property:border-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\,background\\]{transition-property:opacity,background;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[opacity\\]{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[padding\\]{transition-property:padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-none{transition-property:none}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.delay-100{transition-delay:.1s}.delay-150{transition-delay:.15s}.delay-\\[400ms\\]{transition-delay:.4s}.duration-0{transition-duration:0s}.duration-100{transition-duration:.1s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}body,html{overflow:hidden}:host{all:initial!important}html{font-size:62.5%}body{font-size:1.5rem}.gh-comment-content p:empty:after{content:" "}.gh-comment-content a{word-break:break-word;text-decoration:underline;color:var(--gh-accent-color)}.gh-comment-content blockquote{border-left:3px solid rgba(13,13,13,.1);padding-left:1rem;margin:0 0 1.2rem}.gh-comment-content p{margin:0 0 1.2rem}.gh-comment-content p:last-child,.gh-comment-content blockquote:last-child{margin:0}.ProseMirror p.is-editor-empty:first-child:before{content:attr(data-placeholder);float:left;height:0;pointer-events:none;--tw-text-opacity: 1;color:rgb(212 212 212 / var(--tw-text-opacity))}.ProseMirror *{white-space:pre-wrap;word-wrap:break-word}[contenteditable]:focus{outline:0px solid transparent}.ghost-display{display:block!important}.hover\\:border-slate-300:hover{--tw-border-opacity: 1;border-color:rgb(203 213 225 / var(--tw-border-opacity))}.hover\\:bg-\\[rgba\\(0\\,0\\,0\\,0\\.1\\)\\]:hover{background-color:#0000001a}.hover\\:fill-\\[rgba\\(0\\,0\\,0\\,0\\.75\\)\\]:hover{fill:#000000bf}.hover\\:text-\\[rgba\\(0\\,0\\,0\\,0\\.5\\)\\]:hover{color:#00000080}.hover\\:text-\\[rgba\\(0\\,0\\,0\\,0\\.75\\)\\]:hover{color:#000000bf}.hover\\:opacity-40:hover{opacity:.4}.hover\\:opacity-90:hover{opacity:.9}.hover\\:shadow-formxl:hover{--tw-shadow: 0px 78px 57px -57px rgba(0, 0, 0, .125), 0px 15px 20px -8px rgba(0, 0, 0, .1), 0px 0px 1px 0px rgba(0, 0, 0, .32);--tw-shadow-colored: 0px 78px 57px -57px var(--tw-shadow-color), 0px 15px 20px -8px var(--tw-shadow-color), 0px 0px 1px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\\:border-neutral-300:focus{--tw-border-opacity: 1;border-color:rgb(212 212 212 / var(--tw-border-opacity))}.focus\\:border-red-500:focus{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity))}.focus\\:outline-0:focus{outline-width:0px}.group:hover .group-hover\\:translate-x-0{--tw-translate-x: 0px;-webkit-transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:stroke-\\[rgba\\(0\\,0\\,0\\,0\\.75\\)\\]{stroke:#000000bf}.group:hover .group-hover\\:opacity-100{opacity:1}:is(.dark .dark\\:border-none){border-style:none}:is(.dark .dark\\:border-\\[rgba\\(255\\,255\\,255\\,0\\.1\\)\\]){border-color:#ffffff1a}:is(.dark .dark\\:bg-\\[rgba\\(255\\,255\\,255\\,0\\.08\\)\\]){background-color:#ffffff14}:is(.dark .dark\\:bg-\\[rgba\\(255\\,255\\,255\\,0\\.15\\)\\]){background-color:#ffffff26}:is(.dark .dark\\:bg-\\[rgba\\(255\\,255\\,255\\,0\\.7\\)\\]){background-color:#ffffffb3}:is(.dark .dark\\:bg-\\[rgba\\(255\\,255\\,255\\,0\\.9\\)\\]){background-color:#ffffffe6}:is(.dark .dark\\:bg-zinc-900){--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity))}:is(.dark .dark\\:from-\\[rgba\\(255\\,255\\,255\\,0\\.08\\)\\]){--tw-gradient-from: rgba(255,255,255,.08) var(--tw-gradient-from-position);--tw-gradient-to: rgba(255, 255, 255, 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}:is(.dark .dark\\:via-\\[rgba\\(255\\,255\\,255\\,0\\.08\\)\\]){--tw-gradient-to: rgba(255, 255, 255, 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgba(255,255,255,.08) var(--tw-gradient-via-position), var(--tw-gradient-to)}:is(.dark .dark\\:fill-\\[rgba\\(255\\,255\\,255\\,0\\.5\\)\\]){fill:#ffffff80}:is(.dark .dark\\:fill-\\[rgba\\(255\\,255\\,255\\,0\\.6\\)\\]){fill:#fff9}:is(.dark .dark\\:fill-\\[rgba\\(255\\,255\\,255\\,0\\.9\\)\\]){fill:#ffffffe6}:is(.dark .dark\\:fill-black){fill:#000}:is(.dark .dark\\:stroke-\\[rgba\\(0\\,0\\,0\\,0\\.6\\)\\]){stroke:#0009}:is(.dark .dark\\:stroke-\\[rgba\\(255\\,255\\,255\\,0\\.5\\)\\]){stroke:#ffffff80}:is(.dark .dark\\:stroke-\\[rgba\\(255\\,255\\,255\\,0\\.9\\)\\]){stroke:#ffffffe6}:is(.dark .dark\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.3\\)\\]){color:#ffffff4d}:is(.dark .dark\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.35\\)\\]){color:#ffffff59}:is(.dark .dark\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.5\\)\\]){color:#ffffff80}:is(.dark .dark\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.85\\)\\]){color:#ffffffd9}:is(.dark .dark\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.9\\)\\]){color:#ffffffe6}:is(.dark .dark\\:text-neutral-100){--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity))}:is(.dark .dark\\:text-neutral-300){--tw-text-opacity: 1;color:rgb(212 212 212 / var(--tw-text-opacity))}:is(.dark .dark\\:text-neutral-400){--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity))}:is(.dark .dark\\:text-neutral-800){--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity))}:is(.dark .dark\\:text-white){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}:is(.dark .dark\\:shadow-transparent){--tw-shadow-color: transparent;--tw-shadow: var(--tw-shadow-colored)}:is(.dark .dark\\:hover\\:bg-\\[rgba\\(255\\,255\\,255\\,0\\.1\\)\\]:hover){background-color:#ffffff1a}:is(.dark .dark\\:hover\\:fill-\\[rgba\\(255\\,255\\,255\\,0\\.25\\)\\]:hover){fill:#ffffff40}:is(.dark .dark\\:hover\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.25\\)\\]:hover){color:#ffffff40}:is(.dark .dark\\:hover\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.4\\)\\]:hover){color:#fff6}:is(.dark .hover\\:dark\\:text-\\[rgba\\(255\\,255\\,255\\,0\\.25\\)\\]):hover{color:#ffffff40}:is(.dark .group:hover .dark\\:group-hover\\:stroke-\\[rgba\\(255\\,255\\,255\\,0\\.25\\)\\]){stroke:#ffffff40}:is(.dark .group:hover .dark\\:group-hover\\:stroke-\\[rgba\\(255\\,255\\,255\\,0\\.3\\)\\]){stroke:#ffffff4d}@media (min-width: 481px){.sm\\:right-8{right:3.2rem}.sm\\:top-10{top:4rem}.sm\\:mb-0{margin-bottom:0}.sm\\:mb-12{margin-bottom:4.8rem}.sm\\:inline{display:inline}.sm\\:h-\\[40px\\]{height:40px}.sm\\:h-auto{height:auto}.sm\\:w-\\[100px\\]{width:100px}.sm\\:w-\\[128px\\]{width:128px}.sm\\:w-\\[200px\\]{width:200px}.sm\\:w-\\[40px\\]{width:40px}.sm\\:w-\\[500px\\]{width:500px}.sm\\:w-\\[64px\\]{width:64px}.sm\\:w-\\[720px\\]{width:720px}.sm\\:min-w-\\[150px\\]{min-width:150px}.sm\\:max-w-\\[90\\%\\]{max-width:90%}.sm\\:flex-row{flex-direction:row}.sm\\:rounded-xl{border-radius:1.2rem}.sm\\:p-0{padding:0}.sm\\:p-8{padding:3.2rem}.sm\\:px-8{padding-left:3.2rem;padding-right:3.2rem}.sm\\:pl-0{padding-left:0}.sm\\:pl-\\[52px\\]{padding-left:52px}.sm\\:pr-10{padding-right:4rem}.sm\\:pr-4{padding-right:1.6rem}.sm\\:pt-12{padding-top:4.8rem}.sm\\:text-left{text-align:left}.sm\\:normal-case{text-transform:none}}
`,jg=({children:t,onResize:e,style:n,title:r})=>{const i=w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:aC}}),w.jsx("meta",{content:"width=device-width, initial-scale=1.0, maximum-scale=1.0",name:"viewport"})]});return w.jsx(lC,{head:i,style:n,title:r,onResize:e,children:t})},uC=({children:t,style:e,title:n})=>{const[r,i]=b.useState(e),o=b.useCallback(s=>{i(l=>({...l,height:`${s.scrollHeight}px`}))},[]);return w.jsx(jg,{style:r,title:n,onResize:o,children:t})},cC=({children:t})=>{const e={width:"100%",height:"400px"};return w.jsx(uC,{style:e,title:"comments-frame",children:t})},dC=({children:t,title:e})=>{const n={zIndex:"3999999",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",overflow:"hidden"};return w.jsx(jg,{style:n,title:e,children:t})},fC=({show:t,children:e,title:n,callback:r})=>{const{dispatchAction:i}=Y(),o=()=>{i("closePopup",{}),r&&r(!1)};return b.useEffect(()=>{const s=l=>{l.key==="Escape"&&o()};return window.addEventListener("keydown",s,{passive:!0}),()=>{window.removeEventListener("keydown",s,{passive:!0})}}),w.jsx(Xn,{appear:!0,show:t,children:w.jsx(dC,{title:n,children:w.jsx("div",{children:w.jsx(Xn.Child,{enter:"transition duration-200 linear",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-200 linear",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w.jsx("div",{className:"to-rgba(0,0,0,0.1) fixed left-0 top-0 flex h-screen w-screen justify-center overflow-hidden bg-gradient-to-b from-[rgba(0,0,0,0.2)] pt-0 backdrop-blur-[2px] sm:pt-12",onMouseDown:o,children:w.jsx(Xn.Child,{enter:"transition duration-200 delay-150 linear",enterFrom:"translate-y-4 opacity-0",enterTo:"translate-y-0 opacity-100",leave:"transition duration-200 linear",leaveFrom:"translate-y-0 opacity-100",leaveTo:"translate-y-4 opacity-0",children:e})})})})})})},pC=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"gh-portal-closeicon",alt:"Close",...t},b.createElement("defs",null,b.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.2px !important;}")),b.createElement("path",{className:"a",d:"M.75 23.249l22.5-22.5M23.25 23.249L.75.749"})),Lg=({close:t})=>w.jsx("button",{className:"absolute right-6 top-6 opacity-20 transition-opacity duration-100 ease-out hover:opacity-40 sm:right-8 sm:top-10",type:"button",onClick:t,children:w.jsx(pC,{className:"h-[20px] w-[20px]"})}),hC=t=>{const e=b.useRef(null),n=b.useRef(null),{dispatchAction:r,member:i,accentColor:o}=Y(),[s,l]=b.useState(i.name??""),[a,u]=b.useState(i.expertise??""),c=50;let f=c;i.expertise&&(f-=i.expertise.length);const[d,p]=b.useState(f),[m,y]=b.useState({name:"",expertise:""}),h=v=>{v.stopPropagation()},g=v=>{r("closePopup",{}),t.callback(v)},x=async()=>{var v;s.trim()!==""?(await r("updateMember",{name:s,expertise:a}),g(!0)):(y({name:"Enter your name",expertise:""}),l(""),(v=e.current)==null||v.focus())};b.useEffect(()=>{if(!Ro()){const v=setTimeout(()=>{var E,D;t.expertiseAutofocus?(E=n.current)==null||E.focus():(D=e.current)==null||D.focus()},200);return()=>{clearTimeout(v)}}},[e,n,t.expertiseAutofocus]);const k=()=>{const v=N=>w.jsx(Xn,{enter:"transition duration-200 delay-[400ms] ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition duration-200 ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",appear:!0,children:w.jsxs("div",{className:"flex flex-row items-center justify-start gap-3 pr-4",children:[w.jsx("div",{className:"h-10 w-10 rounded-full border-2 border-white bg-cover bg-no-repeat",style:{backgroundImage:`url(${N.avatar})`}}),w.jsxs("div",{className:"flex flex-col items-start justify-center",children:[w.jsx("div",{className:"font-sans text-base font-semibold tracking-tight text-white",children:N.name}),w.jsx("div",{className:"font-sans text-[14px] tracking-tight text-neutral-400",children:N.expertise})]})]})},N.name);let E=[],D=[{avatar:"https://randomuser.me/api/portraits/men/32.jpg",name:"James Fletcher",expertise:"Full-time parent"},{avatar:"https://randomuser.me/api/portraits/women/30.jpg",name:"Naomi Schiff",expertise:"Founder @ Acme Inc"},{avatar:"https://randomuser.me/api/portraits/men/4.jpg",name:"Franz Tost",expertise:"Neurosurgeon"},{avatar:"https://randomuser.me/api/portraits/women/51.jpg",name:"Katrina Klosp",expertise:"Local resident"}];for(let N=0;N<D.length;N++)E.push(v(D[N]));return E};return w.jsx("div",{className:"shadow-modal relative h-screen w-screen overflow-hidden rounded-none bg-white p-[28px] text-center sm:h-auto sm:w-[720px] sm:rounded-xl sm:p-0",onMouseDown:h,children:w.jsxs("div",{className:"flex",children:[!Ro()&&w.jsx("div",{className:"flex w-[40%] flex-col items-center justify-center bg-[#1C1C1C]",children:w.jsx("div",{className:"mt-[-1px] flex flex-col gap-9",children:k()})}),w.jsxs("div",{className:`${Ro()?"w-full":"w-[60%]"} p-0 sm:p-8`,children:[w.jsxs("h1",{className:"mb-1 text-center font-sans text-[24px] font-bold tracking-tight text-black sm:text-left",children:["Complete your profile",w.jsx("span",{className:"hidden sm:inline",children:"."})]}),w.jsx("p",{className:"pr-0 text-center font-sans text-base leading-9 text-neutral-500 sm:pr-10 sm:text-left",children:"Add context to your comment, share your name and expertise to foster a healthy discussion."}),w.jsxs("section",{className:"mt-8 text-left",children:[w.jsxs("div",{className:"mb-2 flex flex-row justify-between",children:[w.jsx("label",{className:"font-sans text-[1.3rem] font-semibold",htmlFor:"comments-name",children:"Name"}),w.jsx(Xn,{enter:"transition duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-100 ease-out",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:!!m.name,children:w.jsx("div",{className:"font-sans text-sm text-red-500",children:m.name})})]}),w.jsx("input",{ref:e,className:`flex h-[42px] w-full items-center rounded border border-neutral-200 px-3 font-sans text-[16px] outline-0 transition-[border-color] duration-200 focus:border-neutral-300 ${m.name&&"border-red-500 focus:border-red-500"}`,id:"comments-name",maxLength:64,name:"name",placeholder:"Jamie Larson",type:"text",value:s,onChange:v=>{l(v.currentTarget.value)},onKeyDown:v=>{v.key==="Enter"&&(l(v.currentTarget.value),x().catch(console.error))}}),w.jsxs("div",{className:"mb-2 mt-6 flex flex-row justify-between",children:[w.jsx("label",{className:"font-sans text-[1.3rem] font-semibold",htmlFor:"comments-name",children:"Expertise"}),w.jsxs("div",{className:`font-sans text-[1.3rem] text-neutral-400 ${d===0&&"text-red-500"}`,children:[w.jsx("b",{children:d})," characters left"]})]}),w.jsx("input",{ref:n,className:`flex h-[42px] w-full items-center rounded border border-neutral-200 px-3 font-sans text-[16px] outline-0 transition-[border-color] duration-200 focus:border-neutral-300 ${d===0&&"border-red-500 focus:border-red-500"}`,id:"comments-expertise",maxLength:c,name:"expertise",placeholder:"Head of Marketing at Acme, Inc",type:"text",value:a,onChange:v=>{let E=v.currentTarget.value;p(c-E.length),u(E)},onKeyDown:v=>{v.key==="Enter"&&(u(v.currentTarget.value),x().catch(console.error))}}),w.jsx("button",{className:"mt-10 flex h-[42px] w-full items-center justify-center rounded-md px-8 font-sans text-[15px] font-semibold text-white opacity-100 transition-opacity duration-200 ease-linear hover:opacity-90",style:{backgroundColor:o??"#000000"},type:"button",onClick:()=>{x().catch(console.error)},children:"Save"})]})]}),w.jsx(Lg,{close:()=>g(!1)})]})})},mC=t=>b.createElement("svg",{width:"26px",height:"26px",viewBox:"-1 -1 26 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...t},b.createElement("g",{id:"check-circle",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},b.createElement("path",{className:"animated-check-circle",d:"M19.6004116,2.71490714 C17.5353801,1.0196018 14.8927356,0 12,0 C5.38938053,0 0,5.38938053 0,12 C0,18.6106195 5.38938053,24 12,24 C18.6106195,24 24,18.6106195 24,12 C24,9.71681416 23.3628319,7.59292035 22.2743363,5.78761062 L11.0442478,17.0442478 L5.49557522,11.4955752",id:"Shape",stroke:"#FFFFFF",strokeWidth:2}))),gC={addDetailsPopup:hC,reportPopup:({comment:t})=>{const{dispatchAction:e}=Y(),[n,r]=b.useState("default");let i="bg-red-600";n==="sent"&&(i="bg-green-600");let o="Report this comment";n==="sending"?o="Sending":n==="sent"&&(o="Sent");let s=null;n==="sending"?s=w.jsx(ed,{className:"mr-2 h-[24px] w-[24px] fill-white"}):n==="sent"&&(s=w.jsx(mC,{className:"mr-2 h-[16px] w-[16px]"}));const l=c=>{c.stopPropagation()},a=()=>{e("closePopup",{})},u=c=>{c.stopPropagation(),r("sending"),setTimeout(()=>{r("sent"),e("reportComment",t),setTimeout(()=>{a()},750)},1e3)};return w.jsxs("div",{className:"shadow-modal relative h-screen w-screen rounded-none bg-white p-[28px] text-center sm:h-auto sm:w-[500px] sm:rounded-xl sm:p-8 sm:text-left",onMouseDown:l,children:[w.jsxs("h1",{className:"mb-1 font-sans text-[24px] font-bold tracking-tight text-black",children:["You want to report",w.jsx("span",{className:"hidden sm:inline",children:" this comment"}),"?"]}),w.jsx("p",{className:"px-4 font-sans text-base leading-9 text-neutral-500 sm:pl-0 sm:pr-4",children:"Your request will be sent to the owner of this site."}),w.jsxs("div",{className:"mt-10 flex flex-col items-center justify-start gap-4 sm:flex-row",children:[w.jsxs("button",{className:`flex h-[44px] w-full items-center justify-center rounded-md px-4 font-sans text-[15px] font-semibold text-white transition duration-200 ease-linear sm:w-[200px] ${i} opacity-100 hover:opacity-90`,style:{backgroundColor:i??"#000000"},type:"button",onClick:u,children:[s,o]}),w.jsx("button",{className:"font-sans text-sm font-medium text-neutral-500 dark:text-neutral-400",type:"button",onClick:a,children:"Cancel"})]}),w.jsx(Lg,{close:a})]})}},yC=()=>{const{popup:t}=Y(),[e,n]=b.useState(t);if(b.useEffect(()=>{if(t!==null&&n(t),t===null){const l=setTimeout(()=>{n(null)},250);return()=>{clearTimeout(l)}}},[t,n]),!e||!e.type)return null;const{type:r,...i}=t??e,o=gC[r];if(!o)return console.warn("Unknown popup of type ",r),null;const s=t===e;return w.jsx(w.Fragment,{children:w.jsx(fC,{callback:i.callback,show:s,title:r,children:w.jsx(o,{...i})})})};function wC({siteUrl:t=window.location.origin,apiUrl:e,apiKey:n}){const r="members/api";function i({type:u,resource:c,params:f=""}){return u==="members"?`${t.replace(/\/$/,"")}/${r}/${c}/${f}`:""}function o({resource:u,params:c=""}){return e&&n?`${e.replace(/\/$/,"")}/${u}/?key=${n}&limit=all${c}`:""}function s({url:u,method:c="GET",headers:f={},credentials:d=void 0,body:p=void 0}){return fetch(u,{method:c,headers:f,credentials:d,body:p})}let l=null;const a={site:{settings(){const u=o({resource:"settings"});return s({url:u,method:"GET",headers:{"Content-Type":"application/json"}}).then(function(c){if(c.ok)return c.json();throw new Error("Failed to fetch site data")})}},member:{identity(){const u=i({type:"members",resource:"session"});return s({url:u,credentials:"same-origin"}).then(function(c){return!c.ok||c.status===204?null:c.text()})},sessionData(){const u=i({type:"members",resource:"member"});return s({url:u,credentials:"same-origin"}).then(function(c){return!c.ok||c.status===204?null:c.json()})},update({name:u,expertise:c}){const f=i({type:"members",resource:"member"});return s({url:f,method:"PUT",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({name:u,expertise:c})}).then(function(p){return p.ok?p.json():null})}},comments:{async count({postId:u}){const c=u?`?ids=${u}`:"",f=i({type:"members",resource:"comments/counts",params:c}),p=await(await s({url:f,method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"})).json();return u?p[u]:p},browse({page:u,postId:c}){l=l??new Date().toISOString();const f=encodeURIComponent(`post_id:${c}+created_at:<=${l}`),d=encodeURIComponent("created_at DESC, id DESC"),p=i({type:"members",resource:"comments",params:`?limit=5&order=${d}&filter=${f}&page=${u}`});return s({url:p,method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(function(m){if(m.ok)return m.json();throw new Error("Failed to fetch comments")})},async replies({commentId:u,afterReplyId:c,limit:f}){const d=encodeURIComponent(`id:>${c}`),p=encodeURIComponent("created_at ASC, id ASC"),m=i({type:"members",resource:`comments/${u}/replies`,params:`?limit=${f??5}&order=${p}&filter=${d}`}),y=await s({url:m,method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"});if(y.ok)return y.json();throw new Error("Failed to fetch replies")},add({comment:u}){const c={comments:[u]},f=i({type:"members",resource:"comments"});return s({url:f,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(d){if(d.ok)return d.json();throw new Error("Failed to add comment")})},edit({comment:u}){const c={comments:[u]},f=i({type:"members",resource:`comments/${u.id}`});return s({url:f,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(d){if(d.ok)return d.json();throw new Error("Failed to edit comment")})},read(u){const c=i({type:"members",resource:`comments/${u}`});return s({url:c,method:"GET",credentials:"same-origin"}).then(function(f){if(f.ok)return f.json();throw new Error("Failed to read comment")})},like({comment:u}){const c=i({type:"members",resource:`comments/${u.id}/like`});return s({url:c,method:"POST",headers:{"Content-Type":"application/json"}}).then(function(f){if(f.ok)return"Success";throw new Error("Failed to like comment")})},unlike({comment:u}){const c={comments:[u]},f=i({type:"members",resource:`comments/${u.id}/like`});return s({url:f,method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(d){if(d.ok)return"Success";throw new Error("Failed to unlike comment")})},report({comment:u}){const c=i({type:"members",resource:`comments/${u.id}/report`});return s({url:c,method:"POST",headers:{"Content-Type":"application/json"}}).then(function(f){if(f.ok)return"Success";throw new Error("Failed to report comment")})}},init:()=>{}};return a.init=async()=>{let[u]=await Promise.all([a.member.sessionData()]);return{member:u}},a}async function xC({state:t,api:e}){let n=1;t.pagination&&t.pagination.page&&(n=t.pagination.page+1);const r=await e.comments.browse({page:n,postId:t.postId});return{comments:[...t.comments,...r.comments],pagination:r.meta.pagination}}async function vC({state:t,api:e,data:{comment:n,limit:r}}){var o;const i=await e.comments.replies({commentId:n.id,afterReplyId:(o=n.replies[n.replies.length-1])==null?void 0:o.id,limit:r});return{comments:t.comments.map(s=>s.id===n.id?{...n,replies:[...n.replies,...i.comments]}:s)}}async function kC({state:t,api:e,data:n}){return n=(await e.comments.add({comment:n})).comments[0],{comments:[n,...t.comments],commentCount:t.commentCount+1}}async function bC({state:t,api:e,data:{reply:n,parent:r}}){let i=n;return i.parent_id=r.id,i=(await e.comments.add({comment:i})).comments[0],{comments:t.comments.map(s=>s.id===r.id?{...r,replies:[...r.replies,i],count:{...r.count,replies:r.count.replies+1}}:s),commentCount:t.commentCount+1}}async function DC({state:t,adminApi:e,data:n}){return await e.hideComment(n.id),{comments:t.comments.map(r=>{const i=r.replies.map(o=>o.id===n.id?{...o,status:"hidden"}:o);return r.id===n.id?{...r,status:"hidden",replies:i}:{...r,replies:i}}),commentCount:t.commentCount-1}}async function CC({state:t,api:e,adminApi:n,data:r}){await n.showComment(r.id);const o=(await e.comments.read(r.id)).comments[0];return{comments:t.comments.map(s=>{const l=s.replies.map(a=>a.id===r.id?o:a);return s.id===r.id?o:{...s,replies:l}}),commentCount:t.commentCount+1}}async function EC({state:t,api:e,data:n}){return await e.comments.like({comment:n}),{comments:t.comments.map(r=>{const i=r.replies.map(o=>o.id===n.id?{...o,liked:!0,count:{...o.count,likes:o.count.likes+1}}:o);return r.id===n.id?{...r,liked:!0,replies:i,count:{...r.count,likes:r.count.likes+1}}:{...r,replies:i}})}}async function SC({state:t,api:e,data:n}){return await e.comments.report({comment:n}),{}}async function AC({state:t,api:e,data:n}){return await e.comments.unlike({comment:n}),{comments:t.comments.map(r=>{const i=r.replies.map(o=>o.id===n.id?{...o,liked:!1,count:{...o.count,likes:o.count.likes-1}}:o);return r.id===n.id?{...r,liked:!1,replies:i,count:{...r.count,likes:r.count.likes-1}}:{...r,replies:i}})}}async function NC({state:t,api:e,data:n}){return await e.comments.edit({comment:{id:n.id,status:"deleted"}}),{comments:t.comments.map(r=>{const i=r.replies.map(o=>o.id===n.id?{...o,status:"deleted"}:o);return r.id===n.id?{...r,status:"deleted",replies:i}:{...r,replies:i}}),commentCount:t.commentCount-1}}async function MC({state:t,api:e,data:{comment:n,parent:r}}){return n=(await e.comments.edit({comment:n})).comments[0],{comments:t.comments.map(o=>r&&r.id===o.id?{...o,replies:o.replies.map(s=>s.id===n.id?n:s)}:o.id===n.id?n:o)}}async function TC({data:t,state:e,api:n}){var a,u;const{name:r,expertise:i}=t,o={},s=(a=e==null?void 0:e.member)==null?void 0:a.name;r&&s!==r&&(o.name=r);const l=(u=e==null?void 0:e.member)==null?void 0:u.expertise;if(i!==void 0&&l!==i&&(o.expertise=i),Object.keys(o).length>0)try{const c=await n.member.update(o);if(!c)throw new Error("Failed to update member");return{member:c,success:!0}}catch(c){return{success:!1,error:c}}return null}function OC({data:t}){return{popup:t}}function FC(){return{popup:null}}function PC({state:t}){return{secundaryFormCount:t.secundaryFormCount+1}}function RC({state:t}){return{secundaryFormCount:t.secundaryFormCount-1}}const zg={openPopup:OC,closePopup:FC,increaseSecundaryFormCount:PC,decreaseSecundaryFormCount:RC},BC={addComment:kC,editComment:MC,hideComment:DC,deleteComment:NC,showComment:CC,likeComment:EC,unlikeComment:AC,reportComment:SC,addReply:bC,loadMoreComments:xC,loadMoreReplies:vC,updateMember:TC};function IC(t){return!!zg[t]}async function jC({action:t,data:e,state:n,api:r,adminApi:i}){const o=BC[t];return o?await o({data:e,state:n,api:r,adminApi:i})||{}:{}}function LC({action:t,data:e,state:n,api:r,adminApi:i}){const o=zg[t];return o?o({data:e,state:n,api:r,adminApi:i})||{}:{}}const zC={dev:function({customSiteUrl:t=""}={}){return!1},test:function(){return!1}},_C=(t=[],e={})=>t.some(n=>{const r=zC[n];return!!(r&&r(e))});function $C({adminUrl:t,onLoad:e}){if(!t)return null;const n={display:"none"};return w.jsx("iframe",{"data-frame":"admin-auth",src:t+"auth-frame/",style:n,title:"auth-frame",onLoad:e})}class VC extends q.Component{constructor(e){super(e),this.state={action:"init:running",initStatus:"running",member:null,admin:null,comments:null,pagination:null,popupNotification:null,customSiteUrl:e.customSiteUrl,postId:e.postId,popup:null,accentColor:e.accentColor,secundaryFormCount:0},this.adminApi=null,this.GhostApi=null,this.dispatchAction=this.dispatchAction.bind(this),this.initAdminAuth=this.initAdminAuth.bind(this)}async initSetup(){try{const{member:e}=await this.fetchApiData(),{comments:n,pagination:r,count:i}=await this.fetchComments(),o={member:e,action:"init:success",initStatus:"success",comments:n,pagination:r,commentCount:i};this.setState(o)}catch(e){console.error("[Comments] Failed to initialize:",e),this.setState({action:"init:failed",initStatus:"failed"})}}async initAdminAuth(){if(!this.adminApi)try{this.adminApi=this.setupAdminAPI();let e=null;try{e=await this.adminApi.getUser()}catch(r){console.warn("[Comments] Failed to fetch current admin user:",r)}const n={admin:e};this.setState(n)}catch(e){console.error("[Comments] Failed to initialize admin authentication:",e)}}async dispatchAction(e,n){if(IC(e)){this.setState(r=>LC({action:e,data:n,state:r,api:this.GhostApi,adminApi:this.adminApi}));return}clearTimeout(this.timeoutId),this.setState({action:`${e}:running`});try{const r=await jC({action:e,data:n,state:this.state,api:this.GhostApi,adminApi:this.adminApi});this.setState(r),r&&r.action&&!r.action.includes(":failed")&&(this.timeoutId=setTimeout(()=>{this.setState({action:""})},2e3))}catch(r){console.error(r);const i=ey({type:`${e}:failed`,autoHide:!0,closeable:!0,status:"error",state:this.state,meta:{error:r}});this.setState({action:`${e}:failed`,popupNotification:i})}}async fetchApiData(){const{siteUrl:e,customSiteUrl:n,apiUrl:r,apiKey:i}=this.props;try{this.GhostApi=this.props.api||wC({siteUrl:e,apiUrl:r,apiKey:i});const{member:o}=await this.GhostApi.init();return{member:o}}catch(o){if(_C(["dev","test"],{customSiteUrl:n}))return{};throw o}}async fetchComments(){const e=this.GhostApi.comments.browse({page:1,postId:this.state.postId}),n=this.GhostApi.comments.count({postId:this.state.postId}),[r,i]=await Promise.all([e,n]);return{comments:r.comments,pagination:r.meta.pagination,count:i}}setupAdminAPI(){const e=document.querySelector('iframe[data-frame="admin-auth"]');let n=1,r={};const i=new URL(this.props.adminUrl).origin;window.addEventListener("message",function(l){if(l.origin!==i)return;let a=null;try{a=JSON.parse(l.data)}catch(c){console.error("Error parsing event data",c);return}const u=r[a.uid];u&&(delete r[a.uid],u(a.error,a.result))});function o(l,a){return new Promise((u,c)=>{function f(d,p){return d?c(d):u(p)}n+=1,r[n]=f,e.contentWindow.postMessage(JSON.stringify({uid:n,action:l,...a}),i)})}return{async getUser(){const l=await o("getUser");return!l||!l.users?null:l.users[0]},async hideComment(l){return await o("hideComment",{id:l})},async showComment(l){return await o("showComment",{id:l})}}}getContextFromState(){const{action:e,popupNotification:n,customSiteUrl:r,member:i,comments:o,pagination:s,commentCount:l,postId:a,admin:u,popup:c,secundaryFormCount:f}=this.state;return{action:e,popupNotification:n,customSiteUrl:r,member:i,admin:u,comments:o,pagination:s,commentCount:l,postId:a,title:this.props.title,showCount:this.props.showCount,colorScheme:this.props.colorScheme,avatarSaturation:this.props.avatarSaturation,accentColor:this.props.accentColor,commentsEnabled:this.props.commentsEnabled,publication:this.props.publication,secundaryFormCount:f,popup:c,dispatchAction:this.dispatchAction}}componentDidMount(){this.initSetup()}componentWillUnmount(){clearTimeout(this.timeoutId)}render(){const e=this.state.initStatus==="success";return w.jsxs(Kl.Provider,{value:this.getContextFromState(),children:[w.jsx(cC,{children:w.jsx(sC,{done:e})}),w.jsx($C,{adminUrl:this.props.adminUrl,onLoad:this.initAdminAuth}),w.jsx(yC,{})]})}}function UC(){let t=document.currentScript;if(!t)throw new Error("[Comments-UI] Cannot find current script tag");return t}function HC(t){if(t.previousElementSibling&&t.previousElementSibling.id===zl)return t.previousElementSibling;if(!t.parentElement)throw new Error("[Comments-UI] Script tag does not have a parent element");const e=document.createElement("div");return e.id=zl,t.parentElement.insertBefore(e,t),e}function WC(t){let e=t==null?void 0:t.dataset;if(!t)return{};const n=e.ghostComments,r=e.key,i=e.api,o=e.admin,s=e.postId,l=e.colorScheme,a=e.avatarSaturation?parseInt(e.avatarSaturation):void 0,u=e.accentColor??"#000000",c=e.commentsEnabled,f=e.title==="null"?null:e.title,d=e.count==="true",p=e.publication??"";return{siteUrl:n,apiKey:r,apiUrl:i,postId:s,adminUrl:o,colorScheme:l,avatarSaturation:a,accentColor:u,commentsEnabled:c,title:f,showCount:d,publication:p}}function KC(){const t=new URL(window.location.href);t.searchParams.get("token")&&(t.searchParams.delete("token"),window.history.replaceState({},document.title,t.href))}function JC(){const t=UC(),e=HC(t),{siteUrl:n,...r}=WC(t),i=n||window.location.origin;try{KC(),ag.render(w.jsx(q.StrictMode,{children:w.jsx(VC,{customSiteUrl:n,siteUrl:i,...r})}),e)}catch(o){console.error(o)}}JC()});
//# sourceMappingURL=comments-ui.min.js.map
